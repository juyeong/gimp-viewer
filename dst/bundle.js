!function(e){function t(e){delete installedChunks[e]}function n(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.charset="utf-8",n.src=p.p+""+e+"."+b+".hot-update.js",t.appendChild(n)}function r(e){return e=e||1e4,new Promise(function(t,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,o=p.p+""+b+".hot-update.json";r.open("GET",o,!0),r.timeout=e,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+o+" timed out."));else if(404===r.status)t();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+o+" failed."));else{try{var e=JSON.parse(r.responseText)}catch(e){return void n(e)}t(e)}}})}function o(e){var t=R[e];if(!t)return p;var n=function(n){return t.hot.active?(R[n]?R[n].parents.indexOf(e)<0&&R[n].parents.push(e):(S=[e],m=n),t.children.indexOf(n)<0&&t.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),S=[]),p(n)};for(var r in p)Object.prototype.hasOwnProperty.call(p,r)&&"e"!==r&&Object.defineProperty(n,r,function(e){return{configurable:!0,enumerable:!0,get:function(){return p[e]},set:function(t){p[e]=t}}}(r));return n.e=function(e){function t(){C--,"prepare"===k&&(j[e]||f(e),0===C&&0===A&&l())}return"ready"===k&&a("prepare"),C++,p.e(e).then(t,function(e){throw t(),e})},n}function i(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:m!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:u,apply:d,status:function(e){if(!e)return k;O.push(e)},addStatusHandler:function(e){O.push(e)},removeStatusHandler:function(e){var t=O.indexOf(e);t>=0&&O.splice(t,1)},data:E[e]};return m=void 0,t}function a(e){k=e;for(var t=0;t<O.length;t++)O[t].call(null,e)}function c(e){return+e+""===e?+e:e}function u(e){if("idle"!==k)throw new Error("check() is only allowed in idle status");return g=e,a("check"),r(x).then(function(e){if(!e)return a("idle"),null;D={},j={},_=e.c,w=e.h,a("prepare");var t=new Promise(function(e,t){v={resolve:e,reject:t}});y={};return f(0),"prepare"===k&&0===C&&0===A&&l(),t})}function s(e,t){if(_[e]&&D[e]){D[e]=!1;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(y[n]=t[n]);0==--A&&0===C&&l()}}function f(e){_[e]?(D[e]=!0,A++,n(e)):j[e]=!0}function l(){a("ready");var e=v;if(v=null,e)if(g)Promise.resolve().then(function(){return d(g)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in y)Object.prototype.hasOwnProperty.call(y,n)&&t.push(c(n));e.resolve(t)}}function d(n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];e.indexOf(r)<0&&e.push(r)}}if("ready"!==k)throw new Error("apply() is only allowed in ready status");n=n||{};var o,i,u,s,f,l={},d=[],h={},m=function(){console.warn("[HMR] unexpected require("+g.moduleId+") to disposed module")};for(var v in y)if(Object.prototype.hasOwnProperty.call(y,v)){f=c(v);var g;g=y[v]?function(e){for(var t=[e],n={},o=t.slice().map(function(e){return{chain:[e],id:e}});o.length>0;){var i=o.pop(),a=i.id,c=i.chain;if((s=R[a])&&!s.hot._selfAccepted){if(s.hot._selfDeclined)return{type:"self-declined",chain:c,moduleId:a};if(s.hot._main)return{type:"unaccepted",chain:c,moduleId:a};for(var u=0;u<s.parents.length;u++){var f=s.parents[u],l=R[f];if(l){if(l.hot._declinedDependencies[a])return{type:"declined",chain:c.concat([f]),moduleId:a,parentId:f};t.indexOf(f)>=0||(l.hot._acceptedDependencies[a]?(n[f]||(n[f]=[]),r(n[f],[a])):(delete n[f],t.push(f),o.push({chain:c.concat([f]),id:f})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}(f):{type:"disposed",moduleId:v};var x=!1,T=!1,O=!1,A="";switch(g.chain&&(A="\nUpdate propagation: "+g.chain.join(" -> ")),g.type){case"self-declined":n.onDeclined&&n.onDeclined(g),n.ignoreDeclined||(x=new Error("Aborted because of self decline: "+g.moduleId+A));break;case"declined":n.onDeclined&&n.onDeclined(g),n.ignoreDeclined||(x=new Error("Aborted because of declined dependency: "+g.moduleId+" in "+g.parentId+A));break;case"unaccepted":n.onUnaccepted&&n.onUnaccepted(g),n.ignoreUnaccepted||(x=new Error("Aborted because "+f+" is not accepted"+A));break;case"accepted":n.onAccepted&&n.onAccepted(g),T=!0;break;case"disposed":n.onDisposed&&n.onDisposed(g),O=!0;break;default:throw new Error("Unexception type "+g.type)}if(x)return a("abort"),Promise.reject(x);if(T){h[f]=y[f],r(d,g.outdatedModules);for(f in g.outdatedDependencies)Object.prototype.hasOwnProperty.call(g.outdatedDependencies,f)&&(l[f]||(l[f]=[]),r(l[f],g.outdatedDependencies[f]))}O&&(r(d,[g.moduleId]),h[f]=m)}var C=[];for(i=0;i<d.length;i++)f=d[i],R[f]&&R[f].hot._selfAccepted&&C.push({module:f,errorHandler:R[f].hot._selfAccepted});a("dispose"),Object.keys(_).forEach(function(e){!1===_[e]&&t(e)});for(var j,D=d.slice();D.length>0;)if(f=D.pop(),s=R[f]){var q={},I=s.hot._disposeHandlers;for(u=0;u<I.length;u++)(o=I[u])(q);for(E[f]=q,s.hot.active=!1,delete R[f],delete l[f],u=0;u<s.children.length;u++){var L=R[s.children[u]];L&&((j=L.parents.indexOf(f))>=0&&L.parents.splice(j,1))}}var P,N;for(f in l)if(Object.prototype.hasOwnProperty.call(l,f)&&(s=R[f]))for(N=l[f],u=0;u<N.length;u++)P=N[u],(j=s.children.indexOf(P))>=0&&s.children.splice(j,1);a("apply"),b=w;for(f in h)Object.prototype.hasOwnProperty.call(h,f)&&(e[f]=h[f]);var U=null;for(f in l)if(Object.prototype.hasOwnProperty.call(l,f)&&(s=R[f])){N=l[f];var H=[];for(i=0;i<N.length;i++)if(P=N[i],o=s.hot._acceptedDependencies[P]){if(H.indexOf(o)>=0)continue;H.push(o)}for(i=0;i<H.length;i++){o=H[i];try{o(N)}catch(e){n.onErrored&&n.onErrored({type:"accept-errored",moduleId:f,dependencyId:N[i],error:e}),n.ignoreErrored||U||(U=e)}}}for(i=0;i<C.length;i++){var B=C[i];f=B.module,S=[f];try{p(f)}catch(e){if("function"==typeof B.errorHandler)try{B.errorHandler(e)}catch(t){n.onErrored&&n.onErrored({type:"self-accept-error-handler-errored",moduleId:f,error:t,orginalError:e,originalError:e}),n.ignoreErrored||U||(U=t),U||(U=e)}else n.onErrored&&n.onErrored({type:"self-accept-errored",moduleId:f,error:e}),n.ignoreErrored||U||(U=e)}}return U?(a("fail"),Promise.reject(U)):(a("idle"),new Promise(function(e){e(d)}))}function p(t){if(R[t])return R[t].exports;var n=R[t]={i:t,l:!1,exports:{},hot:i(t),parents:(T=S,S=[],T),children:[]};return e[t].call(n.exports,n,n.exports,o(t)),n.l=!0,n.exports}var h=window.webpackHotUpdate;window.webpackHotUpdate=function(e,t){s(e,t),h&&h(e,t)};var m,v,y,w,g=!0,b="b97442ceacebfd0b712d",x=1e4,E={},S=[],T=[],O=[],k="idle",A=0,C=0,j={},D={},_={},R={};p.m=e,p.c=R,p.d=function(e,t,n){p.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},p.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return p.d(t,"a",t),t},p.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},p.p="",p.h=function(){return b},o(7)(p.s=7)}([function(e,t,n){"use strict";function r(e){return"[object Array]"===T.call(e)}function o(e){return"[object ArrayBuffer]"===T.call(e)}function i(e){return"undefined"!=typeof FormData&&e instanceof FormData}function a(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function c(e){return"string"==typeof e}function u(e){return"number"==typeof e}function s(e){return void 0===e}function f(e){return null!==e&&"object"==typeof e}function l(e){return"[object Date]"===T.call(e)}function d(e){return"[object File]"===T.call(e)}function p(e){return"[object Blob]"===T.call(e)}function h(e){return"[object Function]"===T.call(e)}function m(e){return f(e)&&h(e.pipe)}function v(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function y(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function w(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function g(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),r(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function b(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=b(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)g(arguments[n],e);return t}function x(e,t,n){return g(t,function(t,r){e[r]=n&&"function"==typeof t?E(t,n):t}),e}var E=n(2),S=n(10),T=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:o,isBuffer:S,isFormData:i,isArrayBufferView:a,isString:c,isNumber:u,isObject:f,isUndefined:s,isDate:l,isFile:d,isBlob:p,isFunction:h,isStream:m,isURLSearchParams:v,isStandardBrowserEnv:w,forEach:g,merge:b,extend:x,trim:y}},function(e,t,n){"use strict";(function(t){function r(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o=n(0),i=n(13),a={"Content-Type":"application/x-www-form-urlencoded"},c={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(3):void 0!==t&&(e=n(3)),e}(),transformRequest:[function(e,t){return i(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};c.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],function(e){c.headers[e]={}}),o.forEach(["post","put","patch"],function(e){c.headers[e]=o.merge(a)}),e.exports=c}).call(t,n(12))},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(0),o=n(14),i=n(16),a=n(17),c=n(18),u=n(4),s="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(19);e.exports=function(e){return new Promise(function(t,f){var l=e.data,d=e.headers;r.isFormData(l)&&delete d["Content-Type"];var p=new XMLHttpRequest,h="onreadystatechange",m=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||c(e.url)||(p=new window.XDomainRequest,h="onload",m=!0,p.onprogress=function(){},p.ontimeout=function(){}),e.auth){var v=e.auth.username||"",y=e.auth.password||"";d.Authorization="Basic "+s(v+":"+y)}if(p.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p[h]=function(){if(p&&(4===p.readyState||m)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?p.response:p.responseText,i={data:r,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:n,config:e,request:p};o(t,f,i),p=null}},p.onerror=function(){f(u("Network Error",e,null,p)),p=null},p.ontimeout=function(){f(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var w=n(20),g=(e.withCredentials||c(e.url))&&e.xsrfCookieName?w.read(e.xsrfCookieName):void 0;g&&(d[e.xsrfHeaderName]=g)}if("setRequestHeader"in p&&r.forEach(d,function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete d[t]:p.setRequestHeader(t,e)}),e.withCredentials&&(p.withCredentials=!0),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),f(e),p=null)}),void 0===l&&(l=null),p.send(l)})}},function(e,t,n){"use strict";var r=n(15);e.exports=function(e,t,n,o,i){var a=new Error(e);return r(a,t,n,o,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";function r(e,t){if(e.forEach)e.forEach(t);else if(Array&&Array.from)Array.from(e).forEach(t);else{for(var n=[],r=0;r<e.length;r++)n.push(e[r]);if(n.forEach)n.forEach(t);else for(var r=0;r<n.length;r++)t(n[r])}}function o(e,t){if(e.find)return e.find(t);if(e.filter)return e.filter(t)[0];for(var n=[],r=0;r<e.length;r++)n.push(e[r]);if(n.find)return n.find(t);for(var r=0;r<n.length;r++)if(t(n[r]))return n[r]}function i(){function e(e){switch(e){case"gimp":case"translate":ne=e;break;case"change":ne="translate"}}function t(){return ne}function n(e){se=e;var t=document.querySelector(".currency");null!=t&&t.setAttribute("data-content",q(e,s.name))}function i(){return se}function l(e){switch(e){case 10:case 30:case 60:case 720:ie=e}}function y(){return ie}function g(e){ae=e.map(function(e){return D(e)})}function b(){return ae}function x(){return ce}function E(){ce-=1}function S(){ce=60}function T(){return p}function O(){return[h,m,v]}function k(){return[T()].concat(O())}function A(e){return o(w,function(t){return t.name===e})}function C(e){return o(re,function(t){return t.name===e})}function j(e){return o(d,function(t){return t.name===e})}function D(e){return{exchange:A(e.exchange),coin:C(e.coin),price:e.price,time:e.time,currency:j(e.currency)}}function R(e,t,n){var r=o(b(),function(r){return r.exchange===e&&r.coin===t&&r.time==n});return r&&r.price||0}function q(e,t){var n;return n=e<10?3:e<100?2:e<1e3?1:0,new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:n}).format(e)}function I(){var e=document.querySelector("thead");r(e.rows,function(t){return e.removeChild(t)});var t=e.insertRow();t.insertCell().outerHTML='<th scope="col"></th>',r(k(),function(e){t.insertCell().outerHTML='<th scope="col"><a href="'+e.url+'" class="text-dark '+e.name+'" target="_blank">'+e.displayName+'</a><small class="ban-'+e.name+'"></small></th>',Y(e)})}function L(){var e=document.querySelector("tbody");r(e.rows,function(t){return e.removeChild(t)}),r(re,function(t){var n=e.insertRow();n.insertCell().outerHTML='<th scope="row">'+t.name.toUpperCase()+'<br><a href="'+B(t)+'" class="text-muted" target="_blank"><small class="oi oi-bar-chart"></small></a></th>',r(k(),function(e){var r,o=R(e,t,0);if(0==o)r="-";else{var i=y(),a=R(e,t,i);if("gimp"===ne)if(e==T())r=U(e,o,a);else{var c=T(),u=R(c,t,0),s=R(c,t,i);r=H(e,o,a,u,s)}else r=N(e,o,a)}n.insertCell().innerHTML=r})})}function P(){I(),L(),$(function(){$('[data-toggle="popover"]').popover({trigger:"hover"})})}function N(e,t,n){var r=t/n-1;if(0!=n&&0!=t){return'<span style="color: '+F(r)+';">'+q(t,e.currency.name)+'</span><br><small data-toggle="popover" data-placement="bottom" data-content="'+q(n,e.currency.name)+'">'+(100*r).toFixed(2)+"%</small>"}return"<span>"+q(t,e.currency.name)+"</span>"}function U(e,t,n){var r=i(),o=t/n-1,a=t*r;if(0!=n&&0!=a){return'<span style="color: '+F(o)+';">'+q(t,e.currency.name)+"</span><br><small>"+q(a,s.name)+"</small>"}return"<span>"+q(t,e.currency.name)+"</span>"}function H(e,t,n,r,o){if(0==t)return"";var a,c=T();a=c.currency===f&&e.currency===s?i():1;var u=t/n-1,l=F(u);if(0==r||0==a)return'<span style="color: '+l+';">'+q(t,e.currency.name)+"</span>";var d=t/(r*a)-1,p=n/(o*a)-1,h=100*(d-p),m=h>0?"+"+h.toFixed(2)+"%":h.toFixed(2)+"%";return'<span style="color: '+l+';">'+q(t,e.currency.name)+'</span><br><small  data-toggle="popover" data-placement="bottom" data-content="'+m+'">'+(100*d).toFixed(2)+"%</small>"}function B(e){if(oe.indexOf(e)>=0)return"https://upbit.com/exchange?code=CRIX.UPBIT.KRW-"+e.name.toUpperCase();switch(e){case _:return"https://cryptowat.ch/bitfinex/iotusd";default:return"https://cryptowat.ch/bitfinex/"+e.name+"usd"}}function F(e){return e>0?"red":e<0?"blue":"black"}function M(e){document.querySelector(".updated-at").innerText=X(e)}function X(e){var t=new Date(e);return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" "+t.toLocaleTimeString()}function z(){u.default.get("https://15130i3vgl.execute-api.ap-northeast-2.amazonaws.com/dev/assets?t="+y()).then(function(e){g(e.data.data),M(e.data.updated_at),P(),S(),V(),W(!1)}).catch(function(e){e.response?(console.error(e.response.data),console.log(e.response.status),console.log(e.response.headers)):console.log(e.message),S()})}function J(){if(window.history.replaceState){var e=document.createElement("a");e.href=window.location.href,e.search="?rate="+t()+"&time="+y(),window.history.replaceState({},null,e.href)}}function K(e){var t=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),r=n.exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}function V(){var e=x(),t=document.querySelector(".time-refresh-text");t.innerText=e>5?e+" 초":"잠시"}function G(){return a(this,void 0,void 0,function(){var e,t,n;return c(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,u.default.get("https://15130i3vgl.execute-api.ap-northeast-2.amazonaws.com/dev/currency")];case 1:return e=r.sent(),t=e.data.data,[2,t.filter(function(e){return"USD"===e.source&&"KRW"===e.target}).map(function(e){return e.rate})[0]];case 2:return n=r.sent(),console.log("currency",n),[3,3];case 3:return[2,0]}})})}function W(e){ue||!e?(ue=!0,$("#loading-modal").modal("hide")):window.setTimeout(function(){ue||$("#loading-modal").modal("show")},500)}function Y(e){return a(this,void 0,void 0,function(){var t,n,r;return c(this,function(o){switch(o.label){case 0:switch(n=e){case p:return[3,1];case h:return[3,3];case m:return[3,5];case v:return[3,7]}return[3,9];case 1:return[4,Q()];case 2:return t=o.sent(),[3,10];case 3:return[4,Z()];case 4:return t=o.sent(),[3,10];case 5:return[4,ee()];case 6:return t=o.sent(),[3,10];case 7:return[4,te()];case 8:return t=o.sent(),[3,10];case 9:return t=!0,[3,10];case 10:return t||(r=document.querySelector(".ban-"+e.name))&&(r.className="oi oi-ban text-danger"),[2]}})})}function Q(){return a(this,void 0,void 0,function(){var e,t;return c(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,u.default.get("https://api.bitfinex.com/v2/platform/status")];case 1:return e=n.sent(),[2,1==e.data[0]];case 2:return t=n.sent(),console.log("bitfinex",t),[2,!1];case 3:return[2]}})})}function Z(){return a(this,void 0,void 0,function(){var e,t,n,r,o,i;return c(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,u.default.get("https://api.bithumb.com/public/ticker/BTC")];case 1:return e=a.sent(),t=e.data.status,n=parseInt(e.data.data.date,10),r=(new Date).getTime(),o=n-1e4<r&&r<n+1e4,[2,"0000"===t&&o];case 2:return i=a.sent(),console.log("bithumb",i),[2,!1];case 3:return[2]}})})}function ee(){return a(this,void 0,void 0,function(){var e,t,n,r,o,i;return c(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,u.default.get("https://api.coinone.co.kr/ticker?currency=btc")];case 1:return e=a.sent(),t=e.data.result,n=parseInt(e.data.timestamp,10),r=(new Date).getTime()/1e3,o=n-10<r&&r<n+10,[2,"success"===t&&o];case 2:return i=a.sent(),console.log("coinone",i),[2,!1];case 3:return[2]}})})}function te(){return a(this,void 0,void 0,function(){var e,t,n,r;return c(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,u.default.get("https://ccx.upbit.com/api/v1/timestamp")];case 1:return e=o.sent(),t=parseInt(e.data,10),n=(new Date).getTime()/1e3,[2,t-10<n&&n<t+10];case 2:return r=o.sent(),console.log("upbit",r),[2,!1];case 3:return[2]}})})}var ne="translate",ie=10,ae=[],ce=60,ue=!1,se=0;W(!0),function(){var t=K("rate");null!=t&&e(t);var n=K("time");null!=n&&l(parseInt(n))}(),function(){var e=document.querySelector("input[type=radio][name=rate][id="+t()+"]");e&&e.click();var n=document.querySelector("input[type=radio][name=time][id=t"+y()+"]");n&&n.click();var r=document.querySelector(".bookmark");r&&r.addEventListener("click",function(){window.external&&"AddFavorite"in window.external&&window.external.AddFavorite(location.href,document.title)})}(),function(){r(document.querySelectorAll("input[type=radio]"),function(t){t.addEventListener("focus",function(){if("rate"===t.name)"gimp"===t.id?(e("gimp"),P(),ga("send","event","Filter","SetIndicator","gimp")):"translate"===t.id&&(e("translate"),P(),ga("send","event","Filter","SetIndicator","translate"));else if("time"===t.name){var n=t.id.slice(1,t.id.length);l(parseInt(n)),z(),ga("send","event","Filter","SetTime",n)}J()})})}(),function(){document.querySelector(".time-refresh-button").addEventListener("click",function(){z(),ga("send","event","Refresh","ClickButton","refresh")}),window.setInterval(function(){E(),V(),0==x()&&(z(),ga("send","event","Refresh","Timeout","refresh"))},1e3)}(),function(){a(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,G()];case 1:return e=t.sent(),console.log("currency",e),e>0&&(n(e),P()),[2]}})})}(),z(),function(){var e=$(".gimp-onboarding");if(window.localStorage){var t=window.localStorage;t.getItem("onboarding:gimp_button")?e.popover("disable"):(e.popover("show"),document.querySelector(".gimp-onboarding").addEventListener("click",function(){e.popover("hide"),e.popover("disable"),t.setItem("onboarding:gimp_button","done")}))}else e.popover("disable")}()}var a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,c)}u((r=r.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,a,c,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c};Object.defineProperty(t,"__esModule",{value:!0});var u=n(8),s={name:"krw"},f={name:"usd"},l={name:"jpy"},d=[s,f,l],p={name:"bitfinex",currency:f,url:"https://www.bitfinex.com",displayName:"BITFINEX"},h={name:"bithumb",currency:s,url:"https://www.bithumb.com",displayName:"빗썸"},m={name:"coinone",currency:s,url:"https://www.coinone.co.kr",displayName:"코인원"},v={name:"upbit",currency:s,url:"https://upbit.com",displayName:"업비트"},y={name:"binance",currency:f,url:"https://www.binance.com",displayName:"BINANCE"},w=[p,y,h,m,v],g={name:"btc"},b={name:"eth"},x={name:"xrp"},E={name:"ltc"},S={name:"qtum"},T={name:"dash"},O={name:"etc"},k={name:"bch"},A={name:"xmr"},C={name:"zec"},j={name:"btg"},D={name:"eos"},_={name:"iota"},R={name:"snt"},q={name:"neo"},I={name:"ada"},L={name:"xlm"},P={name:"xem"},N={name:"steem"},U={name:"mer"},H={name:"strat"},B={name:"sbd"},F={name:"omg"},M={name:"lsk"},X={name:"tix"},z={name:"emc2"},J={name:"ardr"},K={name:"pivx"},V={name:"powr"},G={name:"mtl"},W={name:"grs"},Y={name:"storj"},Q={name:"ark"},Z={name:"rep"},ee={name:"kmd"},te={name:"waves"},ne={name:"vtc"},re=[g,b,x,E,S,T,O,k,A,C,j,D,_,R,q,F,Z,I,L,P,N,U,H,B,M,X,z,J,K,V,G,W,Y,Q,ee,te,ne],oe=[I,L,P,N,U,H,B,M,X,z,J,K,V,G,W,Y,Q,ee,te,ne];!function(e){(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e)}(i)},function(e,t,n){e.exports=n(9)},function(e,t,n){"use strict";function r(e){var t=new a(e),n=i(a.prototype.request,t);return o.extend(n,a.prototype,t),o.extend(n,t),n}var o=n(0),i=n(2),a=n(11),c=n(1),u=r(c);u.Axios=a,u.create=function(e){return r(o.merge(c,e))},u.Cancel=n(6),u.CancelToken=n(26),u.isCancel=n(5),u.all=function(e){return Promise.all(e)},u.spread=n(27),e.exports=u,e.exports.default=u},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||r(e)||!!e._isBuffer)}},function(e,t,n){"use strict";function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var o=n(1),i=n(0),a=n(21),c=n(22);r.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),e=i.merge(o,this.defaults,{method:"get"},e),e.method=e.method.toLowerCase();var t=[c,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},i.forEach(["delete","get","head","options"],function(e){r.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function i(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function a(){m&&p&&(m=!1,p.length?h=p.concat(h):v=-1,h.length&&c())}function c(){if(!m){var e=o(a);m=!0;for(var t=h.length;t;){for(p=h,h=[];++v<t;)p&&p[v].run();v=-1,t=h.length}p=null,m=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function s(){}var f,l,d=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var p,h=[],m=!1,v=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||m||o(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=s,d.addListener=s,d.once=s,d.off=s,d.removeListener=s,d.removeAllListeners=s,d.emit=s,d.prependListener=s,d.prependOnceListener=s,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(4);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(0);e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(o.isURLSearchParams(t))i=t.toString();else{var a=[];o.forEach(t,function(e,t){null!==e&&void 0!==e&&(o.isArray(e)&&(t+="[]"),o.isArray(e)||(e=[e]),o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),i=a.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},function(e,t,n){"use strict";var r=n(0),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,a={};return e?(r.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}}),a):a}},function(e,t,n){"use strict";var r=n(0);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return t=e(window.location.href),function(n){var o=r.isString(n)?e(n):n;return o.protocol===t.protocol&&o.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";function r(){this.message="String contains an invalid character"}function o(e){for(var t,n,o=String(e),a="",c=0,u=i;o.charAt(0|c)||(u="=",c%1);a+=u.charAt(63&t>>8-c%1*8)){if((n=o.charCodeAt(c+=.75))>255)throw new r;t=t<<8|n}return a}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=o},function(e,t,n){"use strict";var r=n(0);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,o,i,a){var c=[];c.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),r.isString(o)&&c.push("path="+o),r.isString(i)&&c.push("domain="+i),!0===a&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(){this.handlers=[]}var o=n(0);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var o=n(0),i=n(23),a=n(5),c=n(1),u=n(24),s=n(25);e.exports=function(e){return r(e),e.baseURL&&!u(e.url)&&(e.url=s(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||c.adapter)(e).then(function(t){return r(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(r(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new o(e),t(n.reason))})}var o=n(6);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZHN0L2J1bmRsZS5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgYjk3NDQyY2VhY2ViZmQwYjcxMmQiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2RlZmF1bHRzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9iaW5kLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvYWRhcHRlcnMveGhyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9jcmVhdGVFcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9pc0NhbmNlbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9DYW5jZWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9heGlvcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2F4aW9zLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pcy1idWZmZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0F4aW9zLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL3NldHRsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvZW5oYW5jZUVycm9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9idWlsZFVSTC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvcGFyc2VIZWFkZXJzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc1VSTFNhbWVPcmlnaW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2J0b2EuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2Nvb2tpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0ludGVyY2VwdG9yTWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvZGlzcGF0Y2hSZXF1ZXN0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS90cmFuc2Zvcm1EYXRhLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9pc0Fic29sdXRlVVJMLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9jb21iaW5lVVJMcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9DYW5jZWxUb2tlbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvc3ByZWFkLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJob3REaXNwb3NlQ2h1bmsiLCJjaHVua0lkIiwiaW5zdGFsbGVkQ2h1bmtzIiwiaG90RG93bmxvYWRVcGRhdGVDaHVuayIsImhlYWQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic2NyaXB0IiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJjaGFyc2V0Iiwic3JjIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInAiLCJob3RDdXJyZW50SGFzaCIsImFwcGVuZENoaWxkIiwiaG90RG93bmxvYWRNYW5pZmVzdCIsInJlcXVlc3RUaW1lb3V0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJYTUxIdHRwUmVxdWVzdCIsIkVycm9yIiwicmVxdWVzdCIsInJlcXVlc3RQYXRoIiwib3BlbiIsInRpbWVvdXQiLCJzZW5kIiwiZXJyIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsInVwZGF0ZSIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImUiLCJob3RDcmVhdGVSZXF1aXJlIiwibW9kdWxlSWQiLCJtZSIsImluc3RhbGxlZE1vZHVsZXMiLCJmbiIsImhvdCIsImFjdGl2ZSIsInBhcmVudHMiLCJpbmRleE9mIiwicHVzaCIsImhvdEN1cnJlbnRQYXJlbnRzIiwiaG90Q3VycmVudENoaWxkTW9kdWxlIiwiY2hpbGRyZW4iLCJjb25zb2xlIiwid2FybiIsIm5hbWUiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJzZXQiLCJ2YWx1ZSIsImZpbmlzaENodW5rTG9hZGluZyIsImhvdENodW5rc0xvYWRpbmciLCJob3RTdGF0dXMiLCJob3RXYWl0aW5nRmlsZXNNYXAiLCJob3RFbnN1cmVVcGRhdGVDaHVuayIsImhvdFdhaXRpbmdGaWxlcyIsImhvdFVwZGF0ZURvd25sb2FkZWQiLCJob3RTZXRTdGF0dXMiLCJ0aGVuIiwiaG90Q3JlYXRlTW9kdWxlIiwiX2FjY2VwdGVkRGVwZW5kZW5jaWVzIiwiX2RlY2xpbmVkRGVwZW5kZW5jaWVzIiwiX3NlbGZBY2NlcHRlZCIsIl9zZWxmRGVjbGluZWQiLCJfZGlzcG9zZUhhbmRsZXJzIiwiX21haW4iLCJhY2NlcHQiLCJkZXAiLCJjYWxsYmFjayIsImkiLCJsZW5ndGgiLCJkZWNsaW5lIiwiZGlzcG9zZSIsImFkZERpc3Bvc2VIYW5kbGVyIiwicmVtb3ZlRGlzcG9zZUhhbmRsZXIiLCJpZHgiLCJzcGxpY2UiLCJjaGVjayIsImhvdENoZWNrIiwiYXBwbHkiLCJob3RBcHBseSIsImwiLCJob3RTdGF0dXNIYW5kbGVycyIsImFkZFN0YXR1c0hhbmRsZXIiLCJyZW1vdmVTdGF0dXNIYW5kbGVyIiwiZGF0YSIsImhvdEN1cnJlbnRNb2R1bGVEYXRhIiwidW5kZWZpbmVkIiwibmV3U3RhdHVzIiwidG9Nb2R1bGVJZCIsImlkIiwiaG90QXBwbHlPblVwZGF0ZSIsImhvdFJlcXVlc3RUaW1lb3V0IiwiaG90UmVxdWVzdGVkRmlsZXNNYXAiLCJob3RBdmFpbGFibGVGaWxlc01hcCIsImMiLCJob3RVcGRhdGVOZXdIYXNoIiwiaCIsInByb21pc2UiLCJob3REZWZlcnJlZCIsImhvdFVwZGF0ZSIsImhvdEFkZFVwZGF0ZUNodW5rIiwibW9yZU1vZHVsZXMiLCJkZWZlcnJlZCIsInJlc3VsdCIsIm91dGRhdGVkTW9kdWxlcyIsIm9wdGlvbnMiLCJhZGRBbGxUb1NldCIsImEiLCJiIiwiaXRlbSIsImNiIiwiaiIsIm1vZHVsZSIsIm91dGRhdGVkRGVwZW5kZW5jaWVzIiwiYXBwbGllZFVwZGF0ZSIsIndhcm5VbmV4cGVjdGVkUmVxdWlyZSIsInVwZGF0ZU1vZHVsZUlkIiwicXVldWUiLCJzbGljZSIsIm1hcCIsImNoYWluIiwicXVldWVJdGVtIiwicG9wIiwicGFyZW50SWQiLCJwYXJlbnQiLCJjb25jYXQiLCJhYm9ydEVycm9yIiwiZG9BcHBseSIsImRvRGlzcG9zZSIsImNoYWluSW5mbyIsImpvaW4iLCJvbkRlY2xpbmVkIiwiaWdub3JlRGVjbGluZWQiLCJvblVuYWNjZXB0ZWQiLCJpZ25vcmVVbmFjY2VwdGVkIiwib25BY2NlcHRlZCIsIm9uRGlzcG9zZWQiLCJvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMiLCJlcnJvckhhbmRsZXIiLCJrZXlzIiwiZm9yRWFjaCIsImRpc3Bvc2VIYW5kbGVycyIsImNoaWxkIiwiZGVwZW5kZW5jeSIsIm1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzIiwiZXJyb3IiLCJjYWxsYmFja3MiLCJvbkVycm9yZWQiLCJkZXBlbmRlbmN5SWQiLCJpZ25vcmVFcnJvcmVkIiwiZXJyMiIsIm9yZ2luYWxFcnJvciIsIm9yaWdpbmFsRXJyb3IiLCJleHBvcnRzIiwiaG90Q3VycmVudFBhcmVudHNUZW1wIiwicGFyZW50SG90VXBkYXRlQ2FsbGJhY2siLCJ3aW5kb3ciLCJtIiwiZCIsImdldHRlciIsIm8iLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicyIsImlzQXJyYXkiLCJ2YWwiLCJ0b1N0cmluZyIsImlzQXJyYXlCdWZmZXIiLCJpc0Zvcm1EYXRhIiwiRm9ybURhdGEiLCJpc0FycmF5QnVmZmVyVmlldyIsIkFycmF5QnVmZmVyIiwiaXNWaWV3IiwiYnVmZmVyIiwiaXNTdHJpbmciLCJpc051bWJlciIsImlzVW5kZWZpbmVkIiwiaXNPYmplY3QiLCJpc0RhdGUiLCJpc0ZpbGUiLCJpc0Jsb2IiLCJpc0Z1bmN0aW9uIiwiaXNTdHJlYW0iLCJwaXBlIiwiaXNVUkxTZWFyY2hQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJ0cmltIiwic3RyIiwicmVwbGFjZSIsImlzU3RhbmRhcmRCcm93c2VyRW52IiwibmF2aWdhdG9yIiwicHJvZHVjdCIsIm9iaiIsImtleSIsIm1lcmdlIiwiYXNzaWduVmFsdWUiLCJhcmd1bWVudHMiLCJleHRlbmQiLCJ0aGlzQXJnIiwiYmluZCIsImlzQnVmZmVyIiwicHJvY2VzcyIsInNldENvbnRlbnRUeXBlSWZVbnNldCIsImhlYWRlcnMiLCJ1dGlscyIsIm5vcm1hbGl6ZUhlYWRlck5hbWUiLCJERUZBVUxUX0NPTlRFTlRfVFlQRSIsIkNvbnRlbnQtVHlwZSIsImRlZmF1bHRzIiwiYWRhcHRlciIsInRyYW5zZm9ybVJlcXVlc3QiLCJzdHJpbmdpZnkiLCJ0cmFuc2Zvcm1SZXNwb25zZSIsInhzcmZDb29raWVOYW1lIiwieHNyZkhlYWRlck5hbWUiLCJtYXhDb250ZW50TGVuZ3RoIiwidmFsaWRhdGVTdGF0dXMiLCJjb21tb24iLCJBY2NlcHQiLCJtZXRob2QiLCJhcmdzIiwiQXJyYXkiLCJzZXR0bGUiLCJidWlsZFVSTCIsInBhcnNlSGVhZGVycyIsImlzVVJMU2FtZU9yaWdpbiIsImNyZWF0ZUVycm9yIiwiYnRvYSIsImNvbmZpZyIsInJlcXVlc3REYXRhIiwicmVxdWVzdEhlYWRlcnMiLCJsb2FkRXZlbnQiLCJ4RG9tYWluIiwiWERvbWFpblJlcXVlc3QiLCJ1cmwiLCJvbnByb2dyZXNzIiwib250aW1lb3V0IiwiYXV0aCIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJBdXRob3JpemF0aW9uIiwidG9VcHBlckNhc2UiLCJwYXJhbXMiLCJwYXJhbXNTZXJpYWxpemVyIiwicmVzcG9uc2VVUkwiLCJyZXNwb25zZUhlYWRlcnMiLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJyZXNwb25zZURhdGEiLCJyZXNwb25zZVR5cGUiLCJyZXNwb25zZSIsInN0YXR1c1RleHQiLCJvbmVycm9yIiwiY29va2llcyIsInhzcmZWYWx1ZSIsIndpdGhDcmVkZW50aWFscyIsInJlYWQiLCJ0b0xvd2VyQ2FzZSIsInNldFJlcXVlc3RIZWFkZXIiLCJvbkRvd25sb2FkUHJvZ3Jlc3MiLCJhZGRFdmVudExpc3RlbmVyIiwib25VcGxvYWRQcm9ncmVzcyIsInVwbG9hZCIsImNhbmNlbFRva2VuIiwiY2FuY2VsIiwiYWJvcnQiLCJlbmhhbmNlRXJyb3IiLCJtZXNzYWdlIiwiY29kZSIsIl9fQ0FOQ0VMX18iLCJDYW5jZWwiLCJ0aGlzIiwibGlzdCIsImZyb20iLCJhcnJheSIsImZpbmQiLCJmaWx0ZXIiLCJtYWluIiwic2V0UmF0ZSIsIm5ld1JhdGUiLCJyYXRlIiwiZ2V0UmF0ZSIsInNldEN1cnJlbmN5UmF0ZSIsImN1cnJlbmN5UmF0ZSIsImN1cnJlbmN5IiwicXVlcnlTZWxlY3RvciIsInNldEF0dHJpYnV0ZSIsImZvcm1hdFByaWNlIiwiS1JXIiwiZ2V0Q3VycmVuY3lSYXRlIiwic2V0VGltZSIsIm5ld1RpbWUiLCJ0aW1lIiwiZ2V0VGltZSIsInNldFByaWNlRGF0YSIsIm5ld1ByaWNlRGF0YSIsInByaWNlRGF0YSIsImdldENvaW5QcmljZSIsImdldFByaWNlRGF0YSIsImdldFJlZnJlc2hUaW1lIiwicmVmcmVzaFRpbWUiLCJkZWNSZWZyZXNoVGltZSIsInJlc2V0UmVmcmVzaFRpbWUiLCJnZXRCYXNlRXhjaG5hZ2UiLCJCSVRGSU5FWCIsImdldEV4Y2hhbmdlcyIsIkJJVEhVTUIiLCJDT0lOT05FIiwiVVBCSVQiLCJnZXRBbGxFeGNoYW5nZXMiLCJnZXRFeGNoYW5nZSIsIkVYQ0hBTkdFUyIsImV4Y2hhbmdlIiwiZ2V0Q29pbiIsIkNPSU5TIiwiY29pbiIsImdldEN1cnJlbmN5IiwiQ1VSUkVOQ0lFUyIsInByaWNlIiwiZ2V0UHJpY2UiLCJqc29uIiwiZGlnaXRzIiwiSW50bCIsIk51bWJlckZvcm1hdCIsInN0eWxlIiwibWluaW11bUZyYWN0aW9uRGlnaXRzIiwiZm9ybWF0IiwicmVuZGVyVEhlYWQiLCJ0aGVhZCIsInJvd3MiLCJyb3ciLCJyZW1vdmVDaGlsZCIsImluc2VydFJvdyIsImluc2VydENlbGwiLCJvdXRlckhUTUwiLCJkaXNwbGF5TmFtZSIsInVwZGF0ZUV4Y2hhbmdlU3RhdHVzIiwicmVuZGVyVEJvZHkiLCJ0Ym9keSIsImdldENoYXJ0TGluayIsImh0bWwiLCJ0aW1lXzEiLCJsYXN0UHJpY2UiLCJyZW5kZXJLb3JQcmljZSIsImJhc2VFeGNoYW5nZSIsImJpdGZpbmV4UHJpY2UiLCJiaXRmaW5leExhc3RQcmljZSIsInJlbmRlckdpbXAiLCJyZW5kZXJDaGFuZ2VzIiwiaW5uZXJIVE1MIiwicmVuZGVyIiwiJCIsInBvcG92ZXIiLCJ0cmlnZ2VyIiwicHJpY2VDaGFuZ2UiLCJnZXRGb250Q29sb3IiLCJ0b0ZpeGVkIiwia29yUHJpY2UiLCJiYXNlUHJpY2UiLCJiYXNlTGFzdFByaWNlIiwiVVNEIiwiZm9udENvbG9yIiwiZ2ltcCIsImxhc3RHaW1wIiwiZ2ltcENoYW5nZSIsImZvcm1hdHRlZEdpbXBDaGFuZ2UiLCJVUEJJVF9DT0lOUyIsIklPVEEiLCJyZW5kZXJVcGRhdGVkQXQiLCJ1cGRhdGVkQXQiLCJpbm5lclRleHQiLCJnZXRGb3JtYXRVcGRhdGVkQXQiLCJkYXRlIiwiRGF0ZSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiZmV0Y2hQcmljZURhdGEiLCJheGlvc18xIiwiZGVmYXVsdCIsInVwZGF0ZWRfYXQiLCJ1cGRhdGVSZWZyZXNoVGV4dCIsInNob3dMb2FkaW5nIiwiY2F0Y2giLCJsb2ciLCJ1cGRhdGVVcmwiLCJoaXN0b3J5IiwicmVwbGFjZVN0YXRlIiwicGFyc2VyIiwiaHJlZiIsImxvY2F0aW9uIiwic2VhcmNoIiwiZ2V0UGFyYW1ldGVyQnlOYW1lIiwicmVnZXgiLCJSZWdFeHAiLCJyZXN1bHRzIiwiZXhlYyIsImRlY29kZVVSSUNvbXBvbmVudCIsImNvdW50IiwicmVmcmVzaFRleHQiLCJnZXRSZW1vdGVDdXJyZW5jeVJhdGUiLCJfX2F3YWl0ZXIiLCJlXzEiLCJfX2dlbmVyYXRvciIsIl9hIiwibGFiZWwiLCJ0cnlzIiwic2VudCIsInNvdXJjZSIsInRhcmdldCIsImxvYWRpbmciLCJsb2FkZWQiLCJtb2RhbCIsInNldFRpbWVvdXQiLCJ0YXJnZXRJY29uIiwiX2IiLCJpc0JpdGZpbmV4QWN0aXZlIiwiaXNCaXRodW1iQWN0aXZlIiwiaXNDb2lub25lQWN0aXZlIiwiaXNVcGJpdEFjdGl2ZSIsImNsYXNzTmFtZSIsImVfMiIsInN0YXR1c18xIiwiY3VycmVudFRpbWUiLCJ2YWxpZERhdGUiLCJlXzMiLCJwYXJzZUludCIsInRpbWVzdGFtcCIsImVfNCIsImVfNSIsInJhdGVCdXR0b24iLCJjbGljayIsInRpbWVCdXR0b24iLCJib29rbWFyayIsImV4dGVybmFsIiwiQWRkRmF2b3JpdGUiLCJ0aXRsZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJidXR0b24iLCJnYSIsInRpbWVfMiIsInNldEludGVydmFsIiwiZ2ltcEJ1dHRvbiIsImxvY2FsU3RvcmFnZSIsImxvY2FsU3RvcmFnZV8xIiwiZ2V0SXRlbSIsInNldEl0ZW0iLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsImZ1bGZpbGxlZCIsInN0ZXAiLCJuZXh0IiwicmVqZWN0ZWQiLCJkb25lIiwiYm9keSIsInZlcmIiLCJ2Iiwib3AiLCJmIiwiVHlwZUVycm9yIiwiXyIsInkiLCJ0Iiwib3BzIiwiZyIsInRocm93IiwicmV0dXJuIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJKUFkiLCJCSU5BTkNFIiwiQlRDIiwiRVRIIiwiWFJQIiwiTFRDIiwiUVRVTSIsIkRBU0giLCJFVEMiLCJCQ0giLCJYTVIiLCJaRUMiLCJCVEciLCJFT1MiLCJTTlQiLCJORU8iLCJBREEiLCJYTE0iLCJYRU0iLCJTVEVFTSIsIk1FUiIsIlNUUkFUIiwiU0JEIiwiT01HIiwiTFNLIiwiVElYIiwiRU1DMiIsIkFSRFIiLCJQSVZYIiwiUE9XUiIsIk1UTCIsIkdSUyIsIlNUT1JKIiwiQVJLIiwiUkVQIiwiS01EIiwiV0FWRVMiLCJWVEMiLCJhdHRhY2hFdmVudCIsImNyZWF0ZUluc3RhbmNlIiwiZGVmYXVsdENvbmZpZyIsImNvbnRleHQiLCJBeGlvcyIsImluc3RhbmNlIiwiYXhpb3MiLCJjcmVhdGUiLCJpbnN0YW5jZUNvbmZpZyIsIkNhbmNlbFRva2VuIiwiaXNDYW5jZWwiLCJhbGwiLCJwcm9taXNlcyIsInNwcmVhZCIsImNvbnN0cnVjdG9yIiwiaXNTbG93QnVmZmVyIiwicmVhZEZsb2F0TEUiLCJfaXNCdWZmZXIiLCJpbnRlcmNlcHRvcnMiLCJJbnRlcmNlcHRvck1hbmFnZXIiLCJkaXNwYXRjaFJlcXVlc3QiLCJpbnRlcmNlcHRvciIsInVuc2hpZnQiLCJzaGlmdCIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImNhY2hlZFNldFRpbWVvdXQiLCJydW5DbGVhclRpbWVvdXQiLCJtYXJrZXIiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpbmluZyIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlSW5kZXgiLCJkcmFpblF1ZXVlIiwibGVuIiwicnVuIiwiSXRlbSIsIm5vb3AiLCJuZXh0VGljayIsImJyb3dzZXIiLCJlbnYiLCJhcmd2IiwidmVyc2lvbiIsInZlcnNpb25zIiwib24iLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwibGlzdGVuZXJzIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJub3JtYWxpemVkTmFtZSIsImVuY29kZSIsImVuY29kZVVSSUNvbXBvbmVudCIsInNlcmlhbGl6ZWRQYXJhbXMiLCJwYXJ0cyIsInRvSVNPU3RyaW5nIiwiaWdub3JlRHVwbGljYXRlT2YiLCJwYXJzZWQiLCJzcGxpdCIsImxpbmUiLCJzdWJzdHIiLCJyZXNvbHZlVVJMIiwibXNpZSIsInVybFBhcnNpbmdOb2RlIiwicHJvdG9jb2wiLCJob3N0IiwiaGFzaCIsImhvc3RuYW1lIiwicG9ydCIsInBhdGhuYW1lIiwiY2hhckF0Iiwib3JpZ2luVVJMIiwidGVzdCIsInVzZXJBZ2VudCIsInJlcXVlc3RVUkwiLCJFIiwiaW5wdXQiLCJibG9jayIsImNoYXJDb2RlIiwiU3RyaW5nIiwib3V0cHV0IiwiY2hhcnMiLCJjaGFyQ29kZUF0Iiwid3JpdGUiLCJleHBpcmVzIiwicGF0aCIsImRvbWFpbiIsInNlY3VyZSIsImNvb2tpZSIsInRvR01UU3RyaW5nIiwibWF0Y2giLCJyZW1vdmUiLCJub3ciLCJoYW5kbGVycyIsInVzZSIsImVqZWN0IiwidGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZCIsInRocm93SWZSZXF1ZXN0ZWQiLCJ0cmFuc2Zvcm1EYXRhIiwiaXNBYnNvbHV0ZVVSTCIsImNvbWJpbmVVUkxzIiwiYmFzZVVSTCIsInJlYXNvbiIsImZucyIsInJlbGF0aXZlVVJMIiwiZXhlY3V0b3IiLCJyZXNvbHZlUHJvbWlzZSIsInRva2VuIiwiYXJyIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0FuQixRQUFBQyxHQUFBQyxTQUNBQyxpQkFBQUQsR0FTQSxRQUFBRSxHQUFBRixHQUNBLEdBQUFHLEdBQUFDLFNBQUFDLHFCQUFBLFdBQ0FDLEVBQUFGLFNBQUFHLGNBQUEsU0FDQUQsR0FBQUUsS0FBQSxrQkFDQUYsRUFBQUcsUUFBQSxRQUNBSCxFQUFBSSxJQUFBQyxFQUFBQyxFQUFBLEdBQUFaLEVBQUEsSUFBQWEsRUFBQSxpQkFFQVYsRUFBQVcsWUFBQVIsR0FHQSxRQUFBUyxHQUFBQyxHQUVBLE1BREFBLE1BQUEsSUFDQSxHQUFBQyxTQUFBLFNBQUFDLEVBQUFDLEdBQ0Esc0JBQUFDLGdCQUNBLE1BQUFELEdBQUEsR0FBQUUsT0FBQSxzQkFDQSxLQUNBLEdBQUFDLEdBQUEsR0FBQUYsZ0JBQ0FHLEVBQUFaLEVBQUFDLEVBQUEsR0FBQUMsRUFBQSxrQkFDQVMsR0FBQUUsS0FBQSxNQUFBRCxHQUFBLEdBQ0FELEVBQUFHLFFBQUFULEVBQ0FNLEVBQUFJLEtBQUEsTUFDSyxNQUFBQyxHQUNMLE1BQUFSLEdBQUFRLEdBRUFMLEVBQUFNLG1CQUFBLFdBQ0EsT0FBQU4sRUFBQU8sV0FDQSxPQUFBUCxFQUFBUSxPQUVBWCxFQUFBLEdBQUFFLE9BQUEsdUJBQUFFLEVBQUEsb0JBQ00sVUFBQUQsRUFBQVEsT0FFTlosUUFDTSxVQUFBSSxFQUFBUSxRQUFBLE1BQUFSLEVBQUFRLE9BRU5YLEVBQUEsR0FBQUUsT0FBQSx1QkFBQUUsRUFBQSxpQkFDTSxDQUVOLElBQ0EsR0FBQVEsR0FBQUMsS0FBQUMsTUFBQVgsRUFBQVksY0FDTyxNQUFBQyxHQUVQLFdBREFoQixHQUFBZ0Is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QUtBSyxFQUFBTCxPQUFBLEdBQUFsVyxHQUFBSCxHQUNBeVcsRUFBQUMsRUFBQUwsV0ExQkEsR0FBQWxXLEdBQUFqUixFQUFBLEVBaUNBeWdCLEdBQUEvZCxVQUFBb2tCLGlCQUFBLFdBQ0EsR0FBQTVWLEtBQUFpVyxPQUNBLEtBQUFqVyxNQUFBaVcsUUFRQTFHLEVBQUE3RyxPQUFBLFdBQ0EsR0FBQWpKLEVBSUEsUUFDQTZXLE1BSkEsR0FBQS9HLEdBQUEsU0FBQXphLEdBQ0EySyxFQUFBM0ssSUFJQTJLLFdBSUF6SixFQUFBeUMsUUFBQThXLEc1QjZqR00sU0FBVXZaLEVBQVF5QyxFQUFTM0osR0FFakMsWTZCam1HQWtILEdBQUF5QyxRQUFBLFNBQUF0RixHQUNBLGdCQUFBb2pCLEdBQ0EsTUFBQXBqQixHQUFBVyxNQUFBLEtBQUF5aUIiLCJmaWxlIjoiZHN0L2J1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90RGlzcG9zZUNodW5rKGNodW5rSWQpIHtcbi8qKioqKiovIFx0XHRkZWxldGUgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdO1xuLyoqKioqKi8gXHR9XG4vKioqKioqLyBcdHZhciBwYXJlbnRIb3RVcGRhdGVDYWxsYmFjayA9IHdpbmRvd1tcIndlYnBhY2tIb3RVcGRhdGVcIl07XG4vKioqKioqLyBcdHdpbmRvd1tcIndlYnBhY2tIb3RVcGRhdGVcIl0gPSBcclxuLyoqKioqKi8gXHRmdW5jdGlvbiB3ZWJwYWNrSG90VXBkYXRlQ2FsbGJhY2soY2h1bmtJZCwgbW9yZU1vZHVsZXMpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4vKioqKioqLyBcdFx0aG90QWRkVXBkYXRlQ2h1bmsoY2h1bmtJZCwgbW9yZU1vZHVsZXMpO1xyXG4vKioqKioqLyBcdFx0aWYocGFyZW50SG90VXBkYXRlQ2FsbGJhY2spIHBhcmVudEhvdFVwZGF0ZUNhbGxiYWNrKGNodW5rSWQsIG1vcmVNb2R1bGVzKTtcclxuLyoqKioqKi8gXHR9IDtcclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRmdW5jdGlvbiBob3REb3dubG9hZFVwZGF0ZUNodW5rKGNodW5rSWQpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4vKioqKioqLyBcdFx0dmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XHJcbi8qKioqKiovIFx0XHR2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcclxuLyoqKioqKi8gXHRcdHNjcmlwdC50eXBlID0gXCJ0ZXh0L2phdmFzY3JpcHRcIjtcclxuLyoqKioqKi8gXHRcdHNjcmlwdC5jaGFyc2V0ID0gXCJ1dGYtOFwiO1xyXG4vKioqKioqLyBcdFx0c2NyaXB0LnNyYyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBjaHVua0lkICsgXCIuXCIgKyBob3RDdXJyZW50SGFzaCArIFwiLmhvdC11cGRhdGUuanNcIjtcclxuLyoqKioqKi8gXHRcdDtcclxuLyoqKioqKi8gXHRcdGhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90RG93bmxvYWRNYW5pZmVzdChyZXF1ZXN0VGltZW91dCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbi8qKioqKiovIFx0XHRyZXF1ZXN0VGltZW91dCA9IHJlcXVlc3RUaW1lb3V0IHx8IDEwMDAwO1xyXG4vKioqKioqLyBcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4vKioqKioqLyBcdFx0XHRpZih0eXBlb2YgWE1MSHR0cFJlcXVlc3QgPT09IFwidW5kZWZpbmVkXCIpXHJcbi8qKioqKiovIFx0XHRcdFx0cmV0dXJuIHJlamVjdChuZXcgRXJyb3IoXCJObyBicm93c2VyIHN1cHBvcnRcIikpO1xyXG4vKioqKioqLyBcdFx0XHR0cnkge1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIHJlcXVlc3RQYXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIGhvdEN1cnJlbnRIYXNoICsgXCIuaG90LXVwZGF0ZS5qc29uXCI7XHJcbi8qKioqKiovIFx0XHRcdFx0cmVxdWVzdC5vcGVuKFwiR0VUXCIsIHJlcXVlc3RQYXRoLCB0cnVlKTtcclxuLyoqKioqKi8gXHRcdFx0XHRyZXF1ZXN0LnRpbWVvdXQgPSByZXF1ZXN0VGltZW91dDtcclxuLyoqKioqKi8gXHRcdFx0XHRyZXF1ZXN0LnNlbmQobnVsbCk7XHJcbi8qKioqKiovIFx0XHRcdH0gY2F0Y2goZXJyKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0cmV0dXJuIHJlamVjdChlcnIpO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYocmVxdWVzdC5yZWFkeVN0YXRlICE9PSA0KSByZXR1cm47XHJcbi8qKioqKiovIFx0XHRcdFx0aWYocmVxdWVzdC5zdGF0dXMgPT09IDApIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdC8vIHRpbWVvdXRcclxuLyoqKioqKi8gXHRcdFx0XHRcdHJlamVjdChuZXcgRXJyb3IoXCJNYW5pZmVzdCByZXF1ZXN0IHRvIFwiICsgcmVxdWVzdFBhdGggKyBcIiB0aW1lZCBvdXQuXCIpKTtcclxuLyoqKioqKi8gXHRcdFx0XHR9IGVsc2UgaWYocmVxdWVzdC5zdGF0dXMgPT09IDQwNCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0Ly8gbm8gdXBkYXRlIGF2YWlsYWJsZVxyXG4vKioqKioqLyBcdFx0XHRcdFx0cmVzb2x2ZSgpO1xyXG4vKioqKioqLyBcdFx0XHRcdH0gZWxzZSBpZihyZXF1ZXN0LnN0YXR1cyAhPT0gMjAwICYmIHJlcXVlc3Quc3RhdHVzICE9PSAzMDQpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdC8vIG90aGVyIGZhaWx1cmVcclxuLyoqKioqKi8gXHRcdFx0XHRcdHJlamVjdChuZXcgRXJyb3IoXCJNYW5pZmVzdCByZXF1ZXN0IHRvIFwiICsgcmVxdWVzdFBhdGggKyBcIiBmYWlsZWQuXCIpKTtcclxuLyoqKioqKi8gXHRcdFx0XHR9IGVsc2Uge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0Ly8gc3VjY2Vzc1xyXG4vKioqKioqLyBcdFx0XHRcdFx0dHJ5IHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0dmFyIHVwZGF0ZSA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fSBjYXRjaChlKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdHJlamVjdChlKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0cmVzb2x2ZSh1cGRhdGUpO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0fTtcclxuLyoqKioqKi8gXHRcdH0pO1xyXG4vKioqKioqLyBcdH1cclxuLyoqKioqKi9cbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0dmFyIGhvdEFwcGx5T25VcGRhdGUgPSB0cnVlO1xyXG4vKioqKioqLyBcdHZhciBob3RDdXJyZW50SGFzaCA9IFwiYjk3NDQyY2VhY2ViZmQwYjcxMmRcIjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4vKioqKioqLyBcdHZhciBob3RSZXF1ZXN0VGltZW91dCA9IDEwMDAwO1xyXG4vKioqKioqLyBcdHZhciBob3RDdXJyZW50TW9kdWxlRGF0YSA9IHt9O1xyXG4vKioqKioqLyBcdHZhciBob3RDdXJyZW50Q2hpbGRNb2R1bGU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuLyoqKioqKi8gXHR2YXIgaG90Q3VycmVudFBhcmVudHMgPSBbXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4vKioqKioqLyBcdHZhciBob3RDdXJyZW50UGFyZW50c1RlbXAgPSBbXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdENyZWF0ZVJlcXVpcmUobW9kdWxlSWQpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4vKioqKioqLyBcdFx0dmFyIG1lID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRpZighbWUpIHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fO1xyXG4vKioqKioqLyBcdFx0dmFyIGZuID0gZnVuY3Rpb24ocmVxdWVzdCkge1xyXG4vKioqKioqLyBcdFx0XHRpZihtZS5ob3QuYWN0aXZlKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XSkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XS5wYXJlbnRzLmluZGV4T2YobW9kdWxlSWQpIDwgMClcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XS5wYXJlbnRzLnB1c2gobW9kdWxlSWQpO1xyXG4vKioqKioqLyBcdFx0XHRcdH0gZWxzZSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3RDdXJyZW50UGFyZW50cyA9IFttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdFx0XHRob3RDdXJyZW50Q2hpbGRNb2R1bGUgPSByZXF1ZXN0O1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHRpZihtZS5jaGlsZHJlbi5pbmRleE9mKHJlcXVlc3QpIDwgMClcclxuLyoqKioqKi8gXHRcdFx0XHRcdG1lLmNoaWxkcmVuLnB1c2gocmVxdWVzdCk7XHJcbi8qKioqKiovIFx0XHRcdH0gZWxzZSB7XHJcbi8qKioqKiovIFx0XHRcdFx0Y29uc29sZS53YXJuKFwiW0hNUl0gdW5leHBlY3RlZCByZXF1aXJlKFwiICsgcmVxdWVzdCArIFwiKSBmcm9tIGRpc3Bvc2VkIG1vZHVsZSBcIiArIG1vZHVsZUlkKTtcclxuLyoqKioqKi8gXHRcdFx0XHRob3RDdXJyZW50UGFyZW50cyA9IFtdO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKHJlcXVlc3QpO1xyXG4vKioqKioqLyBcdFx0fTtcclxuLyoqKioqKi8gXHRcdHZhciBPYmplY3RGYWN0b3J5ID0gZnVuY3Rpb24gT2JqZWN0RmFjdG9yeShuYW1lKSB7XHJcbi8qKioqKiovIFx0XHRcdHJldHVybiB7XHJcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxyXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXHJcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fW25hbWVdO1xyXG4vKioqKioqLyBcdFx0XHRcdH0sXHJcbi8qKioqKiovIFx0XHRcdFx0c2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfX1tuYW1lXSA9IHZhbHVlO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0fTtcclxuLyoqKioqKi8gXHRcdH07XHJcbi8qKioqKiovIFx0XHRmb3IodmFyIG5hbWUgaW4gX193ZWJwYWNrX3JlcXVpcmVfXykge1xyXG4vKioqKioqLyBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoX193ZWJwYWNrX3JlcXVpcmVfXywgbmFtZSkgJiYgbmFtZSAhPT0gXCJlXCIpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZm4sIG5hbWUsIE9iamVjdEZhY3RvcnkobmFtZSkpO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHRmbi5lID0gZnVuY3Rpb24oY2h1bmtJZCkge1xyXG4vKioqKioqLyBcdFx0XHRpZihob3RTdGF0dXMgPT09IFwicmVhZHlcIilcclxuLyoqKioqKi8gXHRcdFx0XHRob3RTZXRTdGF0dXMoXCJwcmVwYXJlXCIpO1xyXG4vKioqKioqLyBcdFx0XHRob3RDaHVua3NMb2FkaW5nKys7XHJcbi8qKioqKiovIFx0XHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fLmUoY2h1bmtJZCkudGhlbihmaW5pc2hDaHVua0xvYWRpbmcsIGZ1bmN0aW9uKGVycikge1xyXG4vKioqKioqLyBcdFx0XHRcdGZpbmlzaENodW5rTG9hZGluZygpO1xyXG4vKioqKioqLyBcdFx0XHRcdHRocm93IGVycjtcclxuLyoqKioqKi8gXHRcdFx0fSk7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGZpbmlzaENodW5rTG9hZGluZygpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRob3RDaHVua3NMb2FkaW5nLS07XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoaG90U3RhdHVzID09PSBcInByZXBhcmVcIikge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYoIWhvdFdhaXRpbmdGaWxlc01hcFtjaHVua0lkXSkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRob3RFbnN1cmVVcGRhdGVDaHVuayhjaHVua0lkKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHRcdGlmKGhvdENodW5rc0xvYWRpbmcgPT09IDAgJiYgaG90V2FpdGluZ0ZpbGVzID09PSAwKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGhvdFVwZGF0ZURvd25sb2FkZWQoKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH07XHJcbi8qKioqKiovIFx0XHRyZXR1cm4gZm47XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdENyZWF0ZU1vZHVsZShtb2R1bGVJZCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbi8qKioqKiovIFx0XHR2YXIgaG90ID0ge1xyXG4vKioqKioqLyBcdFx0XHQvLyBwcml2YXRlIHN0dWZmXHJcbi8qKioqKiovIFx0XHRcdF9hY2NlcHRlZERlcGVuZGVuY2llczoge30sXHJcbi8qKioqKiovIFx0XHRcdF9kZWNsaW5lZERlcGVuZGVuY2llczoge30sXHJcbi8qKioqKiovIFx0XHRcdF9zZWxmQWNjZXB0ZWQ6IGZhbHNlLFxyXG4vKioqKioqLyBcdFx0XHRfc2VsZkRlY2xpbmVkOiBmYWxzZSxcclxuLyoqKioqKi8gXHRcdFx0X2Rpc3Bvc2VIYW5kbGVyczogW10sXHJcbi8qKioqKiovIFx0XHRcdF9tYWluOiBob3RDdXJyZW50Q2hpbGRNb2R1bGUgIT09IG1vZHVsZUlkLFxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHQvLyBNb2R1bGUgQVBJXHJcbi8qKioqKiovIFx0XHRcdGFjdGl2ZTogdHJ1ZSxcclxuLyoqKioqKi8gXHRcdFx0YWNjZXB0OiBmdW5jdGlvbihkZXAsIGNhbGxiYWNrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYodHlwZW9mIGRlcCA9PT0gXCJ1bmRlZmluZWRcIilcclxuLyoqKioqKi8gXHRcdFx0XHRcdGhvdC5fc2VsZkFjY2VwdGVkID0gdHJ1ZTtcclxuLyoqKioqKi8gXHRcdFx0XHRlbHNlIGlmKHR5cGVvZiBkZXAgPT09IFwiZnVuY3Rpb25cIilcclxuLyoqKioqKi8gXHRcdFx0XHRcdGhvdC5fc2VsZkFjY2VwdGVkID0gZGVwO1xyXG4vKioqKioqLyBcdFx0XHRcdGVsc2UgaWYodHlwZW9mIGRlcCA9PT0gXCJvYmplY3RcIilcclxuLyoqKioqKi8gXHRcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBkZXAubGVuZ3RoOyBpKyspXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbZGVwW2ldXSA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uKCkge307XHJcbi8qKioqKiovIFx0XHRcdFx0ZWxzZVxyXG4vKioqKioqLyBcdFx0XHRcdFx0aG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBdID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oKSB7fTtcclxuLyoqKioqKi8gXHRcdFx0fSxcclxuLyoqKioqKi8gXHRcdFx0ZGVjbGluZTogZnVuY3Rpb24oZGVwKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYodHlwZW9mIGRlcCA9PT0gXCJ1bmRlZmluZWRcIilcclxuLyoqKioqKi8gXHRcdFx0XHRcdGhvdC5fc2VsZkRlY2xpbmVkID0gdHJ1ZTtcclxuLyoqKioqKi8gXHRcdFx0XHRlbHNlIGlmKHR5cGVvZiBkZXAgPT09IFwib2JqZWN0XCIpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcFtpXV0gPSB0cnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdGVsc2VcclxuLyoqKioqKi8gXHRcdFx0XHRcdGhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbZGVwXSA9IHRydWU7XHJcbi8qKioqKiovIFx0XHRcdH0sXHJcbi8qKioqKiovIFx0XHRcdGRpc3Bvc2U6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aG90Ll9kaXNwb3NlSGFuZGxlcnMucHVzaChjYWxsYmFjayk7XHJcbi8qKioqKiovIFx0XHRcdH0sXHJcbi8qKioqKiovIFx0XHRcdGFkZERpc3Bvc2VIYW5kbGVyOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xyXG4vKioqKioqLyBcdFx0XHR9LFxyXG4vKioqKioqLyBcdFx0XHRyZW1vdmVEaXNwb3NlSGFuZGxlcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgaWR4ID0gaG90Ll9kaXNwb3NlSGFuZGxlcnMuaW5kZXhPZihjYWxsYmFjayk7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoaWR4ID49IDApIGhvdC5fZGlzcG9zZUhhbmRsZXJzLnNwbGljZShpZHgsIDEpO1xyXG4vKioqKioqLyBcdFx0XHR9LFxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHQvLyBNYW5hZ2VtZW50IEFQSVxyXG4vKioqKioqLyBcdFx0XHRjaGVjazogaG90Q2hlY2ssXHJcbi8qKioqKiovIFx0XHRcdGFwcGx5OiBob3RBcHBseSxcclxuLyoqKioqKi8gXHRcdFx0c3RhdHVzOiBmdW5jdGlvbihsKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYoIWwpIHJldHVybiBob3RTdGF0dXM7XHJcbi8qKioqKiovIFx0XHRcdFx0aG90U3RhdHVzSGFuZGxlcnMucHVzaChsKTtcclxuLyoqKioqKi8gXHRcdFx0fSxcclxuLyoqKioqKi8gXHRcdFx0YWRkU3RhdHVzSGFuZGxlcjogZnVuY3Rpb24obCkge1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdFN0YXR1c0hhbmRsZXJzLnB1c2gobCk7XHJcbi8qKioqKiovIFx0XHRcdH0sXHJcbi8qKioqKiovIFx0XHRcdHJlbW92ZVN0YXR1c0hhbmRsZXI6IGZ1bmN0aW9uKGwpIHtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgaWR4ID0gaG90U3RhdHVzSGFuZGxlcnMuaW5kZXhPZihsKTtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihpZHggPj0gMCkgaG90U3RhdHVzSGFuZGxlcnMuc3BsaWNlKGlkeCwgMSk7XHJcbi8qKioqKiovIFx0XHRcdH0sXHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdC8vaW5oZXJpdCBmcm9tIHByZXZpb3VzIGRpc3Bvc2UgY2FsbFxyXG4vKioqKioqLyBcdFx0XHRkYXRhOiBob3RDdXJyZW50TW9kdWxlRGF0YVttb2R1bGVJZF1cclxuLyoqKioqKi8gXHRcdH07XHJcbi8qKioqKiovIFx0XHRob3RDdXJyZW50Q2hpbGRNb2R1bGUgPSB1bmRlZmluZWQ7XHJcbi8qKioqKiovIFx0XHRyZXR1cm4gaG90O1xyXG4vKioqKioqLyBcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHR2YXIgaG90U3RhdHVzSGFuZGxlcnMgPSBbXTtcclxuLyoqKioqKi8gXHR2YXIgaG90U3RhdHVzID0gXCJpZGxlXCI7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90U2V0U3RhdHVzKG5ld1N0YXR1cykge1xyXG4vKioqKioqLyBcdFx0aG90U3RhdHVzID0gbmV3U3RhdHVzO1xyXG4vKioqKioqLyBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGhvdFN0YXR1c0hhbmRsZXJzLmxlbmd0aDsgaSsrKVxyXG4vKioqKioqLyBcdFx0XHRob3RTdGF0dXNIYW5kbGVyc1tpXS5jYWxsKG51bGwsIG5ld1N0YXR1cyk7XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdC8vIHdoaWxlIGRvd25sb2FkaW5nXHJcbi8qKioqKiovIFx0dmFyIGhvdFdhaXRpbmdGaWxlcyA9IDA7XHJcbi8qKioqKiovIFx0dmFyIGhvdENodW5rc0xvYWRpbmcgPSAwO1xyXG4vKioqKioqLyBcdHZhciBob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcclxuLyoqKioqKi8gXHR2YXIgaG90UmVxdWVzdGVkRmlsZXNNYXAgPSB7fTtcclxuLyoqKioqKi8gXHR2YXIgaG90QXZhaWxhYmxlRmlsZXNNYXAgPSB7fTtcclxuLyoqKioqKi8gXHR2YXIgaG90RGVmZXJyZWQ7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0Ly8gVGhlIHVwZGF0ZSBpbmZvXHJcbi8qKioqKiovIFx0dmFyIGhvdFVwZGF0ZSwgaG90VXBkYXRlTmV3SGFzaDtcclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRmdW5jdGlvbiB0b01vZHVsZUlkKGlkKSB7XHJcbi8qKioqKiovIFx0XHR2YXIgaXNOdW1iZXIgPSAoK2lkKSArIFwiXCIgPT09IGlkO1xyXG4vKioqKioqLyBcdFx0cmV0dXJuIGlzTnVtYmVyID8gK2lkIDogaWQ7XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdENoZWNrKGFwcGx5KSB7XHJcbi8qKioqKiovIFx0XHRpZihob3RTdGF0dXMgIT09IFwiaWRsZVwiKSB0aHJvdyBuZXcgRXJyb3IoXCJjaGVjaygpIGlzIG9ubHkgYWxsb3dlZCBpbiBpZGxlIHN0YXR1c1wiKTtcclxuLyoqKioqKi8gXHRcdGhvdEFwcGx5T25VcGRhdGUgPSBhcHBseTtcclxuLyoqKioqKi8gXHRcdGhvdFNldFN0YXR1cyhcImNoZWNrXCIpO1xyXG4vKioqKioqLyBcdFx0cmV0dXJuIGhvdERvd25sb2FkTWFuaWZlc3QoaG90UmVxdWVzdFRpbWVvdXQpLnRoZW4oZnVuY3Rpb24odXBkYXRlKSB7XHJcbi8qKioqKiovIFx0XHRcdGlmKCF1cGRhdGUpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRob3RTZXRTdGF0dXMoXCJpZGxlXCIpO1xyXG4vKioqKioqLyBcdFx0XHRcdHJldHVybiBudWxsO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdGhvdFJlcXVlc3RlZEZpbGVzTWFwID0ge307XHJcbi8qKioqKiovIFx0XHRcdGhvdFdhaXRpbmdGaWxlc01hcCA9IHt9O1xyXG4vKioqKioqLyBcdFx0XHRob3RBdmFpbGFibGVGaWxlc01hcCA9IHVwZGF0ZS5jO1xyXG4vKioqKioqLyBcdFx0XHRob3RVcGRhdGVOZXdIYXNoID0gdXBkYXRlLmg7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdGhvdFNldFN0YXR1cyhcInByZXBhcmVcIik7XHJcbi8qKioqKiovIFx0XHRcdHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aG90RGVmZXJyZWQgPSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRyZXNvbHZlOiByZXNvbHZlLFxyXG4vKioqKioqLyBcdFx0XHRcdFx0cmVqZWN0OiByZWplY3RcclxuLyoqKioqKi8gXHRcdFx0XHR9O1xyXG4vKioqKioqLyBcdFx0XHR9KTtcclxuLyoqKioqKi8gXHRcdFx0aG90VXBkYXRlID0ge307XHJcbi8qKioqKiovIFx0XHRcdHZhciBjaHVua0lkID0gMDtcclxuLyoqKioqKi8gXHRcdFx0eyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWxvbmUtYmxvY2tzXHJcbi8qKioqKiovIFx0XHRcdFx0LypnbG9iYWxzIGNodW5rSWQgKi9cclxuLyoqKioqKi8gXHRcdFx0XHRob3RFbnN1cmVVcGRhdGVDaHVuayhjaHVua0lkKTtcclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRpZihob3RTdGF0dXMgPT09IFwicHJlcGFyZVwiICYmIGhvdENodW5rc0xvYWRpbmcgPT09IDAgJiYgaG90V2FpdGluZ0ZpbGVzID09PSAwKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aG90VXBkYXRlRG93bmxvYWRlZCgpO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdHJldHVybiBwcm9taXNlO1xyXG4vKioqKioqLyBcdFx0fSk7XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdEFkZFVwZGF0ZUNodW5rKGNodW5rSWQsIG1vcmVNb2R1bGVzKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuLyoqKioqKi8gXHRcdGlmKCFob3RBdmFpbGFibGVGaWxlc01hcFtjaHVua0lkXSB8fCAhaG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0pXHJcbi8qKioqKiovIFx0XHRcdHJldHVybjtcclxuLyoqKioqKi8gXHRcdGhvdFJlcXVlc3RlZEZpbGVzTWFwW2NodW5rSWRdID0gZmFsc2U7XHJcbi8qKioqKiovIFx0XHRmb3IodmFyIG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XHJcbi8qKioqKiovIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aG90VXBkYXRlW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFx0aWYoLS1ob3RXYWl0aW5nRmlsZXMgPT09IDAgJiYgaG90Q2h1bmtzTG9hZGluZyA9PT0gMCkge1xyXG4vKioqKioqLyBcdFx0XHRob3RVcGRhdGVEb3dubG9hZGVkKCk7XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdGZ1bmN0aW9uIGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpIHtcclxuLyoqKioqKi8gXHRcdGlmKCFob3RBdmFpbGFibGVGaWxlc01hcFtjaHVua0lkXSkge1xyXG4vKioqKioqLyBcdFx0XHRob3RXYWl0aW5nRmlsZXNNYXBbY2h1bmtJZF0gPSB0cnVlO1xyXG4vKioqKioqLyBcdFx0fSBlbHNlIHtcclxuLyoqKioqKi8gXHRcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0gPSB0cnVlO1xyXG4vKioqKioqLyBcdFx0XHRob3RXYWl0aW5nRmlsZXMrKztcclxuLyoqKioqKi8gXHRcdFx0aG90RG93bmxvYWRVcGRhdGVDaHVuayhjaHVua0lkKTtcclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0ZnVuY3Rpb24gaG90VXBkYXRlRG93bmxvYWRlZCgpIHtcclxuLyoqKioqKi8gXHRcdGhvdFNldFN0YXR1cyhcInJlYWR5XCIpO1xyXG4vKioqKioqLyBcdFx0dmFyIGRlZmVycmVkID0gaG90RGVmZXJyZWQ7XHJcbi8qKioqKiovIFx0XHRob3REZWZlcnJlZCA9IG51bGw7XHJcbi8qKioqKiovIFx0XHRpZighZGVmZXJyZWQpIHJldHVybjtcclxuLyoqKioqKi8gXHRcdGlmKGhvdEFwcGx5T25VcGRhdGUpIHtcclxuLyoqKioqKi8gXHRcdFx0Ly8gV3JhcCBkZWZlcnJlZCBvYmplY3QgaW4gUHJvbWlzZSB0byBtYXJrIGl0IGFzIGEgd2VsbC1oYW5kbGVkIFByb21pc2UgdG9cclxuLyoqKioqKi8gXHRcdFx0Ly8gYXZvaWQgdHJpZ2dlcmluZyB1bmNhdWdodCBleGNlcHRpb24gd2FybmluZyBpbiBDaHJvbWUuXHJcbi8qKioqKiovIFx0XHRcdC8vIFNlZSBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NjU2NjZcclxuLyoqKioqKi8gXHRcdFx0UHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRyZXR1cm4gaG90QXBwbHkoaG90QXBwbHlPblVwZGF0ZSk7XHJcbi8qKioqKiovIFx0XHRcdH0pLnRoZW4oXHJcbi8qKioqKiovIFx0XHRcdFx0ZnVuY3Rpb24ocmVzdWx0KSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdCk7XHJcbi8qKioqKiovIFx0XHRcdFx0fSxcclxuLyoqKioqKi8gXHRcdFx0XHRmdW5jdGlvbihlcnIpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChlcnIpO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0KTtcclxuLyoqKioqKi8gXHRcdH0gZWxzZSB7XHJcbi8qKioqKiovIFx0XHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbXTtcclxuLyoqKioqKi8gXHRcdFx0Zm9yKHZhciBpZCBpbiBob3RVcGRhdGUpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaG90VXBkYXRlLCBpZCkpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKHRvTW9kdWxlSWQoaWQpKTtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShvdXRkYXRlZE1vZHVsZXMpO1xyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRmdW5jdGlvbiBob3RBcHBseShvcHRpb25zKSB7XHJcbi8qKioqKiovIFx0XHRpZihob3RTdGF0dXMgIT09IFwicmVhZHlcIikgdGhyb3cgbmV3IEVycm9yKFwiYXBwbHkoKSBpcyBvbmx5IGFsbG93ZWQgaW4gcmVhZHkgc3RhdHVzXCIpO1xyXG4vKioqKioqLyBcdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHR2YXIgY2I7XHJcbi8qKioqKiovIFx0XHR2YXIgaTtcclxuLyoqKioqKi8gXHRcdHZhciBqO1xyXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZTtcclxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGVJZDtcclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdGZ1bmN0aW9uIGdldEFmZmVjdGVkU3R1ZmYodXBkYXRlTW9kdWxlSWQpIHtcclxuLyoqKioqKi8gXHRcdFx0dmFyIG91dGRhdGVkTW9kdWxlcyA9IFt1cGRhdGVNb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdHZhciBvdXRkYXRlZERlcGVuZGVuY2llcyA9IHt9O1xyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHR2YXIgcXVldWUgPSBvdXRkYXRlZE1vZHVsZXMuc2xpY2UoKS5tYXAoZnVuY3Rpb24oaWQpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRyZXR1cm4ge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0Y2hhaW46IFtpZF0sXHJcbi8qKioqKiovIFx0XHRcdFx0XHRpZDogaWRcclxuLyoqKioqKi8gXHRcdFx0XHR9O1xyXG4vKioqKioqLyBcdFx0XHR9KTtcclxuLyoqKioqKi8gXHRcdFx0d2hpbGUocXVldWUubGVuZ3RoID4gMCkge1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBxdWV1ZUl0ZW0gPSBxdWV1ZS5wb3AoKTtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgbW9kdWxlSWQgPSBxdWV1ZUl0ZW0uaWQ7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGNoYWluID0gcXVldWVJdGVtLmNoYWluO1xyXG4vKioqKioqLyBcdFx0XHRcdG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKCFtb2R1bGUgfHwgbW9kdWxlLmhvdC5fc2VsZkFjY2VwdGVkKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0Y29udGludWU7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYobW9kdWxlLmhvdC5fc2VsZkRlY2xpbmVkKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRyZXR1cm4ge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHR0eXBlOiBcInNlbGYtZGVjbGluZWRcIixcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0Y2hhaW46IGNoYWluLFxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRtb2R1bGVJZDogbW9kdWxlSWRcclxuLyoqKioqKi8gXHRcdFx0XHRcdH07XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdGlmKG1vZHVsZS5ob3QuX21haW4pIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHJldHVybiB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdHR5cGU6IFwidW5hY2NlcHRlZFwiLFxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRjaGFpbjogY2hhaW4sXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZFxyXG4vKioqKioqLyBcdFx0XHRcdFx0fTtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG1vZHVsZS5wYXJlbnRzLmxlbmd0aDsgaSsrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR2YXIgcGFyZW50SWQgPSBtb2R1bGUucGFyZW50c1tpXTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHZhciBwYXJlbnQgPSBpbnN0YWxsZWRNb2R1bGVzW3BhcmVudElkXTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGlmKCFwYXJlbnQpIGNvbnRpbnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYocGFyZW50LmhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdHJldHVybiB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0dHlwZTogXCJkZWNsaW5lZFwiLFxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGNoYWluOiBjaGFpbi5jb25jYXQoW3BhcmVudElkXSksXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdHBhcmVudElkOiBwYXJlbnRJZFxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHR9O1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYob3V0ZGF0ZWRNb2R1bGVzLmluZGV4T2YocGFyZW50SWQpID49IDApIGNvbnRpbnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYocGFyZW50LmhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmKCFvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF0pXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdID0gW107XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGFkZEFsbFRvU2V0KG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSwgW21vZHVsZUlkXSk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0ZGVsZXRlIG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKHBhcmVudElkKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHF1ZXVlLnB1c2goe1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRjaGFpbjogY2hhaW4uY29uY2F0KFtwYXJlbnRJZF0pLFxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZDogcGFyZW50SWRcclxuLyoqKioqKi8gXHRcdFx0XHRcdH0pO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0XHRyZXR1cm4ge1xyXG4vKioqKioqLyBcdFx0XHRcdHR5cGU6IFwiYWNjZXB0ZWRcIixcclxuLyoqKioqKi8gXHRcdFx0XHRtb2R1bGVJZDogdXBkYXRlTW9kdWxlSWQsXHJcbi8qKioqKiovIFx0XHRcdFx0b3V0ZGF0ZWRNb2R1bGVzOiBvdXRkYXRlZE1vZHVsZXMsXHJcbi8qKioqKiovIFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXM6IG91dGRhdGVkRGVwZW5kZW5jaWVzXHJcbi8qKioqKiovIFx0XHRcdH07XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRmdW5jdGlvbiBhZGRBbGxUb1NldChhLCBiKSB7XHJcbi8qKioqKiovIFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGl0ZW0gPSBiW2ldO1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKGEuaW5kZXhPZihpdGVtKSA8IDApXHJcbi8qKioqKiovIFx0XHRcdFx0XHRhLnB1c2goaXRlbSk7XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdC8vIGF0IGJlZ2luIGFsbCB1cGRhdGVzIG1vZHVsZXMgYXJlIG91dGRhdGVkXHJcbi8qKioqKiovIFx0XHQvLyB0aGUgXCJvdXRkYXRlZFwiIHN0YXR1cyBjYW4gcHJvcGFnYXRlIHRvIHBhcmVudHMgaWYgdGhleSBkb24ndCBhY2NlcHQgdGhlIGNoaWxkcmVuXHJcbi8qKioqKiovIFx0XHR2YXIgb3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSB7fTtcclxuLyoqKioqKi8gXHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbXTtcclxuLyoqKioqKi8gXHRcdHZhciBhcHBsaWVkVXBkYXRlID0ge307XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHR2YXIgd2FyblVuZXhwZWN0ZWRSZXF1aXJlID0gZnVuY3Rpb24gd2FyblVuZXhwZWN0ZWRSZXF1aXJlKCkge1xyXG4vKioqKioqLyBcdFx0XHRjb25zb2xlLndhcm4oXCJbSE1SXSB1bmV4cGVjdGVkIHJlcXVpcmUoXCIgKyByZXN1bHQubW9kdWxlSWQgKyBcIikgdG8gZGlzcG9zZWQgbW9kdWxlXCIpO1xyXG4vKioqKioqLyBcdFx0fTtcclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdGZvcih2YXIgaWQgaW4gaG90VXBkYXRlKSB7XHJcbi8qKioqKiovIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChob3RVcGRhdGUsIGlkKSkge1xyXG4vKioqKioqLyBcdFx0XHRcdG1vZHVsZUlkID0gdG9Nb2R1bGVJZChpZCk7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIHJlc3VsdDtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihob3RVcGRhdGVbaWRdKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRyZXN1bHQgPSBnZXRBZmZlY3RlZFN0dWZmKG1vZHVsZUlkKTtcclxuLyoqKioqKi8gXHRcdFx0XHR9IGVsc2Uge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0cmVzdWx0ID0ge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHR0eXBlOiBcImRpc3Bvc2VkXCIsXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBpZFxyXG4vKioqKioqLyBcdFx0XHRcdFx0fTtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGFib3J0RXJyb3IgPSBmYWxzZTtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgZG9BcHBseSA9IGZhbHNlO1xyXG4vKioqKioqLyBcdFx0XHRcdHZhciBkb0Rpc3Bvc2UgPSBmYWxzZTtcclxuLyoqKioqKi8gXHRcdFx0XHR2YXIgY2hhaW5JbmZvID0gXCJcIjtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihyZXN1bHQuY2hhaW4pIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGNoYWluSW5mbyA9IFwiXFxuVXBkYXRlIHByb3BhZ2F0aW9uOiBcIiArIHJlc3VsdC5jaGFpbi5qb2luKFwiIC0+IFwiKTtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0c3dpdGNoKHJlc3VsdC50eXBlKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRjYXNlIFwic2VsZi1kZWNsaW5lZFwiOlxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZihvcHRpb25zLm9uRGVjbGluZWQpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0b3B0aW9ucy5vbkRlY2xpbmVkKHJlc3VsdCk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmKCFvcHRpb25zLmlnbm9yZURlY2xpbmVkKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGFib3J0RXJyb3IgPSBuZXcgRXJyb3IoXCJBYm9ydGVkIGJlY2F1c2Ugb2Ygc2VsZiBkZWNsaW5lOiBcIiArIHJlc3VsdC5tb2R1bGVJZCArIGNoYWluSW5mbyk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGJyZWFrO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0Y2FzZSBcImRlY2xpbmVkXCI6XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmKG9wdGlvbnMub25EZWNsaW5lZClcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRvcHRpb25zLm9uRGVjbGluZWQocmVzdWx0KTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aWYoIW9wdGlvbnMuaWdub3JlRGVjbGluZWQpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0YWJvcnRFcnJvciA9IG5ldyBFcnJvcihcIkFib3J0ZWQgYmVjYXVzZSBvZiBkZWNsaW5lZCBkZXBlbmRlbmN5OiBcIiArIHJlc3VsdC5tb2R1bGVJZCArIFwiIGluIFwiICsgcmVzdWx0LnBhcmVudElkICsgY2hhaW5JbmZvKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0YnJlYWs7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRjYXNlIFwidW5hY2NlcHRlZFwiOlxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZihvcHRpb25zLm9uVW5hY2NlcHRlZClcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRvcHRpb25zLm9uVW5hY2NlcHRlZChyZXN1bHQpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZighb3B0aW9ucy5pZ25vcmVVbmFjY2VwdGVkKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGFib3J0RXJyb3IgPSBuZXcgRXJyb3IoXCJBYm9ydGVkIGJlY2F1c2UgXCIgKyBtb2R1bGVJZCArIFwiIGlzIG5vdCBhY2NlcHRlZFwiICsgY2hhaW5JbmZvKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0YnJlYWs7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRjYXNlIFwiYWNjZXB0ZWRcIjpcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aWYob3B0aW9ucy5vbkFjY2VwdGVkKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdG9wdGlvbnMub25BY2NlcHRlZChyZXN1bHQpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRkb0FwcGx5ID0gdHJ1ZTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0YnJlYWs7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRjYXNlIFwiZGlzcG9zZWRcIjpcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aWYob3B0aW9ucy5vbkRpc3Bvc2VkKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdG9wdGlvbnMub25EaXNwb3NlZChyZXN1bHQpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRkb0Rpc3Bvc2UgPSB0cnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRicmVhaztcclxuLyoqKioqKi8gXHRcdFx0XHRcdGRlZmF1bHQ6XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIlVuZXhjZXB0aW9uIHR5cGUgXCIgKyByZXN1bHQudHlwZSk7XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdGlmKGFib3J0RXJyb3IpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGhvdFNldFN0YXR1cyhcImFib3J0XCIpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KGFib3J0RXJyb3IpO1xyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHRpZihkb0FwcGx5KSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRhcHBsaWVkVXBkYXRlW21vZHVsZUlkXSA9IGhvdFVwZGF0ZVttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdFx0XHRhZGRBbGxUb1NldChvdXRkYXRlZE1vZHVsZXMsIHJlc3VsdC5vdXRkYXRlZE1vZHVsZXMpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0Zm9yKG1vZHVsZUlkIGluIHJlc3VsdC5vdXRkYXRlZERlcGVuZGVuY2llcykge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocmVzdWx0Lm91dGRhdGVkRGVwZW5kZW5jaWVzLCBtb2R1bGVJZCkpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRpZighb3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdID0gW107XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdLCByZXN1bHQub3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHRpZihkb0Rpc3Bvc2UpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdGFkZEFsbFRvU2V0KG91dGRhdGVkTW9kdWxlcywgW3Jlc3VsdC5tb2R1bGVJZF0pO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0YXBwbGllZFVwZGF0ZVttb2R1bGVJZF0gPSB3YXJuVW5leHBlY3RlZFJlcXVpcmU7XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHQvLyBTdG9yZSBzZWxmIGFjY2VwdGVkIG91dGRhdGVkIG1vZHVsZXMgdG8gcmVxdWlyZSB0aGVtIGxhdGVyIGJ5IHRoZSBtb2R1bGUgc3lzdGVtXHJcbi8qKioqKiovIFx0XHR2YXIgb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzID0gW107XHJcbi8qKioqKiovIFx0XHRmb3IoaSA9IDA7IGkgPCBvdXRkYXRlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuLyoqKioqKi8gXHRcdFx0bW9kdWxlSWQgPSBvdXRkYXRlZE1vZHVsZXNbaV07XHJcbi8qKioqKiovIFx0XHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdICYmIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkKVxyXG4vKioqKioqLyBcdFx0XHRcdG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcy5wdXNoKHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdG1vZHVsZTogbW9kdWxlSWQsXHJcbi8qKioqKiovIFx0XHRcdFx0XHRlcnJvckhhbmRsZXI6IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkXHJcbi8qKioqKiovIFx0XHRcdFx0fSk7XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHQvLyBOb3cgaW4gXCJkaXNwb3NlXCIgcGhhc2VcclxuLyoqKioqKi8gXHRcdGhvdFNldFN0YXR1cyhcImRpc3Bvc2VcIik7XHJcbi8qKioqKiovIFx0XHRPYmplY3Qua2V5cyhob3RBdmFpbGFibGVGaWxlc01hcCkuZm9yRWFjaChmdW5jdGlvbihjaHVua0lkKSB7XHJcbi8qKioqKiovIFx0XHRcdGlmKGhvdEF2YWlsYWJsZUZpbGVzTWFwW2NodW5rSWRdID09PSBmYWxzZSkge1xyXG4vKioqKioqLyBcdFx0XHRcdGhvdERpc3Bvc2VDaHVuayhjaHVua0lkKTtcclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0fSk7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHR2YXIgaWR4O1xyXG4vKioqKioqLyBcdFx0dmFyIHF1ZXVlID0gb3V0ZGF0ZWRNb2R1bGVzLnNsaWNlKCk7XHJcbi8qKioqKiovIFx0XHR3aGlsZShxdWV1ZS5sZW5ndGggPiAwKSB7XHJcbi8qKioqKiovIFx0XHRcdG1vZHVsZUlkID0gcXVldWUucG9wKCk7XHJcbi8qKioqKiovIFx0XHRcdG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFx0XHRpZighbW9kdWxlKSBjb250aW51ZTtcclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdFx0dmFyIGRhdGEgPSB7fTtcclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdFx0Ly8gQ2FsbCBkaXNwb3NlIGhhbmRsZXJzXHJcbi8qKioqKiovIFx0XHRcdHZhciBkaXNwb3NlSGFuZGxlcnMgPSBtb2R1bGUuaG90Ll9kaXNwb3NlSGFuZGxlcnM7XHJcbi8qKioqKiovIFx0XHRcdGZvcihqID0gMDsgaiA8IGRpc3Bvc2VIYW5kbGVycy5sZW5ndGg7IGorKykge1xyXG4vKioqKioqLyBcdFx0XHRcdGNiID0gZGlzcG9zZUhhbmRsZXJzW2pdO1xyXG4vKioqKioqLyBcdFx0XHRcdGNiKGRhdGEpO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdGhvdEN1cnJlbnRNb2R1bGVEYXRhW21vZHVsZUlkXSA9IGRhdGE7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdC8vIGRpc2FibGUgbW9kdWxlICh0aGlzIGRpc2FibGVzIHJlcXVpcmVzIGZyb20gdGhpcyBtb2R1bGUpXHJcbi8qKioqKiovIFx0XHRcdG1vZHVsZS5ob3QuYWN0aXZlID0gZmFsc2U7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdC8vIHJlbW92ZSBtb2R1bGUgZnJvbSBjYWNoZVxyXG4vKioqKioqLyBcdFx0XHRkZWxldGUgaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRcdC8vIHdoZW4gZGlzcG9zaW5nIHRoZXJlIGlzIG5vIG5lZWQgdG8gY2FsbCBkaXNwb3NlIGhhbmRsZXJcclxuLyoqKioqKi8gXHRcdFx0ZGVsZXRlIG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXTtcclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdFx0Ly8gcmVtb3ZlIFwicGFyZW50c1wiIHJlZmVyZW5jZXMgZnJvbSBhbGwgY2hpbGRyZW5cclxuLyoqKioqKi8gXHRcdFx0Zm9yKGogPSAwOyBqIDwgbW9kdWxlLmNoaWxkcmVuLmxlbmd0aDsgaisrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0dmFyIGNoaWxkID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGUuY2hpbGRyZW5bal1dO1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKCFjaGlsZCkgY29udGludWU7XHJcbi8qKioqKiovIFx0XHRcdFx0aWR4ID0gY2hpbGQucGFyZW50cy5pbmRleE9mKG1vZHVsZUlkKTtcclxuLyoqKioqKi8gXHRcdFx0XHRpZihpZHggPj0gMCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0Y2hpbGQucGFyZW50cy5zcGxpY2UoaWR4LCAxKTtcclxuLyoqKioqKi8gXHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdC8vIHJlbW92ZSBvdXRkYXRlZCBkZXBlbmRlbmN5IGZyb20gbW9kdWxlIGNoaWxkcmVuXHJcbi8qKioqKiovIFx0XHR2YXIgZGVwZW5kZW5jeTtcclxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcztcclxuLyoqKioqKi8gXHRcdGZvcihtb2R1bGVJZCBpbiBvdXRkYXRlZERlcGVuZGVuY2llcykge1xyXG4vKioqKioqLyBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG1vZHVsZUlkKSkge1xyXG4vKioqKioqLyBcdFx0XHRcdG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKG1vZHVsZSkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0bW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdFx0XHRmb3IoaiA9IDA7IGogPCBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcy5sZW5ndGg7IGorKykge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXNbal07XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlkeCA9IG1vZHVsZS5jaGlsZHJlbi5pbmRleE9mKGRlcGVuZGVuY3kpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZihpZHggPj0gMCkgbW9kdWxlLmNoaWxkcmVuLnNwbGljZShpZHgsIDEpO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0fVxyXG4vKioqKioqLyBcdFx0fVxyXG4vKioqKioqLyBcdFxyXG4vKioqKioqLyBcdFx0Ly8gTm90IGluIFwiYXBwbHlcIiBwaGFzZVxyXG4vKioqKioqLyBcdFx0aG90U2V0U3RhdHVzKFwiYXBwbHlcIik7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHRob3RDdXJyZW50SGFzaCA9IGhvdFVwZGF0ZU5ld0hhc2g7XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHQvLyBpbnNlcnQgbmV3IGNvZGVcclxuLyoqKioqKi8gXHRcdGZvcihtb2R1bGVJZCBpbiBhcHBsaWVkVXBkYXRlKSB7XHJcbi8qKioqKiovIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhcHBsaWVkVXBkYXRlLCBtb2R1bGVJZCkpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IGFwcGxpZWRVcGRhdGVbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHQvLyBjYWxsIGFjY2VwdCBoYW5kbGVyc1xyXG4vKioqKioqLyBcdFx0dmFyIGVycm9yID0gbnVsbDtcclxuLyoqKioqKi8gXHRcdGZvcihtb2R1bGVJZCBpbiBvdXRkYXRlZERlcGVuZGVuY2llcykge1xyXG4vKioqKioqLyBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG1vZHVsZUlkKSkge1xyXG4vKioqKioqLyBcdFx0XHRcdG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4vKioqKioqLyBcdFx0XHRcdGlmKG1vZHVsZSkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0bW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdFx0XHR2YXIgY2FsbGJhY2tzID0gW107XHJcbi8qKioqKiovIFx0XHRcdFx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcy5sZW5ndGg7IGkrKykge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXNbaV07XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGNiID0gbW9kdWxlLmhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbZGVwZW5kZW5jeV07XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmKGNiKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0aWYoY2FsbGJhY2tzLmluZGV4T2YoY2IpID49IDApIGNvbnRpbnVlO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGNhbGxiYWNrcy5wdXNoKGNiKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0Zm9yKGkgPSAwOyBpIDwgY2FsbGJhY2tzLmxlbmd0aDsgaSsrKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGNiID0gY2FsbGJhY2tzW2ldO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHR0cnkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGNiKG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzKTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0fSBjYXRjaChlcnIpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRpZihvcHRpb25zLm9uRXJyb3JlZCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdFx0b3B0aW9ucy5vbkVycm9yZWQoe1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcImFjY2VwdC1lcnJvcmVkXCIsXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRcdFx0ZGVwZW5kZW5jeUlkOiBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llc1tpXSxcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRcdFx0ZXJyb3I6IGVyclxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdFx0fSk7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdGlmKCFvcHRpb25zLmlnbm9yZUVycm9yZWQpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRcdGlmKCFlcnJvcilcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRcdFx0ZXJyb3IgPSBlcnI7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHQvLyBMb2FkIHNlbGYgYWNjZXB0ZWQgbW9kdWxlc1xyXG4vKioqKioqLyBcdFx0Zm9yKGkgPSAwOyBpIDwgb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XHJcbi8qKioqKiovIFx0XHRcdHZhciBpdGVtID0gb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzW2ldO1xyXG4vKioqKioqLyBcdFx0XHRtb2R1bGVJZCA9IGl0ZW0ubW9kdWxlO1xyXG4vKioqKioqLyBcdFx0XHRob3RDdXJyZW50UGFyZW50cyA9IFttb2R1bGVJZF07XHJcbi8qKioqKiovIFx0XHRcdHRyeSB7XHJcbi8qKioqKiovIFx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCk7XHJcbi8qKioqKiovIFx0XHRcdH0gY2F0Y2goZXJyKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0aWYodHlwZW9mIGl0ZW0uZXJyb3JIYW5kbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdHRyeSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGl0ZW0uZXJyb3JIYW5kbGVyKGVycik7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR9IGNhdGNoKGVycjIpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0aWYob3B0aW9ucy5vbkVycm9yZWQpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRvcHRpb25zLm9uRXJyb3JlZCh7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0XHR0eXBlOiBcInNlbGYtYWNjZXB0LWVycm9yLWhhbmRsZXItZXJyb3JlZFwiLFxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdFx0ZXJyb3I6IGVycjIsXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0XHRvcmdpbmFsRXJyb3I6IGVyciwgLy8gVE9ETyByZW1vdmUgaW4gd2VicGFjayA0XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0XHRvcmlnaW5hbEVycm9yOiBlcnJcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHR9KTtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZighb3B0aW9ucy5pZ25vcmVFcnJvcmVkKSB7XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0aWYoIWVycm9yKVxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdFx0ZXJyb3IgPSBlcnIyO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdGlmKCFlcnJvcilcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRlcnJvciA9IGVycjtcclxuLyoqKioqKi8gXHRcdFx0XHRcdH1cclxuLyoqKioqKi8gXHRcdFx0XHR9IGVsc2Uge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYob3B0aW9ucy5vbkVycm9yZWQpIHtcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0b3B0aW9ucy5vbkVycm9yZWQoe1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdHR5cGU6IFwic2VsZi1hY2NlcHQtZXJyb3JlZFwiLFxyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcclxuLyoqKioqKi8gXHRcdFx0XHRcdFx0XHRlcnJvcjogZXJyXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdH0pO1xyXG4vKioqKioqLyBcdFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHRcdFx0aWYoIW9wdGlvbnMuaWdub3JlRXJyb3JlZCkge1xyXG4vKioqKioqLyBcdFx0XHRcdFx0XHRpZighZXJyb3IpXHJcbi8qKioqKiovIFx0XHRcdFx0XHRcdFx0ZXJyb3IgPSBlcnI7XHJcbi8qKioqKiovIFx0XHRcdFx0XHR9XHJcbi8qKioqKiovIFx0XHRcdFx0fVxyXG4vKioqKioqLyBcdFx0XHR9XHJcbi8qKioqKiovIFx0XHR9XHJcbi8qKioqKiovIFx0XHJcbi8qKioqKiovIFx0XHQvLyBoYW5kbGUgZXJyb3JzIGluIGFjY2VwdCBoYW5kbGVycyBhbmQgc2VsZiBhY2NlcHRlZCBtb2R1bGUgbG9hZFxyXG4vKioqKioqLyBcdFx0aWYoZXJyb3IpIHtcclxuLyoqKioqKi8gXHRcdFx0aG90U2V0U3RhdHVzKFwiZmFpbFwiKTtcclxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuLyoqKioqKi8gXHRcdH1cclxuLyoqKioqKi8gXHRcclxuLyoqKioqKi8gXHRcdGhvdFNldFN0YXR1cyhcImlkbGVcIik7XHJcbi8qKioqKiovIFx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xyXG4vKioqKioqLyBcdFx0XHRyZXNvbHZlKG91dGRhdGVkTW9kdWxlcyk7XHJcbi8qKioqKiovIFx0XHR9KTtcclxuLyoqKioqKi8gXHR9XHJcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGhvdDogaG90Q3JlYXRlTW9kdWxlKG1vZHVsZUlkKSxcbi8qKioqKiovIFx0XHRcdHBhcmVudHM6IChob3RDdXJyZW50UGFyZW50c1RlbXAgPSBob3RDdXJyZW50UGFyZW50cywgaG90Q3VycmVudFBhcmVudHMgPSBbXSwgaG90Q3VycmVudFBhcmVudHNUZW1wKSxcbi8qKioqKiovIFx0XHRcdGNoaWxkcmVuOiBbXVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIGhvdENyZWF0ZVJlcXVpcmUobW9kdWxlSWQpKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuLyoqKioqKi8gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuLyoqKioqKi8gXHRcdFx0XHRnZXQ6IGdldHRlclxuLyoqKioqKi8gXHRcdFx0fSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4vKioqKioqLyBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4vKioqKioqLyBcdFx0cmV0dXJuIGdldHRlcjtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX2hhc2hfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSBmdW5jdGlvbigpIHsgcmV0dXJuIGhvdEN1cnJlbnRIYXNoOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBob3RDcmVhdGVSZXF1aXJlKDcpKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDcpO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgYmluZCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG52YXIgaXNCdWZmZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblxuLypnbG9iYWwgdG9TdHJpbmc6dHJ1ZSovXG5cbi8vIHV0aWxzIGlzIGEgbGlicmFyeSBvZiBnZW5lcmljIGhlbHBlciBmdW5jdGlvbnMgbm9uLXNwZWNpZmljIHRvIGF4aW9zXG5cbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gQXJyYXlcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXkodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlCdWZmZXIodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGb3JtRGF0YVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEZvcm1EYXRhLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGb3JtRGF0YSh2YWwpIHtcbiAgcmV0dXJuICh0eXBlb2YgRm9ybURhdGEgIT09ICd1bmRlZmluZWQnKSAmJiAodmFsIGluc3RhbmNlb2YgRm9ybURhdGEpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlCdWZmZXJWaWV3KHZhbCkge1xuICB2YXIgcmVzdWx0O1xuICBpZiAoKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpICYmIChBcnJheUJ1ZmZlci5pc1ZpZXcpKSB7XG4gICAgcmVzdWx0ID0gQXJyYXlCdWZmZXIuaXNWaWV3KHZhbCk7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gKHZhbCkgJiYgKHZhbC5idWZmZXIpICYmICh2YWwuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJpbmdcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmluZywgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3RyaW5nKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZyc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBOdW1iZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIE51bWJlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTnVtYmVyKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcic7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgdW5kZWZpbmVkXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHZhbHVlIGlzIHVuZGVmaW5lZCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gT2JqZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gT2JqZWN0LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IG51bGwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBEYXRlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBEYXRlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNEYXRlKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBEYXRlXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGaWxlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGaWxlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGaWxlKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGaWxlXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBCbG9iXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBCbG9iLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNCbG9iKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBCbG9iXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGdW5jdGlvblxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRnVuY3Rpb24sIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyZWFtXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJlYW0sIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N0cmVhbSh2YWwpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KHZhbCkgJiYgaXNGdW5jdGlvbih2YWwucGlwZSk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBVUkxTZWFyY2hQYXJhbXMgb2JqZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBVUkxTZWFyY2hQYXJhbXMgb2JqZWN0LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNVUkxTZWFyY2hQYXJhbXModmFsKSB7XG4gIHJldHVybiB0eXBlb2YgVVJMU2VhcmNoUGFyYW1zICE9PSAndW5kZWZpbmVkJyAmJiB2YWwgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXM7XG59XG5cbi8qKlxuICogVHJpbSBleGNlc3Mgd2hpdGVzcGFjZSBvZmYgdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIGEgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgU3RyaW5nIHRvIHRyaW1cbiAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBTdHJpbmcgZnJlZWQgb2YgZXhjZXNzIHdoaXRlc3BhY2VcbiAqL1xuZnVuY3Rpb24gdHJpbShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzKi8sICcnKS5yZXBsYWNlKC9cXHMqJC8sICcnKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgd2UncmUgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnRcbiAqXG4gKiBUaGlzIGFsbG93cyBheGlvcyB0byBydW4gaW4gYSB3ZWIgd29ya2VyLCBhbmQgcmVhY3QtbmF0aXZlLlxuICogQm90aCBlbnZpcm9ubWVudHMgc3VwcG9ydCBYTUxIdHRwUmVxdWVzdCwgYnV0IG5vdCBmdWxseSBzdGFuZGFyZCBnbG9iYWxzLlxuICpcbiAqIHdlYiB3b3JrZXJzOlxuICogIHR5cGVvZiB3aW5kb3cgLT4gdW5kZWZpbmVkXG4gKiAgdHlwZW9mIGRvY3VtZW50IC0+IHVuZGVmaW5lZFxuICpcbiAqIHJlYWN0LW5hdGl2ZTpcbiAqICBuYXZpZ2F0b3IucHJvZHVjdCAtPiAnUmVhY3ROYXRpdmUnXG4gKi9cbmZ1bmN0aW9uIGlzU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnByb2R1Y3QgPT09ICdSZWFjdE5hdGl2ZScpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIChcbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCdcbiAgKTtcbn1cblxuLyoqXG4gKiBJdGVyYXRlIG92ZXIgYW4gQXJyYXkgb3IgYW4gT2JqZWN0IGludm9raW5nIGEgZnVuY3Rpb24gZm9yIGVhY2ggaXRlbS5cbiAqXG4gKiBJZiBgb2JqYCBpcyBhbiBBcnJheSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGluZGV4LCBhbmQgY29tcGxldGUgYXJyYXkgZm9yIGVhY2ggaXRlbS5cbiAqXG4gKiBJZiAnb2JqJyBpcyBhbiBPYmplY3QgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZ1xuICogdGhlIHZhbHVlLCBrZXksIGFuZCBjb21wbGV0ZSBvYmplY3QgZm9yIGVhY2ggcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IG9iaiBUaGUgb2JqZWN0IHRvIGl0ZXJhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBjYWxsYmFjayB0byBpbnZva2UgZm9yIGVhY2ggaXRlbVxuICovXG5mdW5jdGlvbiBmb3JFYWNoKG9iaiwgZm4pIHtcbiAgLy8gRG9uJ3QgYm90aGVyIGlmIG5vIHZhbHVlIHByb3ZpZGVkXG4gIGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBGb3JjZSBhbiBhcnJheSBpZiBub3QgYWxyZWFkeSBzb21ldGhpbmcgaXRlcmFibGVcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG4gICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gICAgb2JqID0gW29ial07XG4gIH1cblxuICBpZiAoaXNBcnJheShvYmopKSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIGFycmF5IHZhbHVlc1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZm4uY2FsbChudWxsLCBvYmpbaV0sIGksIG9iaik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIEl0ZXJhdGUgb3ZlciBvYmplY3Qga2V5c1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2tleV0sIGtleSwgb2JqKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBY2NlcHRzIHZhcmFyZ3MgZXhwZWN0aW5nIGVhY2ggYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0LCB0aGVuXG4gKiBpbW11dGFibHkgbWVyZ2VzIHRoZSBwcm9wZXJ0aWVzIG9mIGVhY2ggb2JqZWN0IGFuZCByZXR1cm5zIHJlc3VsdC5cbiAqXG4gKiBXaGVuIG11bHRpcGxlIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBrZXkgdGhlIGxhdGVyIG9iamVjdCBpblxuICogdGhlIGFyZ3VtZW50cyBsaXN0IHdpbGwgdGFrZSBwcmVjZWRlbmNlLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqIHZhciByZXN1bHQgPSBtZXJnZSh7Zm9vOiAxMjN9LCB7Zm9vOiA0NTZ9KTtcbiAqIGNvbnNvbGUubG9nKHJlc3VsdC5mb28pOyAvLyBvdXRwdXRzIDQ1NlxuICogYGBgXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iajEgT2JqZWN0IHRvIG1lcmdlXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXN1bHQgb2YgYWxsIG1lcmdlIHByb3BlcnRpZXNcbiAqL1xuZnVuY3Rpb24gbWVyZ2UoLyogb2JqMSwgb2JqMiwgb2JqMywgLi4uICovKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcbiAgICBpZiAodHlwZW9mIHJlc3VsdFtrZXldID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuICAgICAgcmVzdWx0W2tleV0gPSBtZXJnZShyZXN1bHRba2V5XSwgdmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0W2tleV0gPSB2YWw7XG4gICAgfVxuICB9XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZm9yRWFjaChhcmd1bWVudHNbaV0sIGFzc2lnblZhbHVlKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEV4dGVuZHMgb2JqZWN0IGEgYnkgbXV0YWJseSBhZGRpbmcgdG8gaXQgdGhlIHByb3BlcnRpZXMgb2Ygb2JqZWN0IGIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGEgVGhlIG9iamVjdCB0byBiZSBleHRlbmRlZFxuICogQHBhcmFtIHtPYmplY3R9IGIgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbVxuICogQHBhcmFtIHtPYmplY3R9IHRoaXNBcmcgVGhlIG9iamVjdCB0byBiaW5kIGZ1bmN0aW9uIHRvXG4gKiBAcmV0dXJuIHtPYmplY3R9IFRoZSByZXN1bHRpbmcgdmFsdWUgb2Ygb2JqZWN0IGFcbiAqL1xuZnVuY3Rpb24gZXh0ZW5kKGEsIGIsIHRoaXNBcmcpIHtcbiAgZm9yRWFjaChiLCBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmICh0aGlzQXJnICYmIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGFba2V5XSA9IGJpbmQodmFsLCB0aGlzQXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYVtrZXldID0gdmFsO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBhO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaXNBcnJheTogaXNBcnJheSxcbiAgaXNBcnJheUJ1ZmZlcjogaXNBcnJheUJ1ZmZlcixcbiAgaXNCdWZmZXI6IGlzQnVmZmVyLFxuICBpc0Zvcm1EYXRhOiBpc0Zvcm1EYXRhLFxuICBpc0FycmF5QnVmZmVyVmlldzogaXNBcnJheUJ1ZmZlclZpZXcsXG4gIGlzU3RyaW5nOiBpc1N0cmluZyxcbiAgaXNOdW1iZXI6IGlzTnVtYmVyLFxuICBpc09iamVjdDogaXNPYmplY3QsXG4gIGlzVW5kZWZpbmVkOiBpc1VuZGVmaW5lZCxcbiAgaXNEYXRlOiBpc0RhdGUsXG4gIGlzRmlsZTogaXNGaWxlLFxuICBpc0Jsb2I6IGlzQmxvYixcbiAgaXNGdW5jdGlvbjogaXNGdW5jdGlvbixcbiAgaXNTdHJlYW06IGlzU3RyZWFtLFxuICBpc1VSTFNlYXJjaFBhcmFtczogaXNVUkxTZWFyY2hQYXJhbXMsXG4gIGlzU3RhbmRhcmRCcm93c2VyRW52OiBpc1N0YW5kYXJkQnJvd3NlckVudixcbiAgZm9yRWFjaDogZm9yRWFjaCxcbiAgbWVyZ2U6IG1lcmdlLFxuICBleHRlbmQ6IGV4dGVuZCxcbiAgdHJpbTogdHJpbVxufTtcblxuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykge1xuXG52YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xudmFyIG5vcm1hbGl6ZUhlYWRlck5hbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblxudmFyIERFRkFVTFRfQ09OVEVOVF9UWVBFID0ge1xuICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcbn07XG5cbmZ1bmN0aW9uIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCB2YWx1ZSkge1xuICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnMpICYmIHV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddKSkge1xuICAgIGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gdmFsdWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RGVmYXVsdEFkYXB0ZXIoKSB7XG4gIHZhciBhZGFwdGVyO1xuICBpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIEZvciBicm93c2VycyB1c2UgWEhSIGFkYXB0ZXJcbiAgICBhZGFwdGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBGb3Igbm9kZSB1c2UgSFRUUCBhZGFwdGVyXG4gICAgYWRhcHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG4gIH1cbiAgcmV0dXJuIGFkYXB0ZXI7XG59XG5cbnZhciBkZWZhdWx0cyA9IHtcbiAgYWRhcHRlcjogZ2V0RGVmYXVsdEFkYXB0ZXIoKSxcblxuICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVxdWVzdChkYXRhLCBoZWFkZXJzKSB7XG4gICAgbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCAnQ29udGVudC1UeXBlJyk7XG4gICAgaWYgKHV0aWxzLmlzRm9ybURhdGEoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQXJyYXlCdWZmZXIoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc1N0cmVhbShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNGaWxlKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0Jsb2IoZGF0YSlcbiAgICApIHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNBcnJheUJ1ZmZlclZpZXcoZGF0YSkpIHtcbiAgICAgIHJldHVybiBkYXRhLmJ1ZmZlcjtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGRhdGEpKSB7XG4gICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04Jyk7XG4gICAgICByZXR1cm4gZGF0YS50b1N0cmluZygpO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNPYmplY3QoZGF0YSkpIHtcbiAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04Jyk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICB0cmFuc2Zvcm1SZXNwb25zZTogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKGRhdGEpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0cnkge1xuICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHsgLyogSWdub3JlICovIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1dLFxuXG4gIHRpbWVvdXQ6IDAsXG5cbiAgeHNyZkNvb2tpZU5hbWU6ICdYU1JGLVRPS0VOJyxcbiAgeHNyZkhlYWRlck5hbWU6ICdYLVhTUkYtVE9LRU4nLFxuXG4gIG1heENvbnRlbnRMZW5ndGg6IC0xLFxuXG4gIHZhbGlkYXRlU3RhdHVzOiBmdW5jdGlvbiB2YWxpZGF0ZVN0YXR1cyhzdGF0dXMpIHtcbiAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDA7XG4gIH1cbn07XG5cbmRlZmF1bHRzLmhlYWRlcnMgPSB7XG4gIGNvbW1vbjoge1xuICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJ1xuICB9XG59O1xuXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHt9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHV0aWxzLm1lcmdlKERFRkFVTFRfQ09OVEVOVF9UWVBFKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlZmF1bHRzO1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxMikpKVxuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBiaW5kKGZuLCB0aGlzQXJnKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwKCkge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICB9O1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbnZhciBzZXR0bGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcbnZhciBidWlsZFVSTCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xudmFyIHBhcnNlSGVhZGVycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xudmFyIGlzVVJMU2FtZU9yaWdpbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xudmFyIGNyZWF0ZUVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcbnZhciBidG9hID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5idG9hICYmIHdpbmRvdy5idG9hLmJpbmQod2luZG93KSkgfHwgX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24geGhyQWRhcHRlcihjb25maWcpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGRpc3BhdGNoWGhyUmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcmVxdWVzdERhdGEgPSBjb25maWcuZGF0YTtcbiAgICB2YXIgcmVxdWVzdEhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcblxuICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKHJlcXVlc3REYXRhKSkge1xuICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzWydDb250ZW50LVR5cGUnXTsgLy8gTGV0IHRoZSBicm93c2VyIHNldCBpdFxuICAgIH1cblxuICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgdmFyIGxvYWRFdmVudCA9ICdvbnJlYWR5c3RhdGVjaGFuZ2UnO1xuICAgIHZhciB4RG9tYWluID0gZmFsc2U7XG5cbiAgICAvLyBGb3IgSUUgOC85IENPUlMgc3VwcG9ydFxuICAgIC8vIE9ubHkgc3VwcG9ydHMgUE9TVCBhbmQgR0VUIGNhbGxzIGFuZCBkb2Vzbid0IHJldHVybnMgdGhlIHJlc3BvbnNlIGhlYWRlcnMuXG4gICAgLy8gRE9OJ1QgZG8gdGhpcyBmb3IgdGVzdGluZyBiL2MgWE1MSHR0cFJlcXVlc3QgaXMgbW9ja2VkLCBub3QgWERvbWFpblJlcXVlc3QuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAndGVzdCcgJiZcbiAgICAgICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgd2luZG93LlhEb21haW5SZXF1ZXN0ICYmICEoJ3dpdGhDcmVkZW50aWFscycgaW4gcmVxdWVzdCkgJiZcbiAgICAgICAgIWlzVVJMU2FtZU9yaWdpbihjb25maWcudXJsKSkge1xuICAgICAgcmVxdWVzdCA9IG5ldyB3aW5kb3cuWERvbWFpblJlcXVlc3QoKTtcbiAgICAgIGxvYWRFdmVudCA9ICdvbmxvYWQnO1xuICAgICAgeERvbWFpbiA9IHRydWU7XG4gICAgICByZXF1ZXN0Lm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiBoYW5kbGVQcm9ncmVzcygpIHt9O1xuICAgICAgcmVxdWVzdC5vbnRpbWVvdXQgPSBmdW5jdGlvbiBoYW5kbGVUaW1lb3V0KCkge307XG4gICAgfVxuXG4gICAgLy8gSFRUUCBiYXNpYyBhdXRoZW50aWNhdGlvblxuICAgIGlmIChjb25maWcuYXV0aCkge1xuICAgICAgdmFyIHVzZXJuYW1lID0gY29uZmlnLmF1dGgudXNlcm5hbWUgfHwgJyc7XG4gICAgICB2YXIgcGFzc3dvcmQgPSBjb25maWcuYXV0aC5wYXNzd29yZCB8fCAnJztcbiAgICAgIHJlcXVlc3RIZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmFzaWMgJyArIGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZCk7XG4gICAgfVxuXG4gICAgcmVxdWVzdC5vcGVuKGNvbmZpZy5tZXRob2QudG9VcHBlckNhc2UoKSwgYnVpbGRVUkwoY29uZmlnLnVybCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpLCB0cnVlKTtcblxuICAgIC8vIFNldCB0aGUgcmVxdWVzdCB0aW1lb3V0IGluIE1TXG4gICAgcmVxdWVzdC50aW1lb3V0ID0gY29uZmlnLnRpbWVvdXQ7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIHJlYWR5IHN0YXRlXG4gICAgcmVxdWVzdFtsb2FkRXZlbnRdID0gZnVuY3Rpb24gaGFuZGxlTG9hZCgpIHtcbiAgICAgIGlmICghcmVxdWVzdCB8fCAocmVxdWVzdC5yZWFkeVN0YXRlICE9PSA0ICYmICF4RG9tYWluKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSByZXF1ZXN0IGVycm9yZWQgb3V0IGFuZCB3ZSBkaWRuJ3QgZ2V0IGEgcmVzcG9uc2UsIHRoaXMgd2lsbCBiZVxuICAgICAgLy8gaGFuZGxlZCBieSBvbmVycm9yIGluc3RlYWRcbiAgICAgIC8vIFdpdGggb25lIGV4Y2VwdGlvbjogcmVxdWVzdCB0aGF0IHVzaW5nIGZpbGU6IHByb3RvY29sLCBtb3N0IGJyb3dzZXJzXG4gICAgICAvLyB3aWxsIHJldHVybiBzdGF0dXMgYXMgMCBldmVuIHRob3VnaCBpdCdzIGEgc3VjY2Vzc2Z1bCByZXF1ZXN0XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDAgJiYgIShyZXF1ZXN0LnJlc3BvbnNlVVJMICYmIHJlcXVlc3QucmVzcG9uc2VVUkwuaW5kZXhPZignZmlsZTonKSA9PT0gMCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBQcmVwYXJlIHRoZSByZXNwb25zZVxuICAgICAgdmFyIHJlc3BvbnNlSGVhZGVycyA9ICdnZXRBbGxSZXNwb25zZUhlYWRlcnMnIGluIHJlcXVlc3QgPyBwYXJzZUhlYWRlcnMocmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkgOiBudWxsO1xuICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9ICFjb25maWcucmVzcG9uc2VUeXBlIHx8IGNvbmZpZy5yZXNwb25zZVR5cGUgPT09ICd0ZXh0JyA/IHJlcXVlc3QucmVzcG9uc2VUZXh0IDogcmVxdWVzdC5yZXNwb25zZTtcbiAgICAgIHZhciByZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YTogcmVzcG9uc2VEYXRhLFxuICAgICAgICAvLyBJRSBzZW5kcyAxMjIzIGluc3RlYWQgb2YgMjA0IChodHRwczovL2dpdGh1Yi5jb20vYXhpb3MvYXhpb3MvaXNzdWVzLzIwMSlcbiAgICAgICAgc3RhdHVzOiByZXF1ZXN0LnN0YXR1cyA9PT0gMTIyMyA/IDIwNCA6IHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiByZXF1ZXN0LnN0YXR1cyA9PT0gMTIyMyA/ICdObyBDb250ZW50JyA6IHJlcXVlc3Quc3RhdHVzVGV4dCxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgICAgcmVxdWVzdDogcmVxdWVzdFxuICAgICAgfTtcblxuICAgICAgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIGxvdyBsZXZlbCBuZXR3b3JrIGVycm9yc1xuICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkge1xuICAgICAgLy8gUmVhbCBlcnJvcnMgYXJlIGhpZGRlbiBmcm9tIHVzIGJ5IHRoZSBicm93c2VyXG4gICAgICAvLyBvbmVycm9yIHNob3VsZCBvbmx5IGZpcmUgaWYgaXQncyBhIG5ldHdvcmsgZXJyb3JcbiAgICAgIHJlamVjdChjcmVhdGVFcnJvcignTmV0d29yayBFcnJvcicsIGNvbmZpZywgbnVsbCwgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIHRpbWVvdXRcbiAgICByZXF1ZXN0Lm9udGltZW91dCA9IGZ1bmN0aW9uIGhhbmRsZVRpbWVvdXQoKSB7XG4gICAgICByZWplY3QoY3JlYXRlRXJyb3IoJ3RpbWVvdXQgb2YgJyArIGNvbmZpZy50aW1lb3V0ICsgJ21zIGV4Y2VlZGVkJywgY29uZmlnLCAnRUNPTk5BQk9SVEVEJyxcbiAgICAgICAgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgLy8gVGhpcyBpcyBvbmx5IGRvbmUgaWYgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnQuXG4gICAgLy8gU3BlY2lmaWNhbGx5IG5vdCBpZiB3ZSdyZSBpbiBhIHdlYiB3b3JrZXIsIG9yIHJlYWN0LW5hdGl2ZS5cbiAgICBpZiAodXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSkge1xuICAgICAgdmFyIGNvb2tpZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblxuICAgICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgICB2YXIgeHNyZlZhbHVlID0gKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMgfHwgaXNVUkxTYW1lT3JpZ2luKGNvbmZpZy51cmwpKSAmJiBjb25maWcueHNyZkNvb2tpZU5hbWUgP1xuICAgICAgICAgIGNvb2tpZXMucmVhZChjb25maWcueHNyZkNvb2tpZU5hbWUpIDpcbiAgICAgICAgICB1bmRlZmluZWQ7XG5cbiAgICAgIGlmICh4c3JmVmFsdWUpIHtcbiAgICAgICAgcmVxdWVzdEhlYWRlcnNbY29uZmlnLnhzcmZIZWFkZXJOYW1lXSA9IHhzcmZWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgaGVhZGVycyB0byB0aGUgcmVxdWVzdFxuICAgIGlmICgnc2V0UmVxdWVzdEhlYWRlcicgaW4gcmVxdWVzdCkge1xuICAgICAgdXRpbHMuZm9yRWFjaChyZXF1ZXN0SGVhZGVycywgZnVuY3Rpb24gc2V0UmVxdWVzdEhlYWRlcih2YWwsIGtleSkge1xuICAgICAgICBpZiAodHlwZW9mIHJlcXVlc3REYXRhID09PSAndW5kZWZpbmVkJyAmJiBrZXkudG9Mb3dlckNhc2UoKSA9PT0gJ2NvbnRlbnQtdHlwZScpIHtcbiAgICAgICAgICAvLyBSZW1vdmUgQ29udGVudC1UeXBlIGlmIGRhdGEgaXMgdW5kZWZpbmVkXG4gICAgICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzW2tleV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gT3RoZXJ3aXNlIGFkZCBoZWFkZXIgdG8gdGhlIHJlcXVlc3RcbiAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoa2V5LCB2YWwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBZGQgd2l0aENyZWRlbnRpYWxzIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG4gICAgaWYgKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMpIHtcbiAgICAgIHJlcXVlc3Qud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBBZGQgcmVzcG9uc2VUeXBlIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG4gICAgaWYgKGNvbmZpZy5yZXNwb25zZVR5cGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gY29uZmlnLnJlc3BvbnNlVHlwZTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gRXhwZWN0ZWQgRE9NRXhjZXB0aW9uIHRocm93biBieSBicm93c2VycyBub3QgY29tcGF0aWJsZSBYTUxIdHRwUmVxdWVzdCBMZXZlbCAyLlxuICAgICAgICAvLyBCdXQsIHRoaXMgY2FuIGJlIHN1cHByZXNzZWQgZm9yICdqc29uJyB0eXBlIGFzIGl0IGNhbiBiZSBwYXJzZWQgYnkgZGVmYXVsdCAndHJhbnNmb3JtUmVzcG9uc2UnIGZ1bmN0aW9uLlxuICAgICAgICBpZiAoY29uZmlnLnJlc3BvbnNlVHlwZSAhPT0gJ2pzb24nKSB7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBwcm9ncmVzcyBpZiBuZWVkZWRcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBjb25maWcub25Eb3dubG9hZFByb2dyZXNzKTtcbiAgICB9XG5cbiAgICAvLyBOb3QgYWxsIGJyb3dzZXJzIHN1cHBvcnQgdXBsb2FkIGV2ZW50c1xuICAgIGlmICh0eXBlb2YgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicgJiYgcmVxdWVzdC51cGxvYWQpIHtcbiAgICAgIHJlcXVlc3QudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MpO1xuICAgIH1cblxuICAgIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHtcbiAgICAgIC8vIEhhbmRsZSBjYW5jZWxsYXRpb25cbiAgICAgIGNvbmZpZy5jYW5jZWxUb2tlbi5wcm9taXNlLnRoZW4oZnVuY3Rpb24gb25DYW5jZWxlZChjYW5jZWwpIHtcbiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICByZWplY3QoY2FuY2VsKTtcbiAgICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0RGF0YSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXF1ZXN0RGF0YSA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gU2VuZCB0aGUgcmVxdWVzdFxuICAgIHJlcXVlc3Quc2VuZChyZXF1ZXN0RGF0YSk7XG4gIH0pO1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIGVuaGFuY2VFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgbWVzc2FnZSwgY29uZmlnLCBlcnJvciBjb2RlLCByZXF1ZXN0IGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgY3JlYXRlZCBlcnJvci5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGVFcnJvcihtZXNzYWdlLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIHZhciBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgcmV0dXJuIGVuaGFuY2VFcnJvcihlcnJvciwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSk7XG59O1xuXG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQ2FuY2VsKHZhbHVlKSB7XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZS5fX0NBTkNFTF9fKTtcbn07XG5cblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbi8qKlxuICogQSBgQ2FuY2VsYCBpcyBhbiBvYmplY3QgdGhhdCBpcyB0aHJvd24gd2hlbiBhbiBvcGVyYXRpb24gaXMgY2FuY2VsZWQuXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge3N0cmluZz19IG1lc3NhZ2UgVGhlIG1lc3NhZ2UuXG4gKi9cbmZ1bmN0aW9uIENhbmNlbChtZXNzYWdlKSB7XG4gIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG59XG5cbkNhbmNlbC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgcmV0dXJuICdDYW5jZWwnICsgKHRoaXMubWVzc2FnZSA/ICc6ICcgKyB0aGlzLm1lc3NhZ2UgOiAnJyk7XG59O1xuXG5DYW5jZWwucHJvdG90eXBlLl9fQ0FOQ0VMX18gPSB0cnVlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbDtcblxuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IHlbb3BbMF0gJiAyID8gXCJyZXR1cm5cIiA6IG9wWzBdID8gXCJ0aHJvd1wiIDogXCJuZXh0XCJdKSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbMCwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGF4aW9zXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xudmFyIEtSVyA9IHsgbmFtZTogXCJrcndcIiB9O1xudmFyIFVTRCA9IHsgbmFtZTogXCJ1c2RcIiB9O1xudmFyIEpQWSA9IHsgbmFtZTogXCJqcHlcIiB9O1xudmFyIENVUlJFTkNJRVMgPSBbS1JXLCBVU0QsIEpQWV07XG52YXIgQklURklORVggPSB7IG5hbWU6IFwiYml0ZmluZXhcIiwgY3VycmVuY3k6IFVTRCwgdXJsOiAnaHR0cHM6Ly93d3cuYml0ZmluZXguY29tJywgZGlzcGxheU5hbWU6ICdCSVRGSU5FWCcgfTtcbnZhciBCSVRIVU1CID0geyBuYW1lOiBcImJpdGh1bWJcIiwgY3VycmVuY3k6IEtSVywgdXJsOiAnaHR0cHM6Ly93d3cuYml0aHVtYi5jb20nLCBkaXNwbGF5TmFtZTogJ+u5l+yNuCcgfTtcbnZhciBDT0lOT05FID0geyBuYW1lOiBcImNvaW5vbmVcIiwgY3VycmVuY3k6IEtSVywgdXJsOiAnaHR0cHM6Ly93d3cuY29pbm9uZS5jby5rcicsIGRpc3BsYXlOYW1lOiAn7L2U7J247JuQJyB9O1xudmFyIFVQQklUID0geyBuYW1lOiBcInVwYml0XCIsIGN1cnJlbmN5OiBLUlcsIHVybDogJ2h0dHBzOi8vdXBiaXQuY29tJywgZGlzcGxheU5hbWU6ICfsl4XruYTtirgnIH07XG52YXIgQklOQU5DRSA9IHsgbmFtZTogXCJiaW5hbmNlXCIsIGN1cnJlbmN5OiBVU0QsIHVybDogJ2h0dHBzOi8vd3d3LmJpbmFuY2UuY29tJywgZGlzcGxheU5hbWU6ICdCSU5BTkNFJyB9O1xudmFyIEVYQ0hBTkdFUyA9IFtCSVRGSU5FWCwgQklOQU5DRSwgQklUSFVNQiwgQ09JTk9ORSwgVVBCSVRdO1xudmFyIEJUQyA9IHsgbmFtZTogXCJidGNcIiB9O1xudmFyIEVUSCA9IHsgbmFtZTogXCJldGhcIiB9O1xudmFyIFhSUCA9IHsgbmFtZTogXCJ4cnBcIiB9O1xudmFyIExUQyA9IHsgbmFtZTogXCJsdGNcIiB9O1xudmFyIFFUVU0gPSB7IG5hbWU6IFwicXR1bVwiIH07XG52YXIgREFTSCA9IHsgbmFtZTogXCJkYXNoXCIgfTtcbnZhciBFVEMgPSB7IG5hbWU6IFwiZXRjXCIgfTtcbnZhciBCQ0ggPSB7IG5hbWU6IFwiYmNoXCIgfTtcbnZhciBYTVIgPSB7IG5hbWU6IFwieG1yXCIgfTtcbnZhciBaRUMgPSB7IG5hbWU6IFwiemVjXCIgfTtcbnZhciBCVEcgPSB7IG5hbWU6IFwiYnRnXCIgfTtcbnZhciBFT1MgPSB7IG5hbWU6IFwiZW9zXCIgfTtcbnZhciBJT1RBID0geyBuYW1lOiBcImlvdGFcIiB9O1xudmFyIFNOVCA9IHsgbmFtZTogXCJzbnRcIiB9O1xudmFyIE5FTyA9IHsgbmFtZTogXCJuZW9cIiB9O1xudmFyIEFEQSA9IHsgbmFtZTogXCJhZGFcIiB9O1xudmFyIFhMTSA9IHsgbmFtZTogXCJ4bG1cIiB9O1xudmFyIFhFTSA9IHsgbmFtZTogJ3hlbScgfTtcbnZhciBTVEVFTSA9IHsgbmFtZTogJ3N0ZWVtJyB9O1xudmFyIE1FUiA9IHsgbmFtZTogJ21lcicgfTtcbnZhciBTVFJBVCA9IHsgbmFtZTogJ3N0cmF0JyB9O1xudmFyIFNCRCA9IHsgbmFtZTogJ3NiZCcgfTtcbnZhciBPTUcgPSB7IG5hbWU6ICdvbWcnIH07XG52YXIgTFNLID0geyBuYW1lOiAnbHNrJyB9O1xudmFyIFRJWCA9IHsgbmFtZTogJ3RpeCcgfTtcbnZhciBFTUMyID0geyBuYW1lOiAnZW1jMicgfTtcbnZhciBBUkRSID0geyBuYW1lOiAnYXJkcicgfTtcbnZhciBQSVZYID0geyBuYW1lOiAncGl2eCcgfTtcbnZhciBQT1dSID0geyBuYW1lOiAncG93cicgfTtcbnZhciBNVEwgPSB7IG5hbWU6ICdtdGwnIH07XG52YXIgR1JTID0geyBuYW1lOiAnZ3JzJyB9O1xudmFyIFNUT1JKID0geyBuYW1lOiAnc3RvcmonIH07XG52YXIgQVJLID0geyBuYW1lOiAnYXJrJyB9O1xudmFyIFJFUCA9IHsgbmFtZTogJ3JlcCcgfTtcbnZhciBLTUQgPSB7IG5hbWU6ICdrbWQnIH07XG52YXIgV0FWRVMgPSB7IG5hbWU6ICd3YXZlcycgfTtcbnZhciBWVEMgPSB7IG5hbWU6ICd2dGMnIH07XG52YXIgQ09JTlMgPSBbQlRDLCBFVEgsIFhSUCwgTFRDLCBRVFVNLCBEQVNILCBFVEMsIEJDSCwgWE1SLCBaRUMsIEJURywgRU9TLCBJT1RBLCBTTlQsIE5FTywgT01HLCBSRVAsIEFEQSwgWExNLCBYRU0sIFNURUVNLCBNRVIsIFNUUkFULCBTQkQsIExTSywgVElYLCBFTUMyLCBBUkRSLCBQSVZYLCBQT1dSLCBNVEwsIEdSUywgU1RPUkosIEFSSywgS01ELCBXQVZFUywgVlRDXTtcbnZhciBVUEJJVF9DT0lOUyA9IFtBREEsIFhMTSwgWEVNLCBTVEVFTSwgTUVSLCBTVFJBVCwgU0JELCBMU0ssIFRJWCwgRU1DMiwgQVJEUiwgUElWWCwgUE9XUiwgTVRMLCBHUlMsIFNUT1JKLCBBUkssIEtNRCwgV0FWRVMsIFZUQ107XG5mdW5jdGlvbiBmb3JFYWNoKGxpc3QsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGxpc3QuZm9yRWFjaCkge1xuICAgICAgICBsaXN0LmZvckVhY2goY2FsbGJhY2spO1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheSAmJiBBcnJheS5mcm9tKSB7XG4gICAgICAgIEFycmF5LmZyb20obGlzdCkuZm9yRWFjaChjYWxsYmFjayk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgYXJyYXkgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcnJheS5wdXNoKGxpc3RbaV0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcnJheS5mb3JFYWNoKSB7XG4gICAgICAgICAgICBhcnJheS5mb3JFYWNoKGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhhcnJheVtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBmaW5kKGxpc3QsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGxpc3QuZmluZCkge1xuICAgICAgICByZXR1cm4gbGlzdC5maW5kKGNhbGxiYWNrKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobGlzdC5maWx0ZXIpIHtcbiAgICAgICAgcmV0dXJuIGxpc3QuZmlsdGVyKGNhbGxiYWNrKVswXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciBhcnJheSA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFycmF5LnB1c2gobGlzdFtpXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFycmF5LmZpbmQpIHtcbiAgICAgICAgICAgIHJldHVybiBhcnJheS5maW5kKGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2soYXJyYXlbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJheVtpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiByZWFkeShmbikge1xuICAgIGlmIChkb2N1bWVudC5hdHRhY2hFdmVudCA/IGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwiY29tcGxldGVcIiA6IGRvY3VtZW50LnJlYWR5U3RhdGUgIT09IFwibG9hZGluZ1wiKSB7XG4gICAgICAgIGZuKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmbik7XG4gICAgfVxufVxuZnVuY3Rpb24gbWFpbigpIHtcbiAgICB2YXIgcmF0ZSA9ICd0cmFuc2xhdGUnO1xuICAgIHZhciB0aW1lID0gMTA7XG4gICAgdmFyIHByaWNlRGF0YSA9IFtdO1xuICAgIHZhciByZWZyZXNoVGltZSA9IDYwO1xuICAgIHZhciBsb2FkZWQgPSBmYWxzZTtcbiAgICB2YXIgY3VycmVuY3lSYXRlID0gMDtcbiAgICBmdW5jdGlvbiBzZXRSYXRlKG5ld1JhdGUpIHtcbiAgICAgICAgc3dpdGNoIChuZXdSYXRlKSB7XG4gICAgICAgICAgICBjYXNlICdnaW1wJzpcbiAgICAgICAgICAgIGNhc2UgJ3RyYW5zbGF0ZSc6XG4gICAgICAgICAgICAgICAgcmF0ZSA9IG5ld1JhdGU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdjaGFuZ2UnOlxuICAgICAgICAgICAgICAgIHJhdGUgPSAndHJhbnNsYXRlJztcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRSYXRlKCkge1xuICAgICAgICByZXR1cm4gcmF0ZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0Q3VycmVuY3lSYXRlKHJhdGUpIHtcbiAgICAgICAgY3VycmVuY3lSYXRlID0gcmF0ZTtcbiAgICAgICAgdmFyIGN1cnJlbmN5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmN1cnJlbmN5Jyk7XG4gICAgICAgIGlmIChjdXJyZW5jeSAhPSBudWxsKSB7XG4gICAgICAgICAgICBjdXJyZW5jeS5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29udGVudCcsIGZvcm1hdFByaWNlKHJhdGUsIEtSVy5uYW1lKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Q3VycmVuY3lSYXRlKCkge1xuICAgICAgICByZXR1cm4gY3VycmVuY3lSYXRlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRUaW1lKG5ld1RpbWUpIHtcbiAgICAgICAgc3dpdGNoIChuZXdUaW1lKSB7XG4gICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgY2FzZSAzMDpcbiAgICAgICAgICAgIGNhc2UgNjA6XG4gICAgICAgICAgICBjYXNlIDcyMDpcbiAgICAgICAgICAgICAgICB0aW1lID0gbmV3VGltZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRUaW1lKCkge1xuICAgICAgICByZXR1cm4gdGltZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gc2V0UHJpY2VEYXRhKG5ld1ByaWNlRGF0YSkge1xuICAgICAgICBwcmljZURhdGEgPSBuZXdQcmljZURhdGEubWFwKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBnZXRDb2luUHJpY2UoaXRlbSk7IH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRQcmljZURhdGEoKSB7XG4gICAgICAgIHJldHVybiBwcmljZURhdGE7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldFJlZnJlc2hUaW1lKCkge1xuICAgICAgICByZXR1cm4gcmVmcmVzaFRpbWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRlY1JlZnJlc2hUaW1lKCkge1xuICAgICAgICByZWZyZXNoVGltZSA9IHJlZnJlc2hUaW1lIC0gMTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVzZXRSZWZyZXNoVGltZSgpIHtcbiAgICAgICAgcmVmcmVzaFRpbWUgPSA2MDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0QmFzZUV4Y2huYWdlKCkge1xuICAgICAgICByZXR1cm4gQklURklORVg7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEV4Y2hhbmdlcygpIHtcbiAgICAgICAgcmV0dXJuIFtCSVRIVU1CLCBDT0lOT05FLCBVUEJJVF07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEFsbEV4Y2hhbmdlcygpIHtcbiAgICAgICAgcmV0dXJuIFtnZXRCYXNlRXhjaG5hZ2UoKV0uY29uY2F0KGdldEV4Y2hhbmdlcygpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0RXhjaGFuZ2UobmFtZSkge1xuICAgICAgICByZXR1cm4gZmluZChFWENIQU5HRVMsIGZ1bmN0aW9uIChleGNoYW5nZSkge1xuICAgICAgICAgICAgcmV0dXJuIGV4Y2hhbmdlLm5hbWUgPT09IG5hbWU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRDb2luKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZpbmQoQ09JTlMsIGZ1bmN0aW9uIChjb2luKSB7XG4gICAgICAgICAgICByZXR1cm4gY29pbi5uYW1lID09PSBuYW1lO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Q3VycmVuY3kobmFtZSkge1xuICAgICAgICByZXR1cm4gZmluZChDVVJSRU5DSUVTLCBmdW5jdGlvbiAoY3VycmVuY3kpIHtcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW5jeS5uYW1lID09PSBuYW1lO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Q29pblByaWNlKHJlc3BvbnNlKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHtcbiAgICAgICAgICAgIGV4Y2hhbmdlOiBnZXRFeGNoYW5nZShyZXNwb25zZS5leGNoYW5nZSksXG4gICAgICAgICAgICBjb2luOiBnZXRDb2luKHJlc3BvbnNlLmNvaW4pLFxuICAgICAgICAgICAgcHJpY2U6IHJlc3BvbnNlLnByaWNlLFxuICAgICAgICAgICAgdGltZTogcmVzcG9uc2UudGltZSxcbiAgICAgICAgICAgIGN1cnJlbmN5OiBnZXRDdXJyZW5jeShyZXNwb25zZS5jdXJyZW5jeSlcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRQcmljZShleGNoYW5nZSwgY29pbiwgdGltZSkge1xuICAgICAgICB2YXIganNvbiA9IGZpbmQoZ2V0UHJpY2VEYXRhKCksIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS5leGNoYW5nZSA9PT0gZXhjaGFuZ2UgJiYgaXRlbS5jb2luID09PSBjb2luICYmIGl0ZW0udGltZSA9PSB0aW1lO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGpzb24gJiYganNvbi5wcmljZSB8fCAwO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmb3JtYXRQcmljZShwcmljZSwgY3VycmVuY3kpIHtcbiAgICAgICAgdmFyIGRpZ2l0cztcbiAgICAgICAgaWYgKHByaWNlIDwgMTApIHtcbiAgICAgICAgICAgIGRpZ2l0cyA9IDM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJpY2UgPCAxMDApIHtcbiAgICAgICAgICAgIGRpZ2l0cyA9IDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJpY2UgPCAxMDAwKSB7XG4gICAgICAgICAgICBkaWdpdHMgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGlnaXRzID0gMDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZm9ybWF0dGVyID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KCdlbi1VUycsIHtcbiAgICAgICAgICAgIHN0eWxlOiAnY3VycmVuY3knLFxuICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5LFxuICAgICAgICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiBkaWdpdHMsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZm9ybWF0dGVyLmZvcm1hdChwcmljZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbmRlclRIZWFkKCkge1xuICAgICAgICB2YXIgdGhlYWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0aGVhZCcpO1xuICAgICAgICBmb3JFYWNoKHRoZWFkLnJvd3MsIGZ1bmN0aW9uIChyb3cpIHsgcmV0dXJuIHRoZWFkLnJlbW92ZUNoaWxkKHJvdyk7IH0pO1xuICAgICAgICB2YXIgcm93ID0gdGhlYWQuaW5zZXJ0Um93KCk7XG4gICAgICAgIHJvdy5pbnNlcnRDZWxsKCkub3V0ZXJIVE1MID0gJzx0aCBzY29wZT1cImNvbFwiPjwvdGg+JztcbiAgICAgICAgZm9yRWFjaChnZXRBbGxFeGNoYW5nZXMoKSwgZnVuY3Rpb24gKGV4Y2hhbmdlKSB7XG4gICAgICAgICAgICB2YXIgY2VsbCA9IHJvdy5pbnNlcnRDZWxsKCk7XG4gICAgICAgICAgICBjZWxsLm91dGVySFRNTCA9IFwiPHRoIHNjb3BlPVxcXCJjb2xcXFwiPjxhIGhyZWY9XFxcIlwiICsgZXhjaGFuZ2UudXJsICsgXCJcXFwiIGNsYXNzPVxcXCJ0ZXh0LWRhcmsgXCIgKyBleGNoYW5nZS5uYW1lICsgXCJcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5cIiArIGV4Y2hhbmdlLmRpc3BsYXlOYW1lICsgXCI8L2E+PHNtYWxsIGNsYXNzPVxcXCJiYW4tXCIgKyBleGNoYW5nZS5uYW1lICsgXCJcXFwiPjwvc21hbGw+PC90aD5cIjtcbiAgICAgICAgICAgIHVwZGF0ZUV4Y2hhbmdlU3RhdHVzKGV4Y2hhbmdlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlbmRlclRCb2R5KCkge1xuICAgICAgICB2YXIgdGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0Ym9keScpO1xuICAgICAgICBmb3JFYWNoKHRib2R5LnJvd3MsIGZ1bmN0aW9uIChyb3cpIHsgcmV0dXJuIHRib2R5LnJlbW92ZUNoaWxkKHJvdyk7IH0pO1xuICAgICAgICBmb3JFYWNoKENPSU5TLCBmdW5jdGlvbiAoY29pbikge1xuICAgICAgICAgICAgdmFyIHJvdyA9IHRib2R5Lmluc2VydFJvdygpO1xuICAgICAgICAgICAgdmFyIGNlbGwgPSByb3cuaW5zZXJ0Q2VsbCgpO1xuICAgICAgICAgICAgY2VsbC5vdXRlckhUTUwgPSBcIjx0aCBzY29wZT1cXFwicm93XFxcIj5cIiArIGNvaW4ubmFtZS50b1VwcGVyQ2FzZSgpICsgXCI8YnI+PGEgaHJlZj1cXFwiXCIgKyBnZXRDaGFydExpbmsoY29pbikgKyBcIlxcXCIgY2xhc3M9XFxcInRleHQtbXV0ZWRcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj48c21hbGwgY2xhc3M9XFxcIm9pIG9pLWJhci1jaGFydFxcXCI+PC9zbWFsbD48L2E+PC90aD5cIjtcbiAgICAgICAgICAgIGZvckVhY2goZ2V0QWxsRXhjaGFuZ2VzKCksIGZ1bmN0aW9uIChleGNoYW5nZSkge1xuICAgICAgICAgICAgICAgIHZhciBodG1sO1xuICAgICAgICAgICAgICAgIHZhciBwcmljZSA9IGdldFByaWNlKGV4Y2hhbmdlLCBjb2luLCAwKTtcbiAgICAgICAgICAgICAgICBpZiAocHJpY2UgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBodG1sID0gJy0nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWVfMSA9IGdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RQcmljZSA9IGdldFByaWNlKGV4Y2hhbmdlLCBjb2luLCB0aW1lXzEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmF0ZSA9PT0gJ2dpbXAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhjaGFuZ2UgPT0gZ2V0QmFzZUV4Y2huYWdlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gcmVuZGVyS29yUHJpY2UoZXhjaGFuZ2UsIHByaWNlLCBsYXN0UHJpY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2VFeGNoYW5nZSA9IGdldEJhc2VFeGNobmFnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXRmaW5leFByaWNlID0gZ2V0UHJpY2UoYmFzZUV4Y2hhbmdlLCBjb2luLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ZmluZXhMYXN0UHJpY2UgPSBnZXRQcmljZShiYXNlRXhjaGFuZ2UsIGNvaW4sIHRpbWVfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IHJlbmRlckdpbXAoZXhjaGFuZ2UsIHByaWNlLCBsYXN0UHJpY2UsIGJpdGZpbmV4UHJpY2UsIGJpdGZpbmV4TGFzdFByaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgPSByZW5kZXJDaGFuZ2VzKGV4Y2hhbmdlLCBwcmljZSwgbGFzdFByaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IHJvdy5pbnNlcnRDZWxsKCk7XG4gICAgICAgICAgICAgICAgY2VsbC5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHJlbmRlclRIZWFkKCk7XG4gICAgICAgIHJlbmRlclRCb2R5KCk7XG4gICAgICAgICQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnW2RhdGEtdG9nZ2xlPVwicG9wb3ZlclwiXScpLnBvcG92ZXIoeyAndHJpZ2dlcic6ICdob3ZlcicsIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVuZGVyQ2hhbmdlcyhleGNoYW5nZSwgcHJpY2UsIGxhc3RQcmljZSkge1xuICAgICAgICB2YXIgcHJpY2VDaGFuZ2UgPSBwcmljZSAvIGxhc3RQcmljZSAtIDE7XG4gICAgICAgIGlmIChsYXN0UHJpY2UgIT0gMCAmJiBwcmljZSAhPSAwKSB7XG4gICAgICAgICAgICB2YXIgZm9udENvbG9yID0gZ2V0Rm9udENvbG9yKHByaWNlQ2hhbmdlKTtcbiAgICAgICAgICAgIHJldHVybiBcIjxzcGFuIHN0eWxlPVxcXCJjb2xvcjogXCIgKyBmb250Q29sb3IgKyBcIjtcXFwiPlwiICsgZm9ybWF0UHJpY2UocHJpY2UsIGV4Y2hhbmdlLmN1cnJlbmN5Lm5hbWUpICsgXCI8L3NwYW4+PGJyPjxzbWFsbCBkYXRhLXRvZ2dsZT1cXFwicG9wb3ZlclxcXCIgZGF0YS1wbGFjZW1lbnQ9XFxcImJvdHRvbVxcXCIgZGF0YS1jb250ZW50PVxcXCJcIiArIGZvcm1hdFByaWNlKGxhc3RQcmljZSwgZXhjaGFuZ2UuY3VycmVuY3kubmFtZSkgKyBcIlxcXCI+XCIgKyAoMTAwICogcHJpY2VDaGFuZ2UpLnRvRml4ZWQoMikgKyBcIiU8L3NtYWxsPlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiPHNwYW4+XCIgKyBmb3JtYXRQcmljZShwcmljZSwgZXhjaGFuZ2UuY3VycmVuY3kubmFtZSkgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiByZW5kZXJLb3JQcmljZShleGNoYW5nZSwgcHJpY2UsIGxhc3RQcmljZSkge1xuICAgICAgICB2YXIgY3VycmVuY3lSYXRlID0gZ2V0Q3VycmVuY3lSYXRlKCk7XG4gICAgICAgIHZhciBwcmljZUNoYW5nZSA9IHByaWNlIC8gbGFzdFByaWNlIC0gMTtcbiAgICAgICAgdmFyIGtvclByaWNlID0gcHJpY2UgKiBjdXJyZW5jeVJhdGU7XG4gICAgICAgIGlmIChsYXN0UHJpY2UgIT0gMCAmJiBrb3JQcmljZSAhPSAwKSB7XG4gICAgICAgICAgICB2YXIgZm9udENvbG9yID0gZ2V0Rm9udENvbG9yKHByaWNlQ2hhbmdlKTtcbiAgICAgICAgICAgIHZhciBmb3JtYXR0ZWRQcmljZSA9IGZvcm1hdFByaWNlKHByaWNlLCBleGNoYW5nZS5jdXJyZW5jeS5uYW1lKTtcbiAgICAgICAgICAgIHZhciBmb3JtYXR0ZWRLb3JQcmljZSA9IGZvcm1hdFByaWNlKGtvclByaWNlLCBLUlcubmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gXCI8c3BhbiBzdHlsZT1cXFwiY29sb3I6IFwiICsgZm9udENvbG9yICsgXCI7XFxcIj5cIiArIGZvcm1hdHRlZFByaWNlICsgXCI8L3NwYW4+PGJyPjxzbWFsbD5cIiArIGZvcm1hdHRlZEtvclByaWNlICsgXCI8L3NtYWxsPlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiPHNwYW4+XCIgKyBmb3JtYXRQcmljZShwcmljZSwgZXhjaGFuZ2UuY3VycmVuY3kubmFtZSkgKyBcIjwvc3Bhbj5cIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiByZW5kZXJHaW1wKGV4Y2hhbmdlLCBwcmljZSwgbGFzdFByaWNlLCBiYXNlUHJpY2UsIGJhc2VMYXN0UHJpY2UpIHtcbiAgICAgICAgaWYgKHByaWNlID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICB2YXIgYmFzZUV4Y2hhbmdlID0gZ2V0QmFzZUV4Y2huYWdlKCk7XG4gICAgICAgIHZhciBjdXJyZW5jeVJhdGU7XG4gICAgICAgIGlmIChiYXNlRXhjaGFuZ2UuY3VycmVuY3kgPT09IFVTRCAmJiBleGNoYW5nZS5jdXJyZW5jeSA9PT0gS1JXKSB7XG4gICAgICAgICAgICBjdXJyZW5jeVJhdGUgPSBnZXRDdXJyZW5jeVJhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGN1cnJlbmN5UmF0ZSA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByaWNlQ2hhbmdlID0gcHJpY2UgLyBsYXN0UHJpY2UgLSAxO1xuICAgICAgICB2YXIgZm9udENvbG9yID0gZ2V0Rm9udENvbG9yKHByaWNlQ2hhbmdlKTtcbiAgICAgICAgaWYgKGJhc2VQcmljZSA9PSAwIHx8IGN1cnJlbmN5UmF0ZSA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gXCI8c3BhbiBzdHlsZT1cXFwiY29sb3I6IFwiICsgZm9udENvbG9yICsgXCI7XFxcIj5cIiArIGZvcm1hdFByaWNlKHByaWNlLCBleGNoYW5nZS5jdXJyZW5jeS5uYW1lKSArIFwiPC9zcGFuPlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGdpbXAgPSBwcmljZSAvIChiYXNlUHJpY2UgKiBjdXJyZW5jeVJhdGUpIC0gMTtcbiAgICAgICAgICAgIHZhciBsYXN0R2ltcCA9IGxhc3RQcmljZSAvIChiYXNlTGFzdFByaWNlICogY3VycmVuY3lSYXRlKSAtIDE7XG4gICAgICAgICAgICB2YXIgZ2ltcENoYW5nZSA9ICgxMDAgKiAoZ2ltcCAtIGxhc3RHaW1wKSk7XG4gICAgICAgICAgICB2YXIgZm9ybWF0dGVkR2ltcENoYW5nZSA9IGdpbXBDaGFuZ2UgPiAwID8gXCIrXCIgKyBnaW1wQ2hhbmdlLnRvRml4ZWQoMikgKyBcIiVcIiA6IGdpbXBDaGFuZ2UudG9GaXhlZCgyKSArIFwiJVwiO1xuICAgICAgICAgICAgcmV0dXJuIFwiPHNwYW4gc3R5bGU9XFxcImNvbG9yOiBcIiArIGZvbnRDb2xvciArIFwiO1xcXCI+XCIgKyBmb3JtYXRQcmljZShwcmljZSwgZXhjaGFuZ2UuY3VycmVuY3kubmFtZSkgKyBcIjwvc3Bhbj48YnI+PHNtYWxsICBkYXRhLXRvZ2dsZT1cXFwicG9wb3ZlclxcXCIgZGF0YS1wbGFjZW1lbnQ9XFxcImJvdHRvbVxcXCIgZGF0YS1jb250ZW50PVxcXCJcIiArIGZvcm1hdHRlZEdpbXBDaGFuZ2UgKyBcIlxcXCI+XCIgKyAoMTAwICogZ2ltcCkudG9GaXhlZCgyKSArIFwiJTwvc21hbGw+XCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Q2hhcnRMaW5rKGNvaW4pIHtcbiAgICAgICAgaWYgKFVQQklUX0NPSU5TLmluZGV4T2YoY29pbikgPj0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiaHR0cHM6Ly91cGJpdC5jb20vZXhjaGFuZ2U/Y29kZT1DUklYLlVQQklULktSVy1cIiArIGNvaW4ubmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAoY29pbikge1xuICAgICAgICAgICAgY2FzZSBJT1RBOlxuICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cHM6Ly9jcnlwdG93YXQuY2gvYml0ZmluZXgvaW90dXNkJztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiaHR0cHM6Ly9jcnlwdG93YXQuY2gvYml0ZmluZXgvXCIgKyBjb2luLm5hbWUgKyBcInVzZFwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEZvbnRDb2xvcihwcmljZUNoYW5nZSkge1xuICAgICAgICBpZiAocHJpY2VDaGFuZ2UgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gJ3JlZCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocHJpY2VDaGFuZ2UgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2JsdWUnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICdibGFjayc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcmVuZGVyVXBkYXRlZEF0KHVwZGF0ZWRBdCkge1xuICAgICAgICB2YXIgdGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51cGRhdGVkLWF0Jyk7XG4gICAgICAgIHRleHQuaW5uZXJUZXh0ID0gZ2V0Rm9ybWF0VXBkYXRlZEF0KHVwZGF0ZWRBdCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldEZvcm1hdFVwZGF0ZWRBdCh1cGRhdGVkQXQpIHtcbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh1cGRhdGVkQXQpO1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXRGdWxsWWVhcigpICsgXCIvXCIgKyAoZGF0ZS5nZXRNb250aCgpICsgMSkgKyBcIi9cIiArIGRhdGUuZ2V0RGF0ZSgpXG4gICAgICAgICAgICArIChcIiBcIiArIGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKCkpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBhZGRMaXNlbmVycygpIHtcbiAgICAgICAgdmFyIHJhZGlvQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9cmFkaW9dJyk7XG4gICAgICAgIGZvckVhY2gocmFkaW9CdXR0b25zLCBmdW5jdGlvbiAoYnV0dG9uKSB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJ1dHRvbi5uYW1lID09PSAncmF0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJ1dHRvbi5pZCA9PT0gJ2dpbXAnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSYXRlKCdnaW1wJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW5kZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50JywgJ0ZpbHRlcicsICdTZXRJbmRpY2F0b3InLCAnZ2ltcCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJ1dHRvbi5pZCA9PT0gJ3RyYW5zbGF0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJhdGUoJ3RyYW5zbGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsICdGaWx0ZXInLCAnU2V0SW5kaWNhdG9yJywgJ3RyYW5zbGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJ1dHRvbi5uYW1lID09PSAndGltZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWVfMiA9IGJ1dHRvbi5pZC5zbGljZSgxLCBidXR0b24uaWQubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZShwYXJzZUludCh0aW1lXzIpKTtcbiAgICAgICAgICAgICAgICAgICAgZmV0Y2hQcmljZURhdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCAnRmlsdGVyJywgJ1NldFRpbWUnLCB0aW1lXzIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1cGRhdGVVcmwoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZmV0Y2hQcmljZURhdGEoKSB7XG4gICAgICAgIGF4aW9zXzEuZGVmYXVsdC5nZXQoXCJodHRwczovLzE1MTMwaTN2Z2wuZXhlY3V0ZS1hcGkuYXAtbm9ydGhlYXN0LTIuYW1hem9uYXdzLmNvbS9kZXYvYXNzZXRzP3Q9XCIgKyBnZXRUaW1lKCkpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHNldFByaWNlRGF0YShyZXNwb25zZS5kYXRhLmRhdGEpO1xuICAgICAgICAgICAgcmVuZGVyVXBkYXRlZEF0KHJlc3BvbnNlLmRhdGEudXBkYXRlZF9hdCk7XG4gICAgICAgICAgICByZW5kZXIoKTtcbiAgICAgICAgICAgIHJlc2V0UmVmcmVzaFRpbWUoKTtcbiAgICAgICAgICAgIHVwZGF0ZVJlZnJlc2hUZXh0KCk7XG4gICAgICAgICAgICBzaG93TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yLnJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuaGVhZGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc2V0UmVmcmVzaFRpbWUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHBhcnNlVXJsKCkge1xuICAgICAgICB2YXIgcmF0ZSA9IGdldFBhcmFtZXRlckJ5TmFtZSgncmF0ZScpO1xuICAgICAgICBpZiAocmF0ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBzZXRSYXRlKHJhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aW1lID0gZ2V0UGFyYW1ldGVyQnlOYW1lKCd0aW1lJyk7XG4gICAgICAgIGlmICh0aW1lICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNldFRpbWUocGFyc2VJbnQodGltZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZVVybCgpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSkge1xuICAgICAgICAgICAgdmFyIHBhcnNlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgIHBhcnNlci5ocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gICAgICAgICAgICBwYXJzZXIuc2VhcmNoID0gXCI/cmF0ZT1cIiArIGdldFJhdGUoKSArIFwiJnRpbWU9XCIgKyBnZXRUaW1lKCk7XG4gICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIG51bGwsIHBhcnNlci5ocmVmKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRQYXJhbWV0ZXJCeU5hbWUobmFtZSkge1xuICAgICAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXFtcXF1dL2csIFwiXFxcXCQmXCIpO1xuICAgICAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKFwiWz8mXVwiICsgbmFtZSArIFwiKD0oW14mI10qKXwmfCN8JClcIiksIHJlc3VsdHMgPSByZWdleC5leGVjKHVybCk7XG4gICAgICAgIGlmICghcmVzdWx0cylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoIXJlc3VsdHNbMl0pXG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1syXS5yZXBsYWNlKC9cXCsvZywgXCIgXCIpKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlQnV0dG9ucygpIHtcbiAgICAgICAgdmFyIHJhdGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbdHlwZT1yYWRpb11bbmFtZT1yYXRlXVtpZD1cIiArIGdldFJhdGUoKSArIFwiXVwiKTtcbiAgICAgICAgaWYgKHJhdGVCdXR0b24pIHtcbiAgICAgICAgICAgIHJhdGVCdXR0b24uY2xpY2soKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGltZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFt0eXBlPXJhZGlvXVtuYW1lPXRpbWVdW2lkPXRcIiArIGdldFRpbWUoKSArIFwiXVwiKTtcbiAgICAgICAgaWYgKHRpbWVCdXR0b24pIHtcbiAgICAgICAgICAgIHRpbWVCdXR0b24uY2xpY2soKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYm9va21hcmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYm9va21hcmsnKTtcbiAgICAgICAgaWYgKGJvb2ttYXJrKSB7XG4gICAgICAgICAgICBib29rbWFyay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LmV4dGVybmFsICYmICgnQWRkRmF2b3JpdGUnIGluIHdpbmRvdy5leHRlcm5hbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmV4dGVybmFsLkFkZEZhdm9yaXRlKGxvY2F0aW9uLmhyZWYsIGRvY3VtZW50LnRpdGxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzZXRSZWZyZXNoVGltZXIoKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aW1lLXJlZnJlc2gtYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmZXRjaFByaWNlRGF0YSgpO1xuICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCAnUmVmcmVzaCcsICdDbGlja0J1dHRvbicsICdyZWZyZXNoJyk7XG4gICAgICAgIH0pO1xuICAgICAgICB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGVjUmVmcmVzaFRpbWUoKTtcbiAgICAgICAgICAgIHVwZGF0ZVJlZnJlc2hUZXh0KCk7XG4gICAgICAgICAgICBpZiAoZ2V0UmVmcmVzaFRpbWUoKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgZmV0Y2hQcmljZURhdGEoKTtcbiAgICAgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsICdSZWZyZXNoJywgJ1RpbWVvdXQnLCAncmVmcmVzaCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCAxMDAwKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlUmVmcmVzaFRleHQoKSB7XG4gICAgICAgIHZhciBjb3VudCA9IGdldFJlZnJlc2hUaW1lKCk7XG4gICAgICAgIHZhciByZWZyZXNoVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aW1lLXJlZnJlc2gtdGV4dCcpO1xuICAgICAgICBpZiAoY291bnQgPiA1KSB7XG4gICAgICAgICAgICByZWZyZXNoVGV4dC5pbm5lclRleHQgPSBjb3VudCArIFwiIFxcdUNEMDhcIjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlZnJlc2hUZXh0LmlubmVyVGV4dCA9ICfsnqDsi5wnO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHVwZGF0ZUN1cnJlbmN5UmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJhdGU7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCwgZ2V0UmVtb3RlQ3VycmVuY3lSYXRlKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByYXRlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2N1cnJlbmN5JywgcmF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmF0ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW5jeVJhdGUocmF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0UmVtb3RlQ3VycmVuY3lSYXRlKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGRhdGEsIGVfMTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIGF4aW9zXzEuZGVmYXVsdC5nZXQoJ2h0dHBzOi8vMTUxMzBpM3ZnbC5leGVjdXRlLWFwaS5hcC1ub3J0aGVhc3QtMi5hbWF6b25hd3MuY29tL2Rldi9jdXJyZW5jeScpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCBkYXRhLmZpbHRlcihmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5zb3VyY2UgPT09ICdVU0QnICYmIGQudGFyZ2V0ID09PSAnS1JXJzsgfSkubWFwKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLnJhdGU7IH0pWzBdXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZV8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2N1cnJlbmN5JywgZV8xKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMywgM107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyLCAwXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNob3dMb2FkaW5nKGxvYWRpbmcpIHtcbiAgICAgICAgaWYgKGxvYWRlZCB8fCAhbG9hZGluZykge1xuICAgICAgICAgICAgbG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICQoJyNsb2FkaW5nLW1vZGFsJykubW9kYWwoJ2hpZGUnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcjbG9hZGluZy1tb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBzaG93T25ib2FyZGluZygpIHtcbiAgICAgICAgdmFyIGdpbXBCdXR0b24gPSAkKCcuZ2ltcC1vbmJvYXJkaW5nJyk7XG4gICAgICAgIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlKSB7XG4gICAgICAgICAgICB2YXIgbG9jYWxTdG9yYWdlXzEgPSB3aW5kb3cubG9jYWxTdG9yYWdlO1xuICAgICAgICAgICAgaWYgKCFsb2NhbFN0b3JhZ2VfMS5nZXRJdGVtKFwib25ib2FyZGluZzpnaW1wX2J1dHRvblwiKSkge1xuICAgICAgICAgICAgICAgIGdpbXBCdXR0b24ucG9wb3Zlcignc2hvdycpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5naW1wLW9uYm9hcmRpbmcnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2ltcEJ1dHRvbi5wb3BvdmVyKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgIGdpbXBCdXR0b24ucG9wb3ZlcignZGlzYWJsZScpO1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2VfMS5zZXRJdGVtKCdvbmJvYXJkaW5nOmdpbXBfYnV0dG9uJywgJ2RvbmUnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdpbXBCdXR0b24ucG9wb3ZlcignZGlzYWJsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZ2ltcEJ1dHRvbi5wb3BvdmVyKCdkaXNhYmxlJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gdXBkYXRlRXhjaGFuZ2VTdGF0dXMoZXhjaGFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFjdGl2ZSwgX2EsIHRhcmdldEljb247XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IGV4Y2hhbmdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQklURklORVg6IHJldHVybiBbMywgMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBCSVRIVU1COiByZXR1cm4gWzMsIDNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ09JTk9ORTogcmV0dXJuIFszLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFVQQklUOiByZXR1cm4gWzMsIDddO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszLCA5XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gWzQsIGlzQml0ZmluZXhBY3RpdmUoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZSA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMywgMTBdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCwgaXNCaXRodW1iQWN0aXZlKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmUgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMsIDEwXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzQsIGlzQ29pbm9uZUFjdGl2ZSgpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszLCAxMF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzogcmV0dXJuIFs0LCBpc1VwYml0QWN0aXZlKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmUgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMsIDEwXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMywgMTBdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5iYW4tXCIgKyBleGNoYW5nZS5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0SWNvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJY29uLmNsYXNzTmFtZSA9ICdvaSBvaS1iYW4gdGV4dC1kYW5nZXInO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc0JpdGZpbmV4QWN0aXZlKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UsIGVfMjtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIGF4aW9zXzEuZGVmYXVsdC5nZXQoJ2h0dHBzOi8vYXBpLmJpdGZpbmV4LmNvbS92Mi9wbGF0Zm9ybS9zdGF0dXMnKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCByZXNwb25zZS5kYXRhWzBdID09IDFdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBlXzIgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYml0ZmluZXgnLCBlXzIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCBmYWxzZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzQml0aHVtYkFjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlLCBzdGF0dXNfMSwgZGF0ZSwgY3VycmVudFRpbWUsIHZhbGlkRGF0ZSwgZV8zO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgYXhpb3NfMS5kZWZhdWx0LmdldCgnaHR0cHM6Ly9hcGkuYml0aHVtYi5jb20vcHVibGljL3RpY2tlci9CVEMnKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzXzEgPSByZXNwb25zZS5kYXRhLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUgPSBwYXJzZUludChyZXNwb25zZS5kYXRhLmRhdGEuZGF0ZSwgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkRGF0ZSA9IGRhdGUgLSAxMDAwMCA8IGN1cnJlbnRUaW1lICYmIGN1cnJlbnRUaW1lIDwgZGF0ZSArIDEwMDAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCBzdGF0dXNfMSA9PT0gJzAwMDAnICYmIHZhbGlkRGF0ZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVfMyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdiaXRodW1iJywgZV8zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiwgZmFsc2VdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc0NvaW5vbmVBY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgcmVzdWx0LCB0aW1lc3RhbXAsIGN1cnJlbnRUaW1lLCB2YWxpZERhdGUsIGVfNDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMCwgMiwgLCAzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIGF4aW9zXzEuZGVmYXVsdC5nZXQoJ2h0dHBzOi8vYXBpLmNvaW5vbmUuY28ua3IvdGlja2VyP2N1cnJlbmN5PWJ0YycpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXNwb25zZS5kYXRhLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcCA9IHBhcnNlSW50KHJlc3BvbnNlLmRhdGEudGltZXN0YW1wLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkRGF0ZSA9IHRpbWVzdGFtcCAtIDEwIDwgY3VycmVudFRpbWUgJiYgY3VycmVudFRpbWUgPCB0aW1lc3RhbXAgKyAxMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiwgcmVzdWx0ID09PSAnc3VjY2VzcycgJiYgdmFsaWREYXRlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZV80ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NvaW5vbmUnLCBlXzQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCBmYWxzZV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzVXBiaXRBY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSwgdGltZXN0YW1wLCBjdXJyZW50VGltZSwgZV81O1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgYXhpb3NfMS5kZWZhdWx0LmdldCgnaHR0cHM6Ly9jY3gudXBiaXQuY29tL2FwaS92MS90aW1lc3RhbXAnKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wID0gcGFyc2VJbnQocmVzcG9uc2UuZGF0YSwgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIsIHRpbWVzdGFtcCAtIDEwIDwgY3VycmVudFRpbWUgJiYgY3VycmVudFRpbWUgPCB0aW1lc3RhbXAgKyAxMF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVfNSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1cGJpdCcsIGVfNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIsIGZhbHNlXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2hvd0xvYWRpbmcodHJ1ZSk7XG4gICAgcGFyc2VVcmwoKTtcbiAgICB1cGRhdGVCdXR0b25zKCk7XG4gICAgYWRkTGlzZW5lcnMoKTtcbiAgICBzZXRSZWZyZXNoVGltZXIoKTtcbiAgICB1cGRhdGVDdXJyZW5jeVJhdGUoKTtcbiAgICBmZXRjaFByaWNlRGF0YSgpO1xuICAgIHNob3dPbmJvYXJkaW5nKCk7XG59XG5yZWFkeShtYWluKTtcblxuXG4vKioqLyB9KSxcbi8qIDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxubW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXG4vKioqLyB9KSxcbi8qIDkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbnZhciBiaW5kID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcbnZhciBBeGlvcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xudmFyIGRlZmF1bHRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGVmYXVsdENvbmZpZyBUaGUgZGVmYXVsdCBjb25maWcgZm9yIHRoZSBpbnN0YW5jZVxuICogQHJldHVybiB7QXhpb3N9IEEgbmV3IGluc3RhbmNlIG9mIEF4aW9zXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlKGRlZmF1bHRDb25maWcpIHtcbiAgdmFyIGNvbnRleHQgPSBuZXcgQXhpb3MoZGVmYXVsdENvbmZpZyk7XG4gIHZhciBpbnN0YW5jZSA9IGJpbmQoQXhpb3MucHJvdG90eXBlLnJlcXVlc3QsIGNvbnRleHQpO1xuXG4gIC8vIENvcHkgYXhpb3MucHJvdG90eXBlIHRvIGluc3RhbmNlXG4gIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgQXhpb3MucHJvdG90eXBlLCBjb250ZXh0KTtcblxuICAvLyBDb3B5IGNvbnRleHQgdG8gaW5zdGFuY2VcbiAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBjb250ZXh0KTtcblxuICByZXR1cm4gaW5zdGFuY2U7XG59XG5cbi8vIENyZWF0ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB0byBiZSBleHBvcnRlZFxudmFyIGF4aW9zID0gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdHMpO1xuXG4vLyBFeHBvc2UgQXhpb3MgY2xhc3MgdG8gYWxsb3cgY2xhc3MgaW5oZXJpdGFuY2VcbmF4aW9zLkF4aW9zID0gQXhpb3M7XG5cbi8vIEZhY3RvcnkgZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZXNcbmF4aW9zLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShpbnN0YW5jZUNvbmZpZykge1xuICByZXR1cm4gY3JlYXRlSW5zdGFuY2UodXRpbHMubWVyZ2UoZGVmYXVsdHMsIGluc3RhbmNlQ29uZmlnKSk7XG59O1xuXG4vLyBFeHBvc2UgQ2FuY2VsICYgQ2FuY2VsVG9rZW5cbmF4aW9zLkNhbmNlbCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5heGlvcy5DYW5jZWxUb2tlbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuYXhpb3MuaXNDYW5jZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXG4vLyBFeHBvc2UgYWxsL3NwcmVhZFxuYXhpb3MuYWxsID0gZnVuY3Rpb24gYWxsKHByb21pc2VzKSB7XG4gIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG59O1xuYXhpb3Muc3ByZWFkID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXhpb3M7XG5cbi8vIEFsbG93IHVzZSBvZiBkZWZhdWx0IGltcG9ydCBzeW50YXggaW4gVHlwZVNjcmlwdFxubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGF4aW9zO1xuXG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLyohXG4gKiBEZXRlcm1pbmUgaWYgYW4gb2JqZWN0IGlzIGEgQnVmZmVyXG4gKlxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGh0dHBzOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqL1xuXG4vLyBUaGUgX2lzQnVmZmVyIGNoZWNrIGlzIGZvciBTYWZhcmkgNS03IHN1cHBvcnQsIGJlY2F1c2UgaXQncyBtaXNzaW5nXG4vLyBPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yLiBSZW1vdmUgdGhpcyBldmVudHVhbGx5XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIG9iaiAhPSBudWxsICYmIChpc0J1ZmZlcihvYmopIHx8IGlzU2xvd0J1ZmZlcihvYmopIHx8ICEhb2JqLl9pc0J1ZmZlcilcbn1cblxuZnVuY3Rpb24gaXNCdWZmZXIgKG9iaikge1xuICByZXR1cm4gISFvYmouY29uc3RydWN0b3IgJiYgdHlwZW9mIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIob2JqKVxufVxuXG4vLyBGb3IgTm9kZSB2MC4xMCBzdXBwb3J0LiBSZW1vdmUgdGhpcyBldmVudHVhbGx5LlxuZnVuY3Rpb24gaXNTbG93QnVmZmVyIChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmoucmVhZEZsb2F0TEUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIG9iai5zbGljZSA9PT0gJ2Z1bmN0aW9uJyAmJiBpc0J1ZmZlcihvYmouc2xpY2UoMCwgMCkpXG59XG5cblxuLyoqKi8gfSksXG4vKiAxMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgZGVmYXVsdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xudmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbnZhciBJbnRlcmNlcHRvck1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcbnZhciBkaXNwYXRjaFJlcXVlc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gQXhpb3MoaW5zdGFuY2VDb25maWcpIHtcbiAgdGhpcy5kZWZhdWx0cyA9IGluc3RhbmNlQ29uZmlnO1xuICB0aGlzLmludGVyY2VwdG9ycyA9IHtcbiAgICByZXF1ZXN0OiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKCksXG4gICAgcmVzcG9uc2U6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKVxuICB9O1xufVxuXG4vKipcbiAqIERpc3BhdGNoIGEgcmVxdWVzdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyBzcGVjaWZpYyBmb3IgdGhpcyByZXF1ZXN0IChtZXJnZWQgd2l0aCB0aGlzLmRlZmF1bHRzKVxuICovXG5BeGlvcy5wcm90b3R5cGUucmVxdWVzdCA9IGZ1bmN0aW9uIHJlcXVlc3QoY29uZmlnKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICAvLyBBbGxvdyBmb3IgYXhpb3MoJ2V4YW1wbGUvdXJsJ1ssIGNvbmZpZ10pIGEgbGEgZmV0Y2ggQVBJXG4gIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuICAgIGNvbmZpZyA9IHV0aWxzLm1lcmdlKHtcbiAgICAgIHVybDogYXJndW1lbnRzWzBdXG4gICAgfSwgYXJndW1lbnRzWzFdKTtcbiAgfVxuXG4gIGNvbmZpZyA9IHV0aWxzLm1lcmdlKGRlZmF1bHRzLCB0aGlzLmRlZmF1bHRzLCB7IG1ldGhvZDogJ2dldCcgfSwgY29uZmlnKTtcbiAgY29uZmlnLm1ldGhvZCA9IGNvbmZpZy5tZXRob2QudG9Mb3dlckNhc2UoKTtcblxuICAvLyBIb29rIHVwIGludGVyY2VwdG9ycyBtaWRkbGV3YXJlXG4gIHZhciBjaGFpbiA9IFtkaXNwYXRjaFJlcXVlc3QsIHVuZGVmaW5lZF07XG4gIHZhciBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGNvbmZpZyk7XG5cbiAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uIHVuc2hpZnRSZXF1ZXN0SW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgY2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgfSk7XG5cbiAgdGhpcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UuZm9yRWFjaChmdW5jdGlvbiBwdXNoUmVzcG9uc2VJbnRlcmNlcHRvcnMoaW50ZXJjZXB0b3IpIHtcbiAgICBjaGFpbi5wdXNoKGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuICB9KTtcblxuICB3aGlsZSAoY2hhaW4ubGVuZ3RoKSB7XG4gICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihjaGFpbi5zaGlmdCgpLCBjaGFpbi5zaGlmdCgpKTtcbiAgfVxuXG4gIHJldHVybiBwcm9taXNlO1xufTtcblxuLy8gUHJvdmlkZSBhbGlhc2VzIGZvciBzdXBwb3J0ZWQgcmVxdWVzdCBtZXRob2RzXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ29wdGlvbnMnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YShtZXRob2QpIHtcbiAgLyplc2xpbnQgZnVuYy1uYW1lczowKi9cbiAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbih1cmwsIGNvbmZpZykge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXRpbHMubWVyZ2UoY29uZmlnIHx8IHt9LCB7XG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIHVybDogdXJsXG4gICAgfSkpO1xuICB9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHV0aWxzLm1lcmdlKGNvbmZpZyB8fCB7fSwge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICB1cmw6IHVybCxcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9KSk7XG4gIH07XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBBeGlvcztcblxuXG4vKioqLyB9KSxcbi8qIDEyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuLyoqKi8gfSksXG4vKiAxMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgbm9ybWFsaXplZE5hbWUpIHtcbiAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbiBwcm9jZXNzSGVhZGVyKHZhbHVlLCBuYW1lKSB7XG4gICAgaWYgKG5hbWUgIT09IG5vcm1hbGl6ZWROYW1lICYmIG5hbWUudG9VcHBlckNhc2UoKSA9PT0gbm9ybWFsaXplZE5hbWUudG9VcHBlckNhc2UoKSkge1xuICAgICAgaGVhZGVyc1tub3JtYWxpemVkTmFtZV0gPSB2YWx1ZTtcbiAgICAgIGRlbGV0ZSBoZWFkZXJzW25hbWVdO1xuICAgIH1cbiAgfSk7XG59O1xuXG5cbi8qKiovIH0pLFxuLyogMTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIGNyZWF0ZUVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxuLyoqXG4gKiBSZXNvbHZlIG9yIHJlamVjdCBhIFByb21pc2UgYmFzZWQgb24gcmVzcG9uc2Ugc3RhdHVzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc29sdmUgQSBmdW5jdGlvbiB0aGF0IHJlc29sdmVzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0IEEgZnVuY3Rpb24gdGhhdCByZWplY3RzIHRoZSBwcm9taXNlLlxuICogQHBhcmFtIHtvYmplY3R9IHJlc3BvbnNlIFRoZSByZXNwb25zZS5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCByZXNwb25zZSkge1xuICB2YXIgdmFsaWRhdGVTdGF0dXMgPSByZXNwb25zZS5jb25maWcudmFsaWRhdGVTdGF0dXM7XG4gIC8vIE5vdGU6IHN0YXR1cyBpcyBub3QgZXhwb3NlZCBieSBYRG9tYWluUmVxdWVzdFxuICBpZiAoIXJlc3BvbnNlLnN0YXR1cyB8fCAhdmFsaWRhdGVTdGF0dXMgfHwgdmFsaWRhdGVTdGF0dXMocmVzcG9uc2Uuc3RhdHVzKSkge1xuICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICB9IGVsc2Uge1xuICAgIHJlamVjdChjcmVhdGVFcnJvcihcbiAgICAgICdSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlICcgKyByZXNwb25zZS5zdGF0dXMsXG4gICAgICByZXNwb25zZS5jb25maWcsXG4gICAgICBudWxsLFxuICAgICAgcmVzcG9uc2UucmVxdWVzdCxcbiAgICAgIHJlc3BvbnNlXG4gICAgKSk7XG4gIH1cbn07XG5cblxuLyoqKi8gfSksXG4vKiAxNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG4vKipcbiAqIFVwZGF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgY29uZmlnLCBlcnJvciBjb2RlLCBhbmQgcmVzcG9uc2UuXG4gKlxuICogQHBhcmFtIHtFcnJvcn0gZXJyb3IgVGhlIGVycm9yIHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgZXJyb3IuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIGVycm9yLmNvbmZpZyA9IGNvbmZpZztcbiAgaWYgKGNvZGUpIHtcbiAgICBlcnJvci5jb2RlID0gY29kZTtcbiAgfVxuICBlcnJvci5yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgcmV0dXJuIGVycm9yO1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDE2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbmZ1bmN0aW9uIGVuY29kZSh2YWwpIHtcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpLlxuICAgIHJlcGxhY2UoLyU0MC9naSwgJ0AnKS5cbiAgICByZXBsYWNlKC8lM0EvZ2ksICc6JykuXG4gICAgcmVwbGFjZSgvJTI0L2csICckJykuXG4gICAgcmVwbGFjZSgvJTJDL2dpLCAnLCcpLlxuICAgIHJlcGxhY2UoLyUyMC9nLCAnKycpLlxuICAgIHJlcGxhY2UoLyU1Qi9naSwgJ1snKS5cbiAgICByZXBsYWNlKC8lNUQvZ2ksICddJyk7XG59XG5cbi8qKlxuICogQnVpbGQgYSBVUkwgYnkgYXBwZW5kaW5nIHBhcmFtcyB0byB0aGUgZW5kXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgYmFzZSBvZiB0aGUgdXJsIChlLmcuLCBodHRwOi8vd3d3Lmdvb2dsZS5jb20pXG4gKiBAcGFyYW0ge29iamVjdH0gW3BhcmFtc10gVGhlIHBhcmFtcyB0byBiZSBhcHBlbmRlZFxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGZvcm1hdHRlZCB1cmxcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBidWlsZFVSTCh1cmwsIHBhcmFtcywgcGFyYW1zU2VyaWFsaXplcikge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgaWYgKCFwYXJhbXMpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgdmFyIHNlcmlhbGl6ZWRQYXJhbXM7XG4gIGlmIChwYXJhbXNTZXJpYWxpemVyKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtc1NlcmlhbGl6ZXIocGFyYW1zKTtcbiAgfSBlbHNlIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhwYXJhbXMpKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtcy50b1N0cmluZygpO1xuICB9IGVsc2Uge1xuICAgIHZhciBwYXJ0cyA9IFtdO1xuXG4gICAgdXRpbHMuZm9yRWFjaChwYXJhbXMsIGZ1bmN0aW9uIHNlcmlhbGl6ZSh2YWwsIGtleSkge1xuICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh1dGlscy5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAga2V5ID0ga2V5ICsgJ1tdJztcbiAgICAgIH1cblxuICAgICAgaWYgKCF1dGlscy5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAgdmFsID0gW3ZhbF07XG4gICAgICB9XG5cbiAgICAgIHV0aWxzLmZvckVhY2godmFsLCBmdW5jdGlvbiBwYXJzZVZhbHVlKHYpIHtcbiAgICAgICAgaWYgKHV0aWxzLmlzRGF0ZSh2KSkge1xuICAgICAgICAgIHYgPSB2LnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodXRpbHMuaXNPYmplY3QodikpIHtcbiAgICAgICAgICB2ID0gSlNPTi5zdHJpbmdpZnkodik7XG4gICAgICAgIH1cbiAgICAgICAgcGFydHMucHVzaChlbmNvZGUoa2V5KSArICc9JyArIGVuY29kZSh2KSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJ0cy5qb2luKCcmJyk7XG4gIH1cblxuICBpZiAoc2VyaWFsaXplZFBhcmFtcykge1xuICAgIHVybCArPSAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJicpICsgc2VyaWFsaXplZFBhcmFtcztcbiAgfVxuXG4gIHJldHVybiB1cmw7XG59O1xuXG5cbi8qKiovIH0pLFxuLyogMTcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuLy8gSGVhZGVycyB3aG9zZSBkdXBsaWNhdGVzIGFyZSBpZ25vcmVkIGJ5IG5vZGVcbi8vIGMuZi4gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9odHRwLmh0bWwjaHR0cF9tZXNzYWdlX2hlYWRlcnNcbnZhciBpZ25vcmVEdXBsaWNhdGVPZiA9IFtcbiAgJ2FnZScsICdhdXRob3JpemF0aW9uJywgJ2NvbnRlbnQtbGVuZ3RoJywgJ2NvbnRlbnQtdHlwZScsICdldGFnJyxcbiAgJ2V4cGlyZXMnLCAnZnJvbScsICdob3N0JywgJ2lmLW1vZGlmaWVkLXNpbmNlJywgJ2lmLXVubW9kaWZpZWQtc2luY2UnLFxuICAnbGFzdC1tb2RpZmllZCcsICdsb2NhdGlvbicsICdtYXgtZm9yd2FyZHMnLCAncHJveHktYXV0aG9yaXphdGlvbicsXG4gICdyZWZlcmVyJywgJ3JldHJ5LWFmdGVyJywgJ3VzZXItYWdlbnQnXG5dO1xuXG4vKipcbiAqIFBhcnNlIGhlYWRlcnMgaW50byBhbiBvYmplY3RcbiAqXG4gKiBgYGBcbiAqIERhdGU6IFdlZCwgMjcgQXVnIDIwMTQgMDg6NTg6NDkgR01UXG4gKiBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25cbiAqIENvbm5lY3Rpb246IGtlZXAtYWxpdmVcbiAqIFRyYW5zZmVyLUVuY29kaW5nOiBjaHVua2VkXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaGVhZGVycyBIZWFkZXJzIG5lZWRpbmcgdG8gYmUgcGFyc2VkXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBIZWFkZXJzIHBhcnNlZCBpbnRvIGFuIG9iamVjdFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBhcnNlSGVhZGVycyhoZWFkZXJzKSB7XG4gIHZhciBwYXJzZWQgPSB7fTtcbiAgdmFyIGtleTtcbiAgdmFyIHZhbDtcbiAgdmFyIGk7XG5cbiAgaWYgKCFoZWFkZXJzKSB7IHJldHVybiBwYXJzZWQ7IH1cblxuICB1dGlscy5mb3JFYWNoKGhlYWRlcnMuc3BsaXQoJ1xcbicpLCBmdW5jdGlvbiBwYXJzZXIobGluZSkge1xuICAgIGkgPSBsaW5lLmluZGV4T2YoJzonKTtcbiAgICBrZXkgPSB1dGlscy50cmltKGxpbmUuc3Vic3RyKDAsIGkpKS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhbCA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoaSArIDEpKTtcblxuICAgIGlmIChrZXkpIHtcbiAgICAgIGlmIChwYXJzZWRba2V5XSAmJiBpZ25vcmVEdXBsaWNhdGVPZi5pbmRleE9mKGtleSkgPj0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoa2V5ID09PSAnc2V0LWNvb2tpZScpIHtcbiAgICAgICAgcGFyc2VkW2tleV0gPSAocGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSA6IFtdKS5jb25jYXQoW3ZhbF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyc2VkW2tleV0gPSBwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldICsgJywgJyArIHZhbCA6IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwYXJzZWQ7XG59O1xuXG5cbi8qKiovIH0pLFxuLyogMTggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoXG4gIHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgP1xuXG4gIC8vIFN0YW5kYXJkIGJyb3dzZXIgZW52cyBoYXZlIGZ1bGwgc3VwcG9ydCBvZiB0aGUgQVBJcyBuZWVkZWQgdG8gdGVzdFxuICAvLyB3aGV0aGVyIHRoZSByZXF1ZXN0IFVSTCBpcyBvZiB0aGUgc2FtZSBvcmlnaW4gYXMgY3VycmVudCBsb2NhdGlvbi5cbiAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICB2YXIgbXNpZSA9IC8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgdmFyIHVybFBhcnNpbmdOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIHZhciBvcmlnaW5VUkw7XG5cbiAgICAvKipcbiAgICAqIFBhcnNlIGEgVVJMIHRvIGRpc2NvdmVyIGl0J3MgY29tcG9uZW50c1xuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgVGhlIFVSTCB0byBiZSBwYXJzZWRcbiAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgKi9cbiAgICBmdW5jdGlvbiByZXNvbHZlVVJMKHVybCkge1xuICAgICAgdmFyIGhyZWYgPSB1cmw7XG5cbiAgICAgIGlmIChtc2llKSB7XG4gICAgICAgIC8vIElFIG5lZWRzIGF0dHJpYnV0ZSBzZXQgdHdpY2UgdG8gbm9ybWFsaXplIHByb3BlcnRpZXNcbiAgICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG4gICAgICAgIGhyZWYgPSB1cmxQYXJzaW5nTm9kZS5ocmVmO1xuICAgICAgfVxuXG4gICAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcblxuICAgICAgLy8gdXJsUGFyc2luZ05vZGUgcHJvdmlkZXMgdGhlIFVybFV0aWxzIGludGVyZmFjZSAtIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaHJlZjogdXJsUGFyc2luZ05vZGUuaHJlZixcbiAgICAgICAgcHJvdG9jb2w6IHVybFBhcnNpbmdOb2RlLnByb3RvY29sID8gdXJsUGFyc2luZ05vZGUucHJvdG9jb2wucmVwbGFjZSgvOiQvLCAnJykgOiAnJyxcbiAgICAgICAgaG9zdDogdXJsUGFyc2luZ05vZGUuaG9zdCxcbiAgICAgICAgc2VhcmNoOiB1cmxQYXJzaW5nTm9kZS5zZWFyY2ggPyB1cmxQYXJzaW5nTm9kZS5zZWFyY2gucmVwbGFjZSgvXlxcPy8sICcnKSA6ICcnLFxuICAgICAgICBoYXNoOiB1cmxQYXJzaW5nTm9kZS5oYXNoID8gdXJsUGFyc2luZ05vZGUuaGFzaC5yZXBsYWNlKC9eIy8sICcnKSA6ICcnLFxuICAgICAgICBob3N0bmFtZTogdXJsUGFyc2luZ05vZGUuaG9zdG5hbWUsXG4gICAgICAgIHBvcnQ6IHVybFBhcnNpbmdOb2RlLnBvcnQsXG4gICAgICAgIHBhdGhuYW1lOiAodXJsUGFyc2luZ05vZGUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycpID9cbiAgICAgICAgICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lIDpcbiAgICAgICAgICAgICAgICAgICcvJyArIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lXG4gICAgICB9O1xuICAgIH1cblxuICAgIG9yaWdpblVSTCA9IHJlc29sdmVVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXG4gICAgLyoqXG4gICAgKiBEZXRlcm1pbmUgaWYgYSBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiBhcyB0aGUgY3VycmVudCBsb2NhdGlvblxuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1ZXN0VVJMIFRoZSBVUkwgdG8gdGVzdFxuICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4sIG90aGVyd2lzZSBmYWxzZVxuICAgICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbihyZXF1ZXN0VVJMKSB7XG4gICAgICB2YXIgcGFyc2VkID0gKHV0aWxzLmlzU3RyaW5nKHJlcXVlc3RVUkwpKSA/IHJlc29sdmVVUkwocmVxdWVzdFVSTCkgOiByZXF1ZXN0VVJMO1xuICAgICAgcmV0dXJuIChwYXJzZWQucHJvdG9jb2wgPT09IG9yaWdpblVSTC5wcm90b2NvbCAmJlxuICAgICAgICAgICAgcGFyc2VkLmhvc3QgPT09IG9yaWdpblVSTC5ob3N0KTtcbiAgICB9O1xuICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnZzICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4oKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICB9KSgpXG4pO1xuXG5cbi8qKiovIH0pLFxuLyogMTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuLy8gYnRvYSBwb2x5ZmlsbCBmb3IgSUU8MTAgY291cnRlc3kgaHR0cHM6Ly9naXRodWIuY29tL2RhdmlkY2hhbWJlcnMvQmFzZTY0LmpzXG5cbnZhciBjaGFycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSc7XG5cbmZ1bmN0aW9uIEUoKSB7XG4gIHRoaXMubWVzc2FnZSA9ICdTdHJpbmcgY29udGFpbnMgYW4gaW52YWxpZCBjaGFyYWN0ZXInO1xufVxuRS5wcm90b3R5cGUgPSBuZXcgRXJyb3I7XG5FLnByb3RvdHlwZS5jb2RlID0gNTtcbkUucHJvdG90eXBlLm5hbWUgPSAnSW52YWxpZENoYXJhY3RlckVycm9yJztcblxuZnVuY3Rpb24gYnRvYShpbnB1dCkge1xuICB2YXIgc3RyID0gU3RyaW5nKGlucHV0KTtcbiAgdmFyIG91dHB1dCA9ICcnO1xuICBmb3IgKFxuICAgIC8vIGluaXRpYWxpemUgcmVzdWx0IGFuZCBjb3VudGVyXG4gICAgdmFyIGJsb2NrLCBjaGFyQ29kZSwgaWR4ID0gMCwgbWFwID0gY2hhcnM7XG4gICAgLy8gaWYgdGhlIG5leHQgc3RyIGluZGV4IGRvZXMgbm90IGV4aXN0OlxuICAgIC8vICAgY2hhbmdlIHRoZSBtYXBwaW5nIHRhYmxlIHRvIFwiPVwiXG4gICAgLy8gICBjaGVjayBpZiBkIGhhcyBubyBmcmFjdGlvbmFsIGRpZ2l0c1xuICAgIHN0ci5jaGFyQXQoaWR4IHwgMCkgfHwgKG1hcCA9ICc9JywgaWR4ICUgMSk7XG4gICAgLy8gXCI4IC0gaWR4ICUgMSAqIDhcIiBnZW5lcmF0ZXMgdGhlIHNlcXVlbmNlIDIsIDQsIDYsIDhcbiAgICBvdXRwdXQgKz0gbWFwLmNoYXJBdCg2MyAmIGJsb2NrID4+IDggLSBpZHggJSAxICogOClcbiAgKSB7XG4gICAgY2hhckNvZGUgPSBzdHIuY2hhckNvZGVBdChpZHggKz0gMyAvIDQpO1xuICAgIGlmIChjaGFyQ29kZSA+IDB4RkYpIHtcbiAgICAgIHRocm93IG5ldyBFKCk7XG4gICAgfVxuICAgIGJsb2NrID0gYmxvY2sgPDwgOCB8IGNoYXJDb2RlO1xuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYnRvYTtcblxuXG4vKioqLyB9KSxcbi8qIDIwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbm1vZHVsZS5leHBvcnRzID0gKFxuICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblxuICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgc3VwcG9ydCBkb2N1bWVudC5jb29raWVcbiAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKG5hbWUsIHZhbHVlLCBleHBpcmVzLCBwYXRoLCBkb21haW4sIHNlY3VyZSkge1xuICAgICAgICB2YXIgY29va2llID0gW107XG4gICAgICAgIGNvb2tpZS5wdXNoKG5hbWUgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcblxuICAgICAgICBpZiAodXRpbHMuaXNOdW1iZXIoZXhwaXJlcykpIHtcbiAgICAgICAgICBjb29raWUucHVzaCgnZXhwaXJlcz0nICsgbmV3IERhdGUoZXhwaXJlcykudG9HTVRTdHJpbmcoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcocGF0aCkpIHtcbiAgICAgICAgICBjb29raWUucHVzaCgncGF0aD0nICsgcGF0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcoZG9tYWluKSkge1xuICAgICAgICAgIGNvb2tpZS5wdXNoKCdkb21haW49JyArIGRvbWFpbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VjdXJlID09PSB0cnVlKSB7XG4gICAgICAgICAgY29va2llLnB1c2goJ3NlY3VyZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llLmpvaW4oJzsgJyk7XG4gICAgICB9LFxuXG4gICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG5hbWUpIHtcbiAgICAgICAgdmFyIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoJyhefDtcXFxccyopKCcgKyBuYW1lICsgJyk9KFteO10qKScpKTtcbiAgICAgICAgcmV0dXJuIChtYXRjaCA/IGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFszXSkgOiBudWxsKTtcbiAgICAgIH0sXG5cbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKG5hbWUpIHtcbiAgICAgICAgdGhpcy53cml0ZShuYW1lLCAnJywgRGF0ZS5ub3coKSAtIDg2NDAwMDAwKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnYgKHdlYiB3b3JrZXJzLCByZWFjdC1uYXRpdmUpIGxhY2sgbmVlZGVkIHN1cHBvcnQuXG4gIChmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZSgpIHt9LFxuICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZCgpIHsgcmV0dXJuIG51bGw7IH0sXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9XG4gICAgfTtcbiAgfSkoKVxuKTtcblxuXG4vKioqLyB9KSxcbi8qIDIxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbmZ1bmN0aW9uIEludGVyY2VwdG9yTWFuYWdlcigpIHtcbiAgdGhpcy5oYW5kbGVycyA9IFtdO1xufVxuXG4vKipcbiAqIEFkZCBhIG5ldyBpbnRlcmNlcHRvciB0byB0aGUgc3RhY2tcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdWxmaWxsZWQgVGhlIGZ1bmN0aW9uIHRvIGhhbmRsZSBgdGhlbmAgZm9yIGEgYFByb21pc2VgXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3RlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGByZWplY3RgIGZvciBhIGBQcm9taXNlYFxuICpcbiAqIEByZXR1cm4ge051bWJlcn0gQW4gSUQgdXNlZCB0byByZW1vdmUgaW50ZXJjZXB0b3IgbGF0ZXJcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS51c2UgPSBmdW5jdGlvbiB1c2UoZnVsZmlsbGVkLCByZWplY3RlZCkge1xuICB0aGlzLmhhbmRsZXJzLnB1c2goe1xuICAgIGZ1bGZpbGxlZDogZnVsZmlsbGVkLFxuICAgIHJlamVjdGVkOiByZWplY3RlZFxuICB9KTtcbiAgcmV0dXJuIHRoaXMuaGFuZGxlcnMubGVuZ3RoIC0gMTtcbn07XG5cbi8qKlxuICogUmVtb3ZlIGFuIGludGVyY2VwdG9yIGZyb20gdGhlIHN0YWNrXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGlkIFRoZSBJRCB0aGF0IHdhcyByZXR1cm5lZCBieSBgdXNlYFxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmVqZWN0ID0gZnVuY3Rpb24gZWplY3QoaWQpIHtcbiAgaWYgKHRoaXMuaGFuZGxlcnNbaWRdKSB7XG4gICAgdGhpcy5oYW5kbGVyc1tpZF0gPSBudWxsO1xuICB9XG59O1xuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbGwgdGhlIHJlZ2lzdGVyZWQgaW50ZXJjZXB0b3JzXG4gKlxuICogVGhpcyBtZXRob2QgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCBmb3Igc2tpcHBpbmcgb3ZlciBhbnlcbiAqIGludGVyY2VwdG9ycyB0aGF0IG1heSBoYXZlIGJlY29tZSBgbnVsbGAgY2FsbGluZyBgZWplY3RgLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIGludGVyY2VwdG9yXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIGZvckVhY2goZm4pIHtcbiAgdXRpbHMuZm9yRWFjaCh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbiBmb3JFYWNoSGFuZGxlcihoKSB7XG4gICAgaWYgKGggIT09IG51bGwpIHtcbiAgICAgIGZuKGgpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEludGVyY2VwdG9yTWFuYWdlcjtcblxuXG4vKioqLyB9KSxcbi8qIDIyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG52YXIgdHJhbnNmb3JtRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xudmFyIGlzQ2FuY2VsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcbnZhciBkZWZhdWx0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG52YXIgaXNBYnNvbHV0ZVVSTCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xudmFyIGNvbWJpbmVVUkxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cbi8qKlxuICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC5cbiAqL1xuZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpIHtcbiAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuICAgIGNvbmZpZy5jYW5jZWxUb2tlbi50aHJvd0lmUmVxdWVzdGVkKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBEaXNwYXRjaCBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlciB1c2luZyB0aGUgY29uZmlndXJlZCBhZGFwdGVyLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyB0aGF0IGlzIHRvIGJlIHVzZWQgZm9yIHRoZSByZXF1ZXN0XG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gVGhlIFByb21pc2UgdG8gYmUgZnVsZmlsbGVkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGlzcGF0Y2hSZXF1ZXN0KGNvbmZpZykge1xuICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgLy8gU3VwcG9ydCBiYXNlVVJMIGNvbmZpZ1xuICBpZiAoY29uZmlnLmJhc2VVUkwgJiYgIWlzQWJzb2x1dGVVUkwoY29uZmlnLnVybCkpIHtcbiAgICBjb25maWcudXJsID0gY29tYmluZVVSTHMoY29uZmlnLmJhc2VVUkwsIGNvbmZpZy51cmwpO1xuICB9XG5cbiAgLy8gRW5zdXJlIGhlYWRlcnMgZXhpc3RcbiAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcblxuICAvLyBUcmFuc2Zvcm0gcmVxdWVzdCBkYXRhXG4gIGNvbmZpZy5kYXRhID0gdHJhbnNmb3JtRGF0YShcbiAgICBjb25maWcuZGF0YSxcbiAgICBjb25maWcuaGVhZGVycyxcbiAgICBjb25maWcudHJhbnNmb3JtUmVxdWVzdFxuICApO1xuXG4gIC8vIEZsYXR0ZW4gaGVhZGVyc1xuICBjb25maWcuaGVhZGVycyA9IHV0aWxzLm1lcmdlKFxuICAgIGNvbmZpZy5oZWFkZXJzLmNvbW1vbiB8fCB7fSxcbiAgICBjb25maWcuaGVhZGVyc1tjb25maWcubWV0aG9kXSB8fCB7fSxcbiAgICBjb25maWcuaGVhZGVycyB8fCB7fVxuICApO1xuXG4gIHV0aWxzLmZvckVhY2goXG4gICAgWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAncG9zdCcsICdwdXQnLCAncGF0Y2gnLCAnY29tbW9uJ10sXG4gICAgZnVuY3Rpb24gY2xlYW5IZWFkZXJDb25maWcobWV0aG9kKSB7XG4gICAgICBkZWxldGUgY29uZmlnLmhlYWRlcnNbbWV0aG9kXTtcbiAgICB9XG4gICk7XG5cbiAgdmFyIGFkYXB0ZXIgPSBjb25maWcuYWRhcHRlciB8fCBkZWZhdWx0cy5hZGFwdGVyO1xuXG4gIHJldHVybiBhZGFwdGVyKGNvbmZpZykudGhlbihmdW5jdGlvbiBvbkFkYXB0ZXJSZXNvbHV0aW9uKHJlc3BvbnNlKSB7XG4gICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcbiAgICByZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YShcbiAgICAgIHJlc3BvbnNlLmRhdGEsXG4gICAgICByZXNwb25zZS5oZWFkZXJzLFxuICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlXG4gICAgKTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfSwgZnVuY3Rpb24gb25BZGFwdGVyUmVqZWN0aW9uKHJlYXNvbikge1xuICAgIGlmICghaXNDYW5jZWwocmVhc29uKSkge1xuICAgICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gICAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuICAgICAgaWYgKHJlYXNvbiAmJiByZWFzb24ucmVzcG9uc2UpIHtcbiAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhLFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZS5oZWFkZXJzLFxuICAgICAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZWFzb24pO1xuICB9KTtcbn07XG5cblxuLyoqKi8gfSksXG4vKiAyMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG4vKipcbiAqIFRyYW5zZm9ybSB0aGUgZGF0YSBmb3IgYSByZXF1ZXN0IG9yIGEgcmVzcG9uc2VcbiAqXG4gKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGRhdGEgVGhlIGRhdGEgdG8gYmUgdHJhbnNmb3JtZWRcbiAqIEBwYXJhbSB7QXJyYXl9IGhlYWRlcnMgVGhlIGhlYWRlcnMgZm9yIHRoZSByZXF1ZXN0IG9yIHJlc3BvbnNlXG4gKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufSBmbnMgQSBzaW5nbGUgZnVuY3Rpb24gb3IgQXJyYXkgb2YgZnVuY3Rpb25zXG4gKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdGluZyB0cmFuc2Zvcm1lZCBkYXRhXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdHJhbnNmb3JtRGF0YShkYXRhLCBoZWFkZXJzLCBmbnMpIHtcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIHV0aWxzLmZvckVhY2goZm5zLCBmdW5jdGlvbiB0cmFuc2Zvcm0oZm4pIHtcbiAgICBkYXRhID0gZm4oZGF0YSwgaGVhZGVycyk7XG4gIH0pO1xuXG4gIHJldHVybiBkYXRhO1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDI0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0Fic29sdXRlVVJMKHVybCkge1xuICAvLyBBIFVSTCBpcyBjb25zaWRlcmVkIGFic29sdXRlIGlmIGl0IGJlZ2lucyB3aXRoIFwiPHNjaGVtZT46Ly9cIiBvciBcIi8vXCIgKHByb3RvY29sLXJlbGF0aXZlIFVSTCkuXG4gIC8vIFJGQyAzOTg2IGRlZmluZXMgc2NoZW1lIG5hbWUgYXMgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIGJlZ2lubmluZyB3aXRoIGEgbGV0dGVyIGFuZCBmb2xsb3dlZFxuICAvLyBieSBhbnkgY29tYmluYXRpb24gb2YgbGV0dGVycywgZGlnaXRzLCBwbHVzLCBwZXJpb2QsIG9yIGh5cGhlbi5cbiAgcmV0dXJuIC9eKFthLXpdW2EtelxcZFxcK1xcLVxcLl0qOik/XFwvXFwvL2kudGVzdCh1cmwpO1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDI1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBVUkwgYnkgY29tYmluaW5nIHRoZSBzcGVjaWZpZWQgVVJMc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVVJMIFRoZSByZWxhdGl2ZSBVUkxcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjb21iaW5lZCBVUkxcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjb21iaW5lVVJMcyhiYXNlVVJMLCByZWxhdGl2ZVVSTCkge1xuICByZXR1cm4gcmVsYXRpdmVVUkxcbiAgICA/IGJhc2VVUkwucmVwbGFjZSgvXFwvKyQvLCAnJykgKyAnLycgKyByZWxhdGl2ZVVSTC5yZXBsYWNlKC9eXFwvKy8sICcnKVxuICAgIDogYmFzZVVSTDtcbn07XG5cblxuLyoqKi8gfSksXG4vKiAyNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgQ2FuY2VsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxuLyoqXG4gKiBBIGBDYW5jZWxUb2tlbmAgaXMgYW4gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVxdWVzdCBjYW5jZWxsYXRpb24gb2YgYW4gb3BlcmF0aW9uLlxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gZXhlY3V0b3IgVGhlIGV4ZWN1dG9yIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBDYW5jZWxUb2tlbihleGVjdXRvcikge1xuICBpZiAodHlwZW9mIGV4ZWN1dG9yICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZXhlY3V0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uLicpO1xuICB9XG5cbiAgdmFyIHJlc29sdmVQcm9taXNlO1xuICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiBwcm9taXNlRXhlY3V0b3IocmVzb2x2ZSkge1xuICAgIHJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTtcbiAgfSk7XG5cbiAgdmFyIHRva2VuID0gdGhpcztcbiAgZXhlY3V0b3IoZnVuY3Rpb24gY2FuY2VsKG1lc3NhZ2UpIHtcbiAgICBpZiAodG9rZW4ucmVhc29uKSB7XG4gICAgICAvLyBDYW5jZWxsYXRpb24gaGFzIGFscmVhZHkgYmVlbiByZXF1ZXN0ZWRcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0b2tlbi5yZWFzb24gPSBuZXcgQ2FuY2VsKG1lc3NhZ2UpO1xuICAgIHJlc29sdmVQcm9taXNlKHRva2VuLnJlYXNvbik7XG4gIH0pO1xufVxuXG4vKipcbiAqIFRocm93cyBhIGBDYW5jZWxgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gKi9cbkNhbmNlbFRva2VuLnByb3RvdHlwZS50aHJvd0lmUmVxdWVzdGVkID0gZnVuY3Rpb24gdGhyb3dJZlJlcXVlc3RlZCgpIHtcbiAgaWYgKHRoaXMucmVhc29uKSB7XG4gICAgdGhyb3cgdGhpcy5yZWFzb247XG4gIH1cbn07XG5cbi8qKlxuICogUmV0dXJucyBhbiBvYmplY3QgdGhhdCBjb250YWlucyBhIG5ldyBgQ2FuY2VsVG9rZW5gIGFuZCBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gY2FsbGVkLFxuICogY2FuY2VscyB0aGUgYENhbmNlbFRva2VuYC5cbiAqL1xuQ2FuY2VsVG9rZW4uc291cmNlID0gZnVuY3Rpb24gc291cmNlKCkge1xuICB2YXIgY2FuY2VsO1xuICB2YXIgdG9rZW4gPSBuZXcgQ2FuY2VsVG9rZW4oZnVuY3Rpb24gZXhlY3V0b3IoYykge1xuICAgIGNhbmNlbCA9IGM7XG4gIH0pO1xuICByZXR1cm4ge1xuICAgIHRva2VuOiB0b2tlbixcbiAgICBjYW5jZWw6IGNhbmNlbFxuICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYW5jZWxUb2tlbjtcblxuXG4vKioqLyB9KSxcbi8qIDI3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbi8qKlxuICogU3ludGFjdGljIHN1Z2FyIGZvciBpbnZva2luZyBhIGZ1bmN0aW9uIGFuZCBleHBhbmRpbmcgYW4gYXJyYXkgZm9yIGFyZ3VtZW50cy5cbiAqXG4gKiBDb21tb24gdXNlIGNhc2Ugd291bGQgYmUgdG8gdXNlIGBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHlgLlxuICpcbiAqICBgYGBqc1xuICogIGZ1bmN0aW9uIGYoeCwgeSwgeikge31cbiAqICB2YXIgYXJncyA9IFsxLCAyLCAzXTtcbiAqICBmLmFwcGx5KG51bGwsIGFyZ3MpO1xuICogIGBgYFxuICpcbiAqIFdpdGggYHNwcmVhZGAgdGhpcyBleGFtcGxlIGNhbiBiZSByZS13cml0dGVuLlxuICpcbiAqICBgYGBqc1xuICogIHNwcmVhZChmdW5jdGlvbih4LCB5LCB6KSB7fSkoWzEsIDIsIDNdKTtcbiAqICBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNwcmVhZChjYWxsYmFjaykge1xuICByZXR1cm4gZnVuY3Rpb24gd3JhcChhcnIpIHtcbiAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkobnVsbCwgYXJyKTtcbiAgfTtcbn07XG5cblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBkc3QvYnVuZGxlLmpzIiwiIFx0ZnVuY3Rpb24gaG90RGlzcG9zZUNodW5rKGNodW5rSWQpIHtcbiBcdFx0ZGVsZXRlIGluc3RhbGxlZENodW5rc1tjaHVua0lkXTtcbiBcdH1cbiBcdHZhciBwYXJlbnRIb3RVcGRhdGVDYWxsYmFjayA9IHdpbmRvd1tcIndlYnBhY2tIb3RVcGRhdGVcIl07XG4gXHR3aW5kb3dbXCJ3ZWJwYWNrSG90VXBkYXRlXCJdID0gXHJcbiBcdGZ1bmN0aW9uIHdlYnBhY2tIb3RVcGRhdGVDYWxsYmFjayhjaHVua0lkLCBtb3JlTW9kdWxlcykgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbiBcdFx0aG90QWRkVXBkYXRlQ2h1bmsoY2h1bmtJZCwgbW9yZU1vZHVsZXMpO1xyXG4gXHRcdGlmKHBhcmVudEhvdFVwZGF0ZUNhbGxiYWNrKSBwYXJlbnRIb3RVcGRhdGVDYWxsYmFjayhjaHVua0lkLCBtb3JlTW9kdWxlcyk7XHJcbiBcdH0gO1xyXG4gXHRcclxuIFx0ZnVuY3Rpb24gaG90RG93bmxvYWRVcGRhdGVDaHVuayhjaHVua0lkKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuIFx0XHR2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcclxuIFx0XHR2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcclxuIFx0XHRzY3JpcHQudHlwZSA9IFwidGV4dC9qYXZhc2NyaXB0XCI7XHJcbiBcdFx0c2NyaXB0LmNoYXJzZXQgPSBcInV0Zi04XCI7XHJcbiBcdFx0c2NyaXB0LnNyYyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBjaHVua0lkICsgXCIuXCIgKyBob3RDdXJyZW50SGFzaCArIFwiLmhvdC11cGRhdGUuanNcIjtcclxuIFx0XHQ7XHJcbiBcdFx0aGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG4gXHR9XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiBob3REb3dubG9hZE1hbmlmZXN0KHJlcXVlc3RUaW1lb3V0KSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuIFx0XHRyZXF1ZXN0VGltZW91dCA9IHJlcXVlc3RUaW1lb3V0IHx8IDEwMDAwO1xyXG4gXHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuIFx0XHRcdGlmKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCA9PT0gXCJ1bmRlZmluZWRcIilcclxuIFx0XHRcdFx0cmV0dXJuIHJlamVjdChuZXcgRXJyb3IoXCJObyBicm93c2VyIHN1cHBvcnRcIikpO1xyXG4gXHRcdFx0dHJ5IHtcclxuIFx0XHRcdFx0dmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuIFx0XHRcdFx0dmFyIHJlcXVlc3RQYXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIGhvdEN1cnJlbnRIYXNoICsgXCIuaG90LXVwZGF0ZS5qc29uXCI7XHJcbiBcdFx0XHRcdHJlcXVlc3Qub3BlbihcIkdFVFwiLCByZXF1ZXN0UGF0aCwgdHJ1ZSk7XHJcbiBcdFx0XHRcdHJlcXVlc3QudGltZW91dCA9IHJlcXVlc3RUaW1lb3V0O1xyXG4gXHRcdFx0XHRyZXF1ZXN0LnNlbmQobnVsbCk7XHJcbiBcdFx0XHR9IGNhdGNoKGVycikge1xyXG4gXHRcdFx0XHRyZXR1cm4gcmVqZWN0KGVycik7XHJcbiBcdFx0XHR9XHJcbiBcdFx0XHRyZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gXHRcdFx0XHRpZihyZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQpIHJldHVybjtcclxuIFx0XHRcdFx0aWYocmVxdWVzdC5zdGF0dXMgPT09IDApIHtcclxuIFx0XHRcdFx0XHQvLyB0aW1lb3V0XHJcbiBcdFx0XHRcdFx0cmVqZWN0KG5ldyBFcnJvcihcIk1hbmlmZXN0IHJlcXVlc3QgdG8gXCIgKyByZXF1ZXN0UGF0aCArIFwiIHRpbWVkIG91dC5cIikpO1xyXG4gXHRcdFx0XHR9IGVsc2UgaWYocmVxdWVzdC5zdGF0dXMgPT09IDQwNCkge1xyXG4gXHRcdFx0XHRcdC8vIG5vIHVwZGF0ZSBhdmFpbGFibGVcclxuIFx0XHRcdFx0XHRyZXNvbHZlKCk7XHJcbiBcdFx0XHRcdH0gZWxzZSBpZihyZXF1ZXN0LnN0YXR1cyAhPT0gMjAwICYmIHJlcXVlc3Quc3RhdHVzICE9PSAzMDQpIHtcclxuIFx0XHRcdFx0XHQvLyBvdGhlciBmYWlsdXJlXHJcbiBcdFx0XHRcdFx0cmVqZWN0KG5ldyBFcnJvcihcIk1hbmlmZXN0IHJlcXVlc3QgdG8gXCIgKyByZXF1ZXN0UGF0aCArIFwiIGZhaWxlZC5cIikpO1xyXG4gXHRcdFx0XHR9IGVsc2Uge1xyXG4gXHRcdFx0XHRcdC8vIHN1Y2Nlc3NcclxuIFx0XHRcdFx0XHR0cnkge1xyXG4gXHRcdFx0XHRcdFx0dmFyIHVwZGF0ZSA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xyXG4gXHRcdFx0XHRcdH0gY2F0Y2goZSkge1xyXG4gXHRcdFx0XHRcdFx0cmVqZWN0KGUpO1xyXG4gXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG4gXHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0XHRyZXNvbHZlKHVwZGF0ZSk7XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdH07XHJcbiBcdFx0fSk7XHJcbiBcdH1cclxuXG4gXHRcclxuIFx0XHJcbiBcdHZhciBob3RBcHBseU9uVXBkYXRlID0gdHJ1ZTtcclxuIFx0dmFyIGhvdEN1cnJlbnRIYXNoID0gXCJiOTc0NDJjZWFjZWJmZDBiNzEyZFwiOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXHJcbiBcdHZhciBob3RSZXF1ZXN0VGltZW91dCA9IDEwMDAwO1xyXG4gXHR2YXIgaG90Q3VycmVudE1vZHVsZURhdGEgPSB7fTtcclxuIFx0dmFyIGhvdEN1cnJlbnRDaGlsZE1vZHVsZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gXHR2YXIgaG90Q3VycmVudFBhcmVudHMgPSBbXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gXHR2YXIgaG90Q3VycmVudFBhcmVudHNUZW1wID0gW107IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcclxuIFx0XHJcbiBcdGZ1bmN0aW9uIGhvdENyZWF0ZVJlcXVpcmUobW9kdWxlSWQpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gXHRcdHZhciBtZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4gXHRcdGlmKCFtZSkgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX187XHJcbiBcdFx0dmFyIGZuID0gZnVuY3Rpb24ocmVxdWVzdCkge1xyXG4gXHRcdFx0aWYobWUuaG90LmFjdGl2ZSkge1xyXG4gXHRcdFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW3JlcXVlc3RdKSB7XHJcbiBcdFx0XHRcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1tyZXF1ZXN0XS5wYXJlbnRzLmluZGV4T2YobW9kdWxlSWQpIDwgMClcclxuIFx0XHRcdFx0XHRcdGluc3RhbGxlZE1vZHVsZXNbcmVxdWVzdF0ucGFyZW50cy5wdXNoKG1vZHVsZUlkKTtcclxuIFx0XHRcdFx0fSBlbHNlIHtcclxuIFx0XHRcdFx0XHRob3RDdXJyZW50UGFyZW50cyA9IFttb2R1bGVJZF07XHJcbiBcdFx0XHRcdFx0aG90Q3VycmVudENoaWxkTW9kdWxlID0gcmVxdWVzdDtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRpZihtZS5jaGlsZHJlbi5pbmRleE9mKHJlcXVlc3QpIDwgMClcclxuIFx0XHRcdFx0XHRtZS5jaGlsZHJlbi5wdXNoKHJlcXVlc3QpO1xyXG4gXHRcdFx0fSBlbHNlIHtcclxuIFx0XHRcdFx0Y29uc29sZS53YXJuKFwiW0hNUl0gdW5leHBlY3RlZCByZXF1aXJlKFwiICsgcmVxdWVzdCArIFwiKSBmcm9tIGRpc3Bvc2VkIG1vZHVsZSBcIiArIG1vZHVsZUlkKTtcclxuIFx0XHRcdFx0aG90Q3VycmVudFBhcmVudHMgPSBbXTtcclxuIFx0XHRcdH1cclxuIFx0XHRcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKHJlcXVlc3QpO1xyXG4gXHRcdH07XHJcbiBcdFx0dmFyIE9iamVjdEZhY3RvcnkgPSBmdW5jdGlvbiBPYmplY3RGYWN0b3J5KG5hbWUpIHtcclxuIFx0XHRcdHJldHVybiB7XHJcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcclxuIFx0XHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcclxuIFx0XHRcdFx0XHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfX1tuYW1lXTtcclxuIFx0XHRcdFx0fSxcclxuIFx0XHRcdFx0c2V0OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gXHRcdFx0XHRcdF9fd2VicGFja19yZXF1aXJlX19bbmFtZV0gPSB2YWx1ZTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0fTtcclxuIFx0XHR9O1xyXG4gXHRcdGZvcih2YXIgbmFtZSBpbiBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XHJcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoX193ZWJwYWNrX3JlcXVpcmVfXywgbmFtZSkgJiYgbmFtZSAhPT0gXCJlXCIpIHtcclxuIFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCBuYW1lLCBPYmplY3RGYWN0b3J5KG5hbWUpKTtcclxuIFx0XHRcdH1cclxuIFx0XHR9XHJcbiBcdFx0Zm4uZSA9IGZ1bmN0aW9uKGNodW5rSWQpIHtcclxuIFx0XHRcdGlmKGhvdFN0YXR1cyA9PT0gXCJyZWFkeVwiKVxyXG4gXHRcdFx0XHRob3RTZXRTdGF0dXMoXCJwcmVwYXJlXCIpO1xyXG4gXHRcdFx0aG90Q2h1bmtzTG9hZGluZysrO1xyXG4gXHRcdFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18uZShjaHVua0lkKS50aGVuKGZpbmlzaENodW5rTG9hZGluZywgZnVuY3Rpb24oZXJyKSB7XHJcbiBcdFx0XHRcdGZpbmlzaENodW5rTG9hZGluZygpO1xyXG4gXHRcdFx0XHR0aHJvdyBlcnI7XHJcbiBcdFx0XHR9KTtcclxuIFx0XHJcbiBcdFx0XHRmdW5jdGlvbiBmaW5pc2hDaHVua0xvYWRpbmcoKSB7XHJcbiBcdFx0XHRcdGhvdENodW5rc0xvYWRpbmctLTtcclxuIFx0XHRcdFx0aWYoaG90U3RhdHVzID09PSBcInByZXBhcmVcIikge1xyXG4gXHRcdFx0XHRcdGlmKCFob3RXYWl0aW5nRmlsZXNNYXBbY2h1bmtJZF0pIHtcclxuIFx0XHRcdFx0XHRcdGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpO1xyXG4gXHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0XHRpZihob3RDaHVua3NMb2FkaW5nID09PSAwICYmIGhvdFdhaXRpbmdGaWxlcyA9PT0gMCkge1xyXG4gXHRcdFx0XHRcdFx0aG90VXBkYXRlRG93bmxvYWRlZCgpO1xyXG4gXHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0fVxyXG4gXHRcdH07XHJcbiBcdFx0cmV0dXJuIGZuO1xyXG4gXHR9XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiBob3RDcmVhdGVNb2R1bGUobW9kdWxlSWQpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gXHRcdHZhciBob3QgPSB7XHJcbiBcdFx0XHQvLyBwcml2YXRlIHN0dWZmXHJcbiBcdFx0XHRfYWNjZXB0ZWREZXBlbmRlbmNpZXM6IHt9LFxyXG4gXHRcdFx0X2RlY2xpbmVkRGVwZW5kZW5jaWVzOiB7fSxcclxuIFx0XHRcdF9zZWxmQWNjZXB0ZWQ6IGZhbHNlLFxyXG4gXHRcdFx0X3NlbGZEZWNsaW5lZDogZmFsc2UsXHJcbiBcdFx0XHRfZGlzcG9zZUhhbmRsZXJzOiBbXSxcclxuIFx0XHRcdF9tYWluOiBob3RDdXJyZW50Q2hpbGRNb2R1bGUgIT09IG1vZHVsZUlkLFxyXG4gXHRcclxuIFx0XHRcdC8vIE1vZHVsZSBBUElcclxuIFx0XHRcdGFjdGl2ZTogdHJ1ZSxcclxuIFx0XHRcdGFjY2VwdDogZnVuY3Rpb24oZGVwLCBjYWxsYmFjaykge1xyXG4gXHRcdFx0XHRpZih0eXBlb2YgZGVwID09PSBcInVuZGVmaW5lZFwiKVxyXG4gXHRcdFx0XHRcdGhvdC5fc2VsZkFjY2VwdGVkID0gdHJ1ZTtcclxuIFx0XHRcdFx0ZWxzZSBpZih0eXBlb2YgZGVwID09PSBcImZ1bmN0aW9uXCIpXHJcbiBcdFx0XHRcdFx0aG90Ll9zZWxmQWNjZXB0ZWQgPSBkZXA7XHJcbiBcdFx0XHRcdGVsc2UgaWYodHlwZW9mIGRlcCA9PT0gXCJvYmplY3RcIilcclxuIFx0XHRcdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVwLmxlbmd0aDsgaSsrKVxyXG4gXHRcdFx0XHRcdFx0aG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1tkZXBbaV1dID0gY2FsbGJhY2sgfHwgZnVuY3Rpb24oKSB7fTtcclxuIFx0XHRcdFx0ZWxzZVxyXG4gXHRcdFx0XHRcdGhvdC5fYWNjZXB0ZWREZXBlbmRlbmNpZXNbZGVwXSA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uKCkge307XHJcbiBcdFx0XHR9LFxyXG4gXHRcdFx0ZGVjbGluZTogZnVuY3Rpb24oZGVwKSB7XHJcbiBcdFx0XHRcdGlmKHR5cGVvZiBkZXAgPT09IFwidW5kZWZpbmVkXCIpXHJcbiBcdFx0XHRcdFx0aG90Ll9zZWxmRGVjbGluZWQgPSB0cnVlO1xyXG4gXHRcdFx0XHRlbHNlIGlmKHR5cGVvZiBkZXAgPT09IFwib2JqZWN0XCIpXHJcbiBcdFx0XHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlcC5sZW5ndGg7IGkrKylcclxuIFx0XHRcdFx0XHRcdGhvdC5fZGVjbGluZWREZXBlbmRlbmNpZXNbZGVwW2ldXSA9IHRydWU7XHJcbiBcdFx0XHRcdGVsc2VcclxuIFx0XHRcdFx0XHRob3QuX2RlY2xpbmVkRGVwZW5kZW5jaWVzW2RlcF0gPSB0cnVlO1xyXG4gXHRcdFx0fSxcclxuIFx0XHRcdGRpc3Bvc2U6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiBcdFx0XHRcdGhvdC5fZGlzcG9zZUhhbmRsZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gXHRcdFx0fSxcclxuIFx0XHRcdGFkZERpc3Bvc2VIYW5kbGVyOiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gXHRcdFx0XHRob3QuX2Rpc3Bvc2VIYW5kbGVycy5wdXNoKGNhbGxiYWNrKTtcclxuIFx0XHRcdH0sXHJcbiBcdFx0XHRyZW1vdmVEaXNwb3NlSGFuZGxlcjogZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuIFx0XHRcdFx0dmFyIGlkeCA9IGhvdC5fZGlzcG9zZUhhbmRsZXJzLmluZGV4T2YoY2FsbGJhY2spO1xyXG4gXHRcdFx0XHRpZihpZHggPj0gMCkgaG90Ll9kaXNwb3NlSGFuZGxlcnMuc3BsaWNlKGlkeCwgMSk7XHJcbiBcdFx0XHR9LFxyXG4gXHRcclxuIFx0XHRcdC8vIE1hbmFnZW1lbnQgQVBJXHJcbiBcdFx0XHRjaGVjazogaG90Q2hlY2ssXHJcbiBcdFx0XHRhcHBseTogaG90QXBwbHksXHJcbiBcdFx0XHRzdGF0dXM6IGZ1bmN0aW9uKGwpIHtcclxuIFx0XHRcdFx0aWYoIWwpIHJldHVybiBob3RTdGF0dXM7XHJcbiBcdFx0XHRcdGhvdFN0YXR1c0hhbmRsZXJzLnB1c2gobCk7XHJcbiBcdFx0XHR9LFxyXG4gXHRcdFx0YWRkU3RhdHVzSGFuZGxlcjogZnVuY3Rpb24obCkge1xyXG4gXHRcdFx0XHRob3RTdGF0dXNIYW5kbGVycy5wdXNoKGwpO1xyXG4gXHRcdFx0fSxcclxuIFx0XHRcdHJlbW92ZVN0YXR1c0hhbmRsZXI6IGZ1bmN0aW9uKGwpIHtcclxuIFx0XHRcdFx0dmFyIGlkeCA9IGhvdFN0YXR1c0hhbmRsZXJzLmluZGV4T2YobCk7XHJcbiBcdFx0XHRcdGlmKGlkeCA+PSAwKSBob3RTdGF0dXNIYW5kbGVycy5zcGxpY2UoaWR4LCAxKTtcclxuIFx0XHRcdH0sXHJcbiBcdFxyXG4gXHRcdFx0Ly9pbmhlcml0IGZyb20gcHJldmlvdXMgZGlzcG9zZSBjYWxsXHJcbiBcdFx0XHRkYXRhOiBob3RDdXJyZW50TW9kdWxlRGF0YVttb2R1bGVJZF1cclxuIFx0XHR9O1xyXG4gXHRcdGhvdEN1cnJlbnRDaGlsZE1vZHVsZSA9IHVuZGVmaW5lZDtcclxuIFx0XHRyZXR1cm4gaG90O1xyXG4gXHR9XHJcbiBcdFxyXG4gXHR2YXIgaG90U3RhdHVzSGFuZGxlcnMgPSBbXTtcclxuIFx0dmFyIGhvdFN0YXR1cyA9IFwiaWRsZVwiO1xyXG4gXHRcclxuIFx0ZnVuY3Rpb24gaG90U2V0U3RhdHVzKG5ld1N0YXR1cykge1xyXG4gXHRcdGhvdFN0YXR1cyA9IG5ld1N0YXR1cztcclxuIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgaG90U3RhdHVzSGFuZGxlcnMubGVuZ3RoOyBpKyspXHJcbiBcdFx0XHRob3RTdGF0dXNIYW5kbGVyc1tpXS5jYWxsKG51bGwsIG5ld1N0YXR1cyk7XHJcbiBcdH1cclxuIFx0XHJcbiBcdC8vIHdoaWxlIGRvd25sb2FkaW5nXHJcbiBcdHZhciBob3RXYWl0aW5nRmlsZXMgPSAwO1xyXG4gXHR2YXIgaG90Q2h1bmtzTG9hZGluZyA9IDA7XHJcbiBcdHZhciBob3RXYWl0aW5nRmlsZXNNYXAgPSB7fTtcclxuIFx0dmFyIGhvdFJlcXVlc3RlZEZpbGVzTWFwID0ge307XHJcbiBcdHZhciBob3RBdmFpbGFibGVGaWxlc01hcCA9IHt9O1xyXG4gXHR2YXIgaG90RGVmZXJyZWQ7XHJcbiBcdFxyXG4gXHQvLyBUaGUgdXBkYXRlIGluZm9cclxuIFx0dmFyIGhvdFVwZGF0ZSwgaG90VXBkYXRlTmV3SGFzaDtcclxuIFx0XHJcbiBcdGZ1bmN0aW9uIHRvTW9kdWxlSWQoaWQpIHtcclxuIFx0XHR2YXIgaXNOdW1iZXIgPSAoK2lkKSArIFwiXCIgPT09IGlkO1xyXG4gXHRcdHJldHVybiBpc051bWJlciA/ICtpZCA6IGlkO1xyXG4gXHR9XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiBob3RDaGVjayhhcHBseSkge1xyXG4gXHRcdGlmKGhvdFN0YXR1cyAhPT0gXCJpZGxlXCIpIHRocm93IG5ldyBFcnJvcihcImNoZWNrKCkgaXMgb25seSBhbGxvd2VkIGluIGlkbGUgc3RhdHVzXCIpO1xyXG4gXHRcdGhvdEFwcGx5T25VcGRhdGUgPSBhcHBseTtcclxuIFx0XHRob3RTZXRTdGF0dXMoXCJjaGVja1wiKTtcclxuIFx0XHRyZXR1cm4gaG90RG93bmxvYWRNYW5pZmVzdChob3RSZXF1ZXN0VGltZW91dCkudGhlbihmdW5jdGlvbih1cGRhdGUpIHtcclxuIFx0XHRcdGlmKCF1cGRhdGUpIHtcclxuIFx0XHRcdFx0aG90U2V0U3RhdHVzKFwiaWRsZVwiKTtcclxuIFx0XHRcdFx0cmV0dXJuIG51bGw7XHJcbiBcdFx0XHR9XHJcbiBcdFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcCA9IHt9O1xyXG4gXHRcdFx0aG90V2FpdGluZ0ZpbGVzTWFwID0ge307XHJcbiBcdFx0XHRob3RBdmFpbGFibGVGaWxlc01hcCA9IHVwZGF0ZS5jO1xyXG4gXHRcdFx0aG90VXBkYXRlTmV3SGFzaCA9IHVwZGF0ZS5oO1xyXG4gXHRcclxuIFx0XHRcdGhvdFNldFN0YXR1cyhcInByZXBhcmVcIik7XHJcbiBcdFx0XHR2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gXHRcdFx0XHRob3REZWZlcnJlZCA9IHtcclxuIFx0XHRcdFx0XHRyZXNvbHZlOiByZXNvbHZlLFxyXG4gXHRcdFx0XHRcdHJlamVjdDogcmVqZWN0XHJcbiBcdFx0XHRcdH07XHJcbiBcdFx0XHR9KTtcclxuIFx0XHRcdGhvdFVwZGF0ZSA9IHt9O1xyXG4gXHRcdFx0dmFyIGNodW5rSWQgPSAwO1xyXG4gXHRcdFx0eyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWxvbmUtYmxvY2tzXHJcbiBcdFx0XHRcdC8qZ2xvYmFscyBjaHVua0lkICovXHJcbiBcdFx0XHRcdGhvdEVuc3VyZVVwZGF0ZUNodW5rKGNodW5rSWQpO1xyXG4gXHRcdFx0fVxyXG4gXHRcdFx0aWYoaG90U3RhdHVzID09PSBcInByZXBhcmVcIiAmJiBob3RDaHVua3NMb2FkaW5nID09PSAwICYmIGhvdFdhaXRpbmdGaWxlcyA9PT0gMCkge1xyXG4gXHRcdFx0XHRob3RVcGRhdGVEb3dubG9hZGVkKCk7XHJcbiBcdFx0XHR9XHJcbiBcdFx0XHRyZXR1cm4gcHJvbWlzZTtcclxuIFx0XHR9KTtcclxuIFx0fVxyXG4gXHRcclxuIFx0ZnVuY3Rpb24gaG90QWRkVXBkYXRlQ2h1bmsoY2h1bmtJZCwgbW9yZU1vZHVsZXMpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xyXG4gXHRcdGlmKCFob3RBdmFpbGFibGVGaWxlc01hcFtjaHVua0lkXSB8fCAhaG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0pXHJcbiBcdFx0XHRyZXR1cm47XHJcbiBcdFx0aG90UmVxdWVzdGVkRmlsZXNNYXBbY2h1bmtJZF0gPSBmYWxzZTtcclxuIFx0XHRmb3IodmFyIG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XHJcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xyXG4gXHRcdFx0XHRob3RVcGRhdGVbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xyXG4gXHRcdFx0fVxyXG4gXHRcdH1cclxuIFx0XHRpZigtLWhvdFdhaXRpbmdGaWxlcyA9PT0gMCAmJiBob3RDaHVua3NMb2FkaW5nID09PSAwKSB7XHJcbiBcdFx0XHRob3RVcGRhdGVEb3dubG9hZGVkKCk7XHJcbiBcdFx0fVxyXG4gXHR9XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiBob3RFbnN1cmVVcGRhdGVDaHVuayhjaHVua0lkKSB7XHJcbiBcdFx0aWYoIWhvdEF2YWlsYWJsZUZpbGVzTWFwW2NodW5rSWRdKSB7XHJcbiBcdFx0XHRob3RXYWl0aW5nRmlsZXNNYXBbY2h1bmtJZF0gPSB0cnVlO1xyXG4gXHRcdH0gZWxzZSB7XHJcbiBcdFx0XHRob3RSZXF1ZXN0ZWRGaWxlc01hcFtjaHVua0lkXSA9IHRydWU7XHJcbiBcdFx0XHRob3RXYWl0aW5nRmlsZXMrKztcclxuIFx0XHRcdGhvdERvd25sb2FkVXBkYXRlQ2h1bmsoY2h1bmtJZCk7XHJcbiBcdFx0fVxyXG4gXHR9XHJcbiBcdFxyXG4gXHRmdW5jdGlvbiBob3RVcGRhdGVEb3dubG9hZGVkKCkge1xyXG4gXHRcdGhvdFNldFN0YXR1cyhcInJlYWR5XCIpO1xyXG4gXHRcdHZhciBkZWZlcnJlZCA9IGhvdERlZmVycmVkO1xyXG4gXHRcdGhvdERlZmVycmVkID0gbnVsbDtcclxuIFx0XHRpZighZGVmZXJyZWQpIHJldHVybjtcclxuIFx0XHRpZihob3RBcHBseU9uVXBkYXRlKSB7XHJcbiBcdFx0XHQvLyBXcmFwIGRlZmVycmVkIG9iamVjdCBpbiBQcm9taXNlIHRvIG1hcmsgaXQgYXMgYSB3ZWxsLWhhbmRsZWQgUHJvbWlzZSB0b1xyXG4gXHRcdFx0Ly8gYXZvaWQgdHJpZ2dlcmluZyB1bmNhdWdodCBleGNlcHRpb24gd2FybmluZyBpbiBDaHJvbWUuXHJcbiBcdFx0XHQvLyBTZWUgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDY1NjY2XHJcbiBcdFx0XHRQcm9taXNlLnJlc29sdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gXHRcdFx0XHRyZXR1cm4gaG90QXBwbHkoaG90QXBwbHlPblVwZGF0ZSk7XHJcbiBcdFx0XHR9KS50aGVuKFxyXG4gXHRcdFx0XHRmdW5jdGlvbihyZXN1bHQpIHtcclxuIFx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdCk7XHJcbiBcdFx0XHRcdH0sXHJcbiBcdFx0XHRcdGZ1bmN0aW9uKGVycikge1xyXG4gXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdChlcnIpO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHQpO1xyXG4gXHRcdH0gZWxzZSB7XHJcbiBcdFx0XHR2YXIgb3V0ZGF0ZWRNb2R1bGVzID0gW107XHJcbiBcdFx0XHRmb3IodmFyIGlkIGluIGhvdFVwZGF0ZSkge1xyXG4gXHRcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaG90VXBkYXRlLCBpZCkpIHtcclxuIFx0XHRcdFx0XHRvdXRkYXRlZE1vZHVsZXMucHVzaCh0b01vZHVsZUlkKGlkKSk7XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdH1cclxuIFx0XHRcdGRlZmVycmVkLnJlc29sdmUob3V0ZGF0ZWRNb2R1bGVzKTtcclxuIFx0XHR9XHJcbiBcdH1cclxuIFx0XHJcbiBcdGZ1bmN0aW9uIGhvdEFwcGx5KG9wdGlvbnMpIHtcclxuIFx0XHRpZihob3RTdGF0dXMgIT09IFwicmVhZHlcIikgdGhyb3cgbmV3IEVycm9yKFwiYXBwbHkoKSBpcyBvbmx5IGFsbG93ZWQgaW4gcmVhZHkgc3RhdHVzXCIpO1xyXG4gXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gXHRcclxuIFx0XHR2YXIgY2I7XHJcbiBcdFx0dmFyIGk7XHJcbiBcdFx0dmFyIGo7XHJcbiBcdFx0dmFyIG1vZHVsZTtcclxuIFx0XHR2YXIgbW9kdWxlSWQ7XHJcbiBcdFxyXG4gXHRcdGZ1bmN0aW9uIGdldEFmZmVjdGVkU3R1ZmYodXBkYXRlTW9kdWxlSWQpIHtcclxuIFx0XHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbdXBkYXRlTW9kdWxlSWRdO1xyXG4gXHRcdFx0dmFyIG91dGRhdGVkRGVwZW5kZW5jaWVzID0ge307XHJcbiBcdFxyXG4gXHRcdFx0dmFyIHF1ZXVlID0gb3V0ZGF0ZWRNb2R1bGVzLnNsaWNlKCkubWFwKGZ1bmN0aW9uKGlkKSB7XHJcbiBcdFx0XHRcdHJldHVybiB7XHJcbiBcdFx0XHRcdFx0Y2hhaW46IFtpZF0sXHJcbiBcdFx0XHRcdFx0aWQ6IGlkXHJcbiBcdFx0XHRcdH07XHJcbiBcdFx0XHR9KTtcclxuIFx0XHRcdHdoaWxlKHF1ZXVlLmxlbmd0aCA+IDApIHtcclxuIFx0XHRcdFx0dmFyIHF1ZXVlSXRlbSA9IHF1ZXVlLnBvcCgpO1xyXG4gXHRcdFx0XHR2YXIgbW9kdWxlSWQgPSBxdWV1ZUl0ZW0uaWQ7XHJcbiBcdFx0XHRcdHZhciBjaGFpbiA9IHF1ZXVlSXRlbS5jaGFpbjtcclxuIFx0XHRcdFx0bW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbiBcdFx0XHRcdGlmKCFtb2R1bGUgfHwgbW9kdWxlLmhvdC5fc2VsZkFjY2VwdGVkKVxyXG4gXHRcdFx0XHRcdGNvbnRpbnVlO1xyXG4gXHRcdFx0XHRpZihtb2R1bGUuaG90Ll9zZWxmRGVjbGluZWQpIHtcclxuIFx0XHRcdFx0XHRyZXR1cm4ge1xyXG4gXHRcdFx0XHRcdFx0dHlwZTogXCJzZWxmLWRlY2xpbmVkXCIsXHJcbiBcdFx0XHRcdFx0XHRjaGFpbjogY2hhaW4sXHJcbiBcdFx0XHRcdFx0XHRtb2R1bGVJZDogbW9kdWxlSWRcclxuIFx0XHRcdFx0XHR9O1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHRcdGlmKG1vZHVsZS5ob3QuX21haW4pIHtcclxuIFx0XHRcdFx0XHRyZXR1cm4ge1xyXG4gXHRcdFx0XHRcdFx0dHlwZTogXCJ1bmFjY2VwdGVkXCIsXHJcbiBcdFx0XHRcdFx0XHRjaGFpbjogY2hhaW4sXHJcbiBcdFx0XHRcdFx0XHRtb2R1bGVJZDogbW9kdWxlSWRcclxuIFx0XHRcdFx0XHR9O1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtb2R1bGUucGFyZW50cy5sZW5ndGg7IGkrKykge1xyXG4gXHRcdFx0XHRcdHZhciBwYXJlbnRJZCA9IG1vZHVsZS5wYXJlbnRzW2ldO1xyXG4gXHRcdFx0XHRcdHZhciBwYXJlbnQgPSBpbnN0YWxsZWRNb2R1bGVzW3BhcmVudElkXTtcclxuIFx0XHRcdFx0XHRpZighcGFyZW50KSBjb250aW51ZTtcclxuIFx0XHRcdFx0XHRpZihwYXJlbnQuaG90Ll9kZWNsaW5lZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pIHtcclxuIFx0XHRcdFx0XHRcdHJldHVybiB7XHJcbiBcdFx0XHRcdFx0XHRcdHR5cGU6IFwiZGVjbGluZWRcIixcclxuIFx0XHRcdFx0XHRcdFx0Y2hhaW46IGNoYWluLmNvbmNhdChbcGFyZW50SWRdKSxcclxuIFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxyXG4gXHRcdFx0XHRcdFx0XHRwYXJlbnRJZDogcGFyZW50SWRcclxuIFx0XHRcdFx0XHRcdH07XHJcbiBcdFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRcdGlmKG91dGRhdGVkTW9kdWxlcy5pbmRleE9mKHBhcmVudElkKSA+PSAwKSBjb250aW51ZTtcclxuIFx0XHRcdFx0XHRpZihwYXJlbnQuaG90Ll9hY2NlcHRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0pIHtcclxuIFx0XHRcdFx0XHRcdGlmKCFvdXRkYXRlZERlcGVuZGVuY2llc1twYXJlbnRJZF0pXHJcbiBcdFx0XHRcdFx0XHRcdG91dGRhdGVkRGVwZW5kZW5jaWVzW3BhcmVudElkXSA9IFtdO1xyXG4gXHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdLCBbbW9kdWxlSWRdKTtcclxuIFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xyXG4gXHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0XHRkZWxldGUgb3V0ZGF0ZWREZXBlbmRlbmNpZXNbcGFyZW50SWRdO1xyXG4gXHRcdFx0XHRcdG91dGRhdGVkTW9kdWxlcy5wdXNoKHBhcmVudElkKTtcclxuIFx0XHRcdFx0XHRxdWV1ZS5wdXNoKHtcclxuIFx0XHRcdFx0XHRcdGNoYWluOiBjaGFpbi5jb25jYXQoW3BhcmVudElkXSksXHJcbiBcdFx0XHRcdFx0XHRpZDogcGFyZW50SWRcclxuIFx0XHRcdFx0XHR9KTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0fVxyXG4gXHRcclxuIFx0XHRcdHJldHVybiB7XHJcbiBcdFx0XHRcdHR5cGU6IFwiYWNjZXB0ZWRcIixcclxuIFx0XHRcdFx0bW9kdWxlSWQ6IHVwZGF0ZU1vZHVsZUlkLFxyXG4gXHRcdFx0XHRvdXRkYXRlZE1vZHVsZXM6IG91dGRhdGVkTW9kdWxlcyxcclxuIFx0XHRcdFx0b3V0ZGF0ZWREZXBlbmRlbmNpZXM6IG91dGRhdGVkRGVwZW5kZW5jaWVzXHJcbiBcdFx0XHR9O1xyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0ZnVuY3Rpb24gYWRkQWxsVG9TZXQoYSwgYikge1xyXG4gXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGIubGVuZ3RoOyBpKyspIHtcclxuIFx0XHRcdFx0dmFyIGl0ZW0gPSBiW2ldO1xyXG4gXHRcdFx0XHRpZihhLmluZGV4T2YoaXRlbSkgPCAwKVxyXG4gXHRcdFx0XHRcdGEucHVzaChpdGVtKTtcclxuIFx0XHRcdH1cclxuIFx0XHR9XHJcbiBcdFxyXG4gXHRcdC8vIGF0IGJlZ2luIGFsbCB1cGRhdGVzIG1vZHVsZXMgYXJlIG91dGRhdGVkXHJcbiBcdFx0Ly8gdGhlIFwib3V0ZGF0ZWRcIiBzdGF0dXMgY2FuIHByb3BhZ2F0ZSB0byBwYXJlbnRzIGlmIHRoZXkgZG9uJ3QgYWNjZXB0IHRoZSBjaGlsZHJlblxyXG4gXHRcdHZhciBvdXRkYXRlZERlcGVuZGVuY2llcyA9IHt9O1xyXG4gXHRcdHZhciBvdXRkYXRlZE1vZHVsZXMgPSBbXTtcclxuIFx0XHR2YXIgYXBwbGllZFVwZGF0ZSA9IHt9O1xyXG4gXHRcclxuIFx0XHR2YXIgd2FyblVuZXhwZWN0ZWRSZXF1aXJlID0gZnVuY3Rpb24gd2FyblVuZXhwZWN0ZWRSZXF1aXJlKCkge1xyXG4gXHRcdFx0Y29uc29sZS53YXJuKFwiW0hNUl0gdW5leHBlY3RlZCByZXF1aXJlKFwiICsgcmVzdWx0Lm1vZHVsZUlkICsgXCIpIHRvIGRpc3Bvc2VkIG1vZHVsZVwiKTtcclxuIFx0XHR9O1xyXG4gXHRcclxuIFx0XHRmb3IodmFyIGlkIGluIGhvdFVwZGF0ZSkge1xyXG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGhvdFVwZGF0ZSwgaWQpKSB7XHJcbiBcdFx0XHRcdG1vZHVsZUlkID0gdG9Nb2R1bGVJZChpZCk7XHJcbiBcdFx0XHRcdHZhciByZXN1bHQ7XHJcbiBcdFx0XHRcdGlmKGhvdFVwZGF0ZVtpZF0pIHtcclxuIFx0XHRcdFx0XHRyZXN1bHQgPSBnZXRBZmZlY3RlZFN0dWZmKG1vZHVsZUlkKTtcclxuIFx0XHRcdFx0fSBlbHNlIHtcclxuIFx0XHRcdFx0XHRyZXN1bHQgPSB7XHJcbiBcdFx0XHRcdFx0XHR0eXBlOiBcImRpc3Bvc2VkXCIsXHJcbiBcdFx0XHRcdFx0XHRtb2R1bGVJZDogaWRcclxuIFx0XHRcdFx0XHR9O1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHRcdHZhciBhYm9ydEVycm9yID0gZmFsc2U7XHJcbiBcdFx0XHRcdHZhciBkb0FwcGx5ID0gZmFsc2U7XHJcbiBcdFx0XHRcdHZhciBkb0Rpc3Bvc2UgPSBmYWxzZTtcclxuIFx0XHRcdFx0dmFyIGNoYWluSW5mbyA9IFwiXCI7XHJcbiBcdFx0XHRcdGlmKHJlc3VsdC5jaGFpbikge1xyXG4gXHRcdFx0XHRcdGNoYWluSW5mbyA9IFwiXFxuVXBkYXRlIHByb3BhZ2F0aW9uOiBcIiArIHJlc3VsdC5jaGFpbi5qb2luKFwiIC0+IFwiKTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRzd2l0Y2gocmVzdWx0LnR5cGUpIHtcclxuIFx0XHRcdFx0XHRjYXNlIFwic2VsZi1kZWNsaW5lZFwiOlxyXG4gXHRcdFx0XHRcdFx0aWYob3B0aW9ucy5vbkRlY2xpbmVkKVxyXG4gXHRcdFx0XHRcdFx0XHRvcHRpb25zLm9uRGVjbGluZWQocmVzdWx0KTtcclxuIFx0XHRcdFx0XHRcdGlmKCFvcHRpb25zLmlnbm9yZURlY2xpbmVkKVxyXG4gXHRcdFx0XHRcdFx0XHRhYm9ydEVycm9yID0gbmV3IEVycm9yKFwiQWJvcnRlZCBiZWNhdXNlIG9mIHNlbGYgZGVjbGluZTogXCIgKyByZXN1bHQubW9kdWxlSWQgKyBjaGFpbkluZm8pO1xyXG4gXHRcdFx0XHRcdFx0YnJlYWs7XHJcbiBcdFx0XHRcdFx0Y2FzZSBcImRlY2xpbmVkXCI6XHJcbiBcdFx0XHRcdFx0XHRpZihvcHRpb25zLm9uRGVjbGluZWQpXHJcbiBcdFx0XHRcdFx0XHRcdG9wdGlvbnMub25EZWNsaW5lZChyZXN1bHQpO1xyXG4gXHRcdFx0XHRcdFx0aWYoIW9wdGlvbnMuaWdub3JlRGVjbGluZWQpXHJcbiBcdFx0XHRcdFx0XHRcdGFib3J0RXJyb3IgPSBuZXcgRXJyb3IoXCJBYm9ydGVkIGJlY2F1c2Ugb2YgZGVjbGluZWQgZGVwZW5kZW5jeTogXCIgKyByZXN1bHQubW9kdWxlSWQgKyBcIiBpbiBcIiArIHJlc3VsdC5wYXJlbnRJZCArIGNoYWluSW5mbyk7XHJcbiBcdFx0XHRcdFx0XHRicmVhaztcclxuIFx0XHRcdFx0XHRjYXNlIFwidW5hY2NlcHRlZFwiOlxyXG4gXHRcdFx0XHRcdFx0aWYob3B0aW9ucy5vblVuYWNjZXB0ZWQpXHJcbiBcdFx0XHRcdFx0XHRcdG9wdGlvbnMub25VbmFjY2VwdGVkKHJlc3VsdCk7XHJcbiBcdFx0XHRcdFx0XHRpZighb3B0aW9ucy5pZ25vcmVVbmFjY2VwdGVkKVxyXG4gXHRcdFx0XHRcdFx0XHRhYm9ydEVycm9yID0gbmV3IEVycm9yKFwiQWJvcnRlZCBiZWNhdXNlIFwiICsgbW9kdWxlSWQgKyBcIiBpcyBub3QgYWNjZXB0ZWRcIiArIGNoYWluSW5mbyk7XHJcbiBcdFx0XHRcdFx0XHRicmVhaztcclxuIFx0XHRcdFx0XHRjYXNlIFwiYWNjZXB0ZWRcIjpcclxuIFx0XHRcdFx0XHRcdGlmKG9wdGlvbnMub25BY2NlcHRlZClcclxuIFx0XHRcdFx0XHRcdFx0b3B0aW9ucy5vbkFjY2VwdGVkKHJlc3VsdCk7XHJcbiBcdFx0XHRcdFx0XHRkb0FwcGx5ID0gdHJ1ZTtcclxuIFx0XHRcdFx0XHRcdGJyZWFrO1xyXG4gXHRcdFx0XHRcdGNhc2UgXCJkaXNwb3NlZFwiOlxyXG4gXHRcdFx0XHRcdFx0aWYob3B0aW9ucy5vbkRpc3Bvc2VkKVxyXG4gXHRcdFx0XHRcdFx0XHRvcHRpb25zLm9uRGlzcG9zZWQocmVzdWx0KTtcclxuIFx0XHRcdFx0XHRcdGRvRGlzcG9zZSA9IHRydWU7XHJcbiBcdFx0XHRcdFx0XHRicmVhaztcclxuIFx0XHRcdFx0XHRkZWZhdWx0OlxyXG4gXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVW5leGNlcHRpb24gdHlwZSBcIiArIHJlc3VsdC50eXBlKTtcclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRpZihhYm9ydEVycm9yKSB7XHJcbiBcdFx0XHRcdFx0aG90U2V0U3RhdHVzKFwiYWJvcnRcIik7XHJcbiBcdFx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KGFib3J0RXJyb3IpO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHRcdGlmKGRvQXBwbHkpIHtcclxuIFx0XHRcdFx0XHRhcHBsaWVkVXBkYXRlW21vZHVsZUlkXSA9IGhvdFVwZGF0ZVttb2R1bGVJZF07XHJcbiBcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWRNb2R1bGVzLCByZXN1bHQub3V0ZGF0ZWRNb2R1bGVzKTtcclxuIFx0XHRcdFx0XHRmb3IobW9kdWxlSWQgaW4gcmVzdWx0Lm91dGRhdGVkRGVwZW5kZW5jaWVzKSB7XHJcbiBcdFx0XHRcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocmVzdWx0Lm91dGRhdGVkRGVwZW5kZW5jaWVzLCBtb2R1bGVJZCkpIHtcclxuIFx0XHRcdFx0XHRcdFx0aWYoIW91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXSlcclxuIFx0XHRcdFx0XHRcdFx0XHRvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF0gPSBbXTtcclxuIFx0XHRcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdLCByZXN1bHQub3V0ZGF0ZWREZXBlbmRlbmNpZXNbbW9kdWxlSWRdKTtcclxuIFx0XHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdFx0aWYoZG9EaXNwb3NlKSB7XHJcbiBcdFx0XHRcdFx0YWRkQWxsVG9TZXQob3V0ZGF0ZWRNb2R1bGVzLCBbcmVzdWx0Lm1vZHVsZUlkXSk7XHJcbiBcdFx0XHRcdFx0YXBwbGllZFVwZGF0ZVttb2R1bGVJZF0gPSB3YXJuVW5leHBlY3RlZFJlcXVpcmU7XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdH1cclxuIFx0XHR9XHJcbiBcdFxyXG4gXHRcdC8vIFN0b3JlIHNlbGYgYWNjZXB0ZWQgb3V0ZGF0ZWQgbW9kdWxlcyB0byByZXF1aXJlIHRoZW0gbGF0ZXIgYnkgdGhlIG1vZHVsZSBzeXN0ZW1cclxuIFx0XHR2YXIgb3V0ZGF0ZWRTZWxmQWNjZXB0ZWRNb2R1bGVzID0gW107XHJcbiBcdFx0Zm9yKGkgPSAwOyBpIDwgb3V0ZGF0ZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XHJcbiBcdFx0XHRtb2R1bGVJZCA9IG91dGRhdGVkTW9kdWxlc1tpXTtcclxuIFx0XHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdICYmIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkKVxyXG4gXHRcdFx0XHRvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXMucHVzaCh7XHJcbiBcdFx0XHRcdFx0bW9kdWxlOiBtb2R1bGVJZCxcclxuIFx0XHRcdFx0XHRlcnJvckhhbmRsZXI6IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmhvdC5fc2VsZkFjY2VwdGVkXHJcbiBcdFx0XHRcdH0pO1xyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0Ly8gTm93IGluIFwiZGlzcG9zZVwiIHBoYXNlXHJcbiBcdFx0aG90U2V0U3RhdHVzKFwiZGlzcG9zZVwiKTtcclxuIFx0XHRPYmplY3Qua2V5cyhob3RBdmFpbGFibGVGaWxlc01hcCkuZm9yRWFjaChmdW5jdGlvbihjaHVua0lkKSB7XHJcbiBcdFx0XHRpZihob3RBdmFpbGFibGVGaWxlc01hcFtjaHVua0lkXSA9PT0gZmFsc2UpIHtcclxuIFx0XHRcdFx0aG90RGlzcG9zZUNodW5rKGNodW5rSWQpO1xyXG4gXHRcdFx0fVxyXG4gXHRcdH0pO1xyXG4gXHRcclxuIFx0XHR2YXIgaWR4O1xyXG4gXHRcdHZhciBxdWV1ZSA9IG91dGRhdGVkTW9kdWxlcy5zbGljZSgpO1xyXG4gXHRcdHdoaWxlKHF1ZXVlLmxlbmd0aCA+IDApIHtcclxuIFx0XHRcdG1vZHVsZUlkID0gcXVldWUucG9wKCk7XHJcbiBcdFx0XHRtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuIFx0XHRcdGlmKCFtb2R1bGUpIGNvbnRpbnVlO1xyXG4gXHRcclxuIFx0XHRcdHZhciBkYXRhID0ge307XHJcbiBcdFxyXG4gXHRcdFx0Ly8gQ2FsbCBkaXNwb3NlIGhhbmRsZXJzXHJcbiBcdFx0XHR2YXIgZGlzcG9zZUhhbmRsZXJzID0gbW9kdWxlLmhvdC5fZGlzcG9zZUhhbmRsZXJzO1xyXG4gXHRcdFx0Zm9yKGogPSAwOyBqIDwgZGlzcG9zZUhhbmRsZXJzLmxlbmd0aDsgaisrKSB7XHJcbiBcdFx0XHRcdGNiID0gZGlzcG9zZUhhbmRsZXJzW2pdO1xyXG4gXHRcdFx0XHRjYihkYXRhKTtcclxuIFx0XHRcdH1cclxuIFx0XHRcdGhvdEN1cnJlbnRNb2R1bGVEYXRhW21vZHVsZUlkXSA9IGRhdGE7XHJcbiBcdFxyXG4gXHRcdFx0Ly8gZGlzYWJsZSBtb2R1bGUgKHRoaXMgZGlzYWJsZXMgcmVxdWlyZXMgZnJvbSB0aGlzIG1vZHVsZSlcclxuIFx0XHRcdG1vZHVsZS5ob3QuYWN0aXZlID0gZmFsc2U7XHJcbiBcdFxyXG4gXHRcdFx0Ly8gcmVtb3ZlIG1vZHVsZSBmcm9tIGNhY2hlXHJcbiBcdFx0XHRkZWxldGUgaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF07XHJcbiBcdFxyXG4gXHRcdFx0Ly8gd2hlbiBkaXNwb3NpbmcgdGhlcmUgaXMgbm8gbmVlZCB0byBjYWxsIGRpc3Bvc2UgaGFuZGxlclxyXG4gXHRcdFx0ZGVsZXRlIG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXTtcclxuIFx0XHJcbiBcdFx0XHQvLyByZW1vdmUgXCJwYXJlbnRzXCIgcmVmZXJlbmNlcyBmcm9tIGFsbCBjaGlsZHJlblxyXG4gXHRcdFx0Zm9yKGogPSAwOyBqIDwgbW9kdWxlLmNoaWxkcmVuLmxlbmd0aDsgaisrKSB7XHJcbiBcdFx0XHRcdHZhciBjaGlsZCA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlLmNoaWxkcmVuW2pdXTtcclxuIFx0XHRcdFx0aWYoIWNoaWxkKSBjb250aW51ZTtcclxuIFx0XHRcdFx0aWR4ID0gY2hpbGQucGFyZW50cy5pbmRleE9mKG1vZHVsZUlkKTtcclxuIFx0XHRcdFx0aWYoaWR4ID49IDApIHtcclxuIFx0XHRcdFx0XHRjaGlsZC5wYXJlbnRzLnNwbGljZShpZHgsIDEpO1xyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHR9XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHQvLyByZW1vdmUgb3V0ZGF0ZWQgZGVwZW5kZW5jeSBmcm9tIG1vZHVsZSBjaGlsZHJlblxyXG4gXHRcdHZhciBkZXBlbmRlbmN5O1xyXG4gXHRcdHZhciBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcztcclxuIFx0XHRmb3IobW9kdWxlSWQgaW4gb3V0ZGF0ZWREZXBlbmRlbmNpZXMpIHtcclxuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvdXRkYXRlZERlcGVuZGVuY2llcywgbW9kdWxlSWQpKSB7XHJcbiBcdFx0XHRcdG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdO1xyXG4gXHRcdFx0XHRpZihtb2R1bGUpIHtcclxuIFx0XHRcdFx0XHRtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyA9IG91dGRhdGVkRGVwZW5kZW5jaWVzW21vZHVsZUlkXTtcclxuIFx0XHRcdFx0XHRmb3IoaiA9IDA7IGogPCBtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcy5sZW5ndGg7IGorKykge1xyXG4gXHRcdFx0XHRcdFx0ZGVwZW5kZW5jeSA9IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzW2pdO1xyXG4gXHRcdFx0XHRcdFx0aWR4ID0gbW9kdWxlLmNoaWxkcmVuLmluZGV4T2YoZGVwZW5kZW5jeSk7XHJcbiBcdFx0XHRcdFx0XHRpZihpZHggPj0gMCkgbW9kdWxlLmNoaWxkcmVuLnNwbGljZShpZHgsIDEpO1xyXG4gXHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0fVxyXG4gXHRcdFx0fVxyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0Ly8gTm90IGluIFwiYXBwbHlcIiBwaGFzZVxyXG4gXHRcdGhvdFNldFN0YXR1cyhcImFwcGx5XCIpO1xyXG4gXHRcclxuIFx0XHRob3RDdXJyZW50SGFzaCA9IGhvdFVwZGF0ZU5ld0hhc2g7XHJcbiBcdFxyXG4gXHRcdC8vIGluc2VydCBuZXcgY29kZVxyXG4gXHRcdGZvcihtb2R1bGVJZCBpbiBhcHBsaWVkVXBkYXRlKSB7XHJcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYXBwbGllZFVwZGF0ZSwgbW9kdWxlSWQpKSB7XHJcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gYXBwbGllZFVwZGF0ZVttb2R1bGVJZF07XHJcbiBcdFx0XHR9XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHQvLyBjYWxsIGFjY2VwdCBoYW5kbGVyc1xyXG4gXHRcdHZhciBlcnJvciA9IG51bGw7XHJcbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG91dGRhdGVkRGVwZW5kZW5jaWVzKSB7XHJcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3V0ZGF0ZWREZXBlbmRlbmNpZXMsIG1vZHVsZUlkKSkge1xyXG4gXHRcdFx0XHRtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXTtcclxuIFx0XHRcdFx0aWYobW9kdWxlKSB7XHJcbiBcdFx0XHRcdFx0bW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXMgPSBvdXRkYXRlZERlcGVuZGVuY2llc1ttb2R1bGVJZF07XHJcbiBcdFx0XHRcdFx0dmFyIGNhbGxiYWNrcyA9IFtdO1xyXG4gXHRcdFx0XHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZU91dGRhdGVkRGVwZW5kZW5jaWVzLmxlbmd0aDsgaSsrKSB7XHJcbiBcdFx0XHRcdFx0XHRkZXBlbmRlbmN5ID0gbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXNbaV07XHJcbiBcdFx0XHRcdFx0XHRjYiA9IG1vZHVsZS5ob3QuX2FjY2VwdGVkRGVwZW5kZW5jaWVzW2RlcGVuZGVuY3ldO1xyXG4gXHRcdFx0XHRcdFx0aWYoY2IpIHtcclxuIFx0XHRcdFx0XHRcdFx0aWYoY2FsbGJhY2tzLmluZGV4T2YoY2IpID49IDApIGNvbnRpbnVlO1xyXG4gXHRcdFx0XHRcdFx0XHRjYWxsYmFja3MucHVzaChjYik7XHJcbiBcdFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdFx0fVxyXG4gXHRcdFx0XHRcdGZvcihpID0gMDsgaSA8IGNhbGxiYWNrcy5sZW5ndGg7IGkrKykge1xyXG4gXHRcdFx0XHRcdFx0Y2IgPSBjYWxsYmFja3NbaV07XHJcbiBcdFx0XHRcdFx0XHR0cnkge1xyXG4gXHRcdFx0XHRcdFx0XHRjYihtb2R1bGVPdXRkYXRlZERlcGVuZGVuY2llcyk7XHJcbiBcdFx0XHRcdFx0XHR9IGNhdGNoKGVycikge1xyXG4gXHRcdFx0XHRcdFx0XHRpZihvcHRpb25zLm9uRXJyb3JlZCkge1xyXG4gXHRcdFx0XHRcdFx0XHRcdG9wdGlvbnMub25FcnJvcmVkKHtcclxuIFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwiYWNjZXB0LWVycm9yZWRcIixcclxuIFx0XHRcdFx0XHRcdFx0XHRcdG1vZHVsZUlkOiBtb2R1bGVJZCxcclxuIFx0XHRcdFx0XHRcdFx0XHRcdGRlcGVuZGVuY3lJZDogbW9kdWxlT3V0ZGF0ZWREZXBlbmRlbmNpZXNbaV0sXHJcbiBcdFx0XHRcdFx0XHRcdFx0XHRlcnJvcjogZXJyXHJcbiBcdFx0XHRcdFx0XHRcdFx0fSk7XHJcbiBcdFx0XHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0XHRcdFx0aWYoIW9wdGlvbnMuaWdub3JlRXJyb3JlZCkge1xyXG4gXHRcdFx0XHRcdFx0XHRcdGlmKCFlcnJvcilcclxuIFx0XHRcdFx0XHRcdFx0XHRcdGVycm9yID0gZXJyO1xyXG4gXHRcdFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdFx0fVxyXG4gXHRcdFx0XHR9XHJcbiBcdFx0XHR9XHJcbiBcdFx0fVxyXG4gXHRcclxuIFx0XHQvLyBMb2FkIHNlbGYgYWNjZXB0ZWQgbW9kdWxlc1xyXG4gXHRcdGZvcihpID0gMDsgaSA8IG91dGRhdGVkU2VsZkFjY2VwdGVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xyXG4gXHRcdFx0dmFyIGl0ZW0gPSBvdXRkYXRlZFNlbGZBY2NlcHRlZE1vZHVsZXNbaV07XHJcbiBcdFx0XHRtb2R1bGVJZCA9IGl0ZW0ubW9kdWxlO1xyXG4gXHRcdFx0aG90Q3VycmVudFBhcmVudHMgPSBbbW9kdWxlSWRdO1xyXG4gXHRcdFx0dHJ5IHtcclxuIFx0XHRcdFx0X193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCk7XHJcbiBcdFx0XHR9IGNhdGNoKGVycikge1xyXG4gXHRcdFx0XHRpZih0eXBlb2YgaXRlbS5lcnJvckhhbmRsZXIgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gXHRcdFx0XHRcdHRyeSB7XHJcbiBcdFx0XHRcdFx0XHRpdGVtLmVycm9ySGFuZGxlcihlcnIpO1xyXG4gXHRcdFx0XHRcdH0gY2F0Y2goZXJyMikge1xyXG4gXHRcdFx0XHRcdFx0aWYob3B0aW9ucy5vbkVycm9yZWQpIHtcclxuIFx0XHRcdFx0XHRcdFx0b3B0aW9ucy5vbkVycm9yZWQoe1xyXG4gXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFwic2VsZi1hY2NlcHQtZXJyb3ItaGFuZGxlci1lcnJvcmVkXCIsXHJcbiBcdFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxyXG4gXHRcdFx0XHRcdFx0XHRcdGVycm9yOiBlcnIyLFxyXG4gXHRcdFx0XHRcdFx0XHRcdG9yZ2luYWxFcnJvcjogZXJyLCAvLyBUT0RPIHJlbW92ZSBpbiB3ZWJwYWNrIDRcclxuIFx0XHRcdFx0XHRcdFx0XHRvcmlnaW5hbEVycm9yOiBlcnJcclxuIFx0XHRcdFx0XHRcdFx0fSk7XHJcbiBcdFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdFx0XHRpZighb3B0aW9ucy5pZ25vcmVFcnJvcmVkKSB7XHJcbiBcdFx0XHRcdFx0XHRcdGlmKCFlcnJvcilcclxuIFx0XHRcdFx0XHRcdFx0XHRlcnJvciA9IGVycjI7XHJcbiBcdFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdFx0XHRpZighZXJyb3IpXHJcbiBcdFx0XHRcdFx0XHRcdGVycm9yID0gZXJyO1xyXG4gXHRcdFx0XHRcdH1cclxuIFx0XHRcdFx0fSBlbHNlIHtcclxuIFx0XHRcdFx0XHRpZihvcHRpb25zLm9uRXJyb3JlZCkge1xyXG4gXHRcdFx0XHRcdFx0b3B0aW9ucy5vbkVycm9yZWQoe1xyXG4gXHRcdFx0XHRcdFx0XHR0eXBlOiBcInNlbGYtYWNjZXB0LWVycm9yZWRcIixcclxuIFx0XHRcdFx0XHRcdFx0bW9kdWxlSWQ6IG1vZHVsZUlkLFxyXG4gXHRcdFx0XHRcdFx0XHRlcnJvcjogZXJyXHJcbiBcdFx0XHRcdFx0XHR9KTtcclxuIFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdFx0aWYoIW9wdGlvbnMuaWdub3JlRXJyb3JlZCkge1xyXG4gXHRcdFx0XHRcdFx0aWYoIWVycm9yKVxyXG4gXHRcdFx0XHRcdFx0XHRlcnJvciA9IGVycjtcclxuIFx0XHRcdFx0XHR9XHJcbiBcdFx0XHRcdH1cclxuIFx0XHRcdH1cclxuIFx0XHR9XHJcbiBcdFxyXG4gXHRcdC8vIGhhbmRsZSBlcnJvcnMgaW4gYWNjZXB0IGhhbmRsZXJzIGFuZCBzZWxmIGFjY2VwdGVkIG1vZHVsZSBsb2FkXHJcbiBcdFx0aWYoZXJyb3IpIHtcclxuIFx0XHRcdGhvdFNldFN0YXR1cyhcImZhaWxcIik7XHJcbiBcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG4gXHRcdH1cclxuIFx0XHJcbiBcdFx0aG90U2V0U3RhdHVzKFwiaWRsZVwiKTtcclxuIFx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSkge1xyXG4gXHRcdFx0cmVzb2x2ZShvdXRkYXRlZE1vZHVsZXMpO1xyXG4gXHRcdH0pO1xyXG4gXHR9XHJcblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aG90OiBob3RDcmVhdGVNb2R1bGUobW9kdWxlSWQpLFxuIFx0XHRcdHBhcmVudHM6IChob3RDdXJyZW50UGFyZW50c1RlbXAgPSBob3RDdXJyZW50UGFyZW50cywgaG90Q3VycmVudFBhcmVudHMgPSBbXSwgaG90Q3VycmVudFBhcmVudHNUZW1wKSxcbiBcdFx0XHRjaGlsZHJlbjogW11cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgaG90Q3JlYXRlUmVxdWlyZShtb2R1bGVJZCkpO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBfX3dlYnBhY2tfaGFzaF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSBmdW5jdGlvbigpIHsgcmV0dXJuIGhvdEN1cnJlbnRIYXNoOyB9O1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBob3RDcmVhdGVSZXF1aXJlKDcpKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDcpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGI5NzQ0MmNlYWNlYmZkMGI3MTJkIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYmluZCA9IHJlcXVpcmUoJy4vaGVscGVycy9iaW5kJyk7XG52YXIgaXNCdWZmZXIgPSByZXF1aXJlKCdpcy1idWZmZXInKTtcblxuLypnbG9iYWwgdG9TdHJpbmc6dHJ1ZSovXG5cbi8vIHV0aWxzIGlzIGEgbGlicmFyeSBvZiBnZW5lcmljIGhlbHBlciBmdW5jdGlvbnMgbm9uLXNwZWNpZmljIHRvIGF4aW9zXG5cbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gQXJyYXlcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXkodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlCdWZmZXIodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGb3JtRGF0YVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEZvcm1EYXRhLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGb3JtRGF0YSh2YWwpIHtcbiAgcmV0dXJuICh0eXBlb2YgRm9ybURhdGEgIT09ICd1bmRlZmluZWQnKSAmJiAodmFsIGluc3RhbmNlb2YgRm9ybURhdGEpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlCdWZmZXJWaWV3KHZhbCkge1xuICB2YXIgcmVzdWx0O1xuICBpZiAoKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpICYmIChBcnJheUJ1ZmZlci5pc1ZpZXcpKSB7XG4gICAgcmVzdWx0ID0gQXJyYXlCdWZmZXIuaXNWaWV3KHZhbCk7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ID0gKHZhbCkgJiYgKHZhbC5idWZmZXIpICYmICh2YWwuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJpbmdcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmluZywgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3RyaW5nKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZyc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBOdW1iZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIE51bWJlciwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTnVtYmVyKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcic7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgdW5kZWZpbmVkXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHZhbHVlIGlzIHVuZGVmaW5lZCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gT2JqZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gT2JqZWN0LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsKSB7XG4gIHJldHVybiB2YWwgIT09IG51bGwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBEYXRlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBEYXRlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNEYXRlKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBEYXRlXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGaWxlXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGaWxlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGaWxlKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGaWxlXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBCbG9iXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBCbG9iLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNCbG9iKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBCbG9iXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGdW5jdGlvblxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRnVuY3Rpb24sIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyZWFtXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJlYW0sIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N0cmVhbSh2YWwpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KHZhbCkgJiYgaXNGdW5jdGlvbih2YWwucGlwZSk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBVUkxTZWFyY2hQYXJhbXMgb2JqZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBVUkxTZWFyY2hQYXJhbXMgb2JqZWN0LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNVUkxTZWFyY2hQYXJhbXModmFsKSB7XG4gIHJldHVybiB0eXBlb2YgVVJMU2VhcmNoUGFyYW1zICE9PSAndW5kZWZpbmVkJyAmJiB2YWwgaW5zdGFuY2VvZiBVUkxTZWFyY2hQYXJhbXM7XG59XG5cbi8qKlxuICogVHJpbSBleGNlc3Mgd2hpdGVzcGFjZSBvZmYgdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIGEgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgU3RyaW5nIHRvIHRyaW1cbiAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBTdHJpbmcgZnJlZWQgb2YgZXhjZXNzIHdoaXRlc3BhY2VcbiAqL1xuZnVuY3Rpb24gdHJpbShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzKi8sICcnKS5yZXBsYWNlKC9cXHMqJC8sICcnKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgd2UncmUgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnRcbiAqXG4gKiBUaGlzIGFsbG93cyBheGlvcyB0byBydW4gaW4gYSB3ZWIgd29ya2VyLCBhbmQgcmVhY3QtbmF0aXZlLlxuICogQm90aCBlbnZpcm9ubWVudHMgc3VwcG9ydCBYTUxIdHRwUmVxdWVzdCwgYnV0IG5vdCBmdWxseSBzdGFuZGFyZCBnbG9iYWxzLlxuICpcbiAqIHdlYiB3b3JrZXJzOlxuICogIHR5cGVvZiB3aW5kb3cgLT4gdW5kZWZpbmVkXG4gKiAgdHlwZW9mIGRvY3VtZW50IC0+IHVuZGVmaW5lZFxuICpcbiAqIHJlYWN0LW5hdGl2ZTpcbiAqICBuYXZpZ2F0b3IucHJvZHVjdCAtPiAnUmVhY3ROYXRpdmUnXG4gKi9cbmZ1bmN0aW9uIGlzU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnByb2R1Y3QgPT09ICdSZWFjdE5hdGl2ZScpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIChcbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCdcbiAgKTtcbn1cblxuLyoqXG4gKiBJdGVyYXRlIG92ZXIgYW4gQXJyYXkgb3IgYW4gT2JqZWN0IGludm9raW5nIGEgZnVuY3Rpb24gZm9yIGVhY2ggaXRlbS5cbiAqXG4gKiBJZiBgb2JqYCBpcyBhbiBBcnJheSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGluZGV4LCBhbmQgY29tcGxldGUgYXJyYXkgZm9yIGVhY2ggaXRlbS5cbiAqXG4gKiBJZiAnb2JqJyBpcyBhbiBPYmplY3QgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZ1xuICogdGhlIHZhbHVlLCBrZXksIGFuZCBjb21wbGV0ZSBvYmplY3QgZm9yIGVhY2ggcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IG9iaiBUaGUgb2JqZWN0IHRvIGl0ZXJhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBjYWxsYmFjayB0byBpbnZva2UgZm9yIGVhY2ggaXRlbVxuICovXG5mdW5jdGlvbiBmb3JFYWNoKG9iaiwgZm4pIHtcbiAgLy8gRG9uJ3QgYm90aGVyIGlmIG5vIHZhbHVlIHByb3ZpZGVkXG4gIGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBGb3JjZSBhbiBhcnJheSBpZiBub3QgYWxyZWFkeSBzb21ldGhpbmcgaXRlcmFibGVcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG4gICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gICAgb2JqID0gW29ial07XG4gIH1cblxuICBpZiAoaXNBcnJheShvYmopKSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIGFycmF5IHZhbHVlc1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZm4uY2FsbChudWxsLCBvYmpbaV0sIGksIG9iaik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIEl0ZXJhdGUgb3ZlciBvYmplY3Qga2V5c1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2tleV0sIGtleSwgb2JqKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBY2NlcHRzIHZhcmFyZ3MgZXhwZWN0aW5nIGVhY2ggYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0LCB0aGVuXG4gKiBpbW11dGFibHkgbWVyZ2VzIHRoZSBwcm9wZXJ0aWVzIG9mIGVhY2ggb2JqZWN0IGFuZCByZXR1cm5zIHJlc3VsdC5cbiAqXG4gKiBXaGVuIG11bHRpcGxlIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBrZXkgdGhlIGxhdGVyIG9iamVjdCBpblxuICogdGhlIGFyZ3VtZW50cyBsaXN0IHdpbGwgdGFrZSBwcmVjZWRlbmNlLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqIHZhciByZXN1bHQgPSBtZXJnZSh7Zm9vOiAxMjN9LCB7Zm9vOiA0NTZ9KTtcbiAqIGNvbnNvbGUubG9nKHJlc3VsdC5mb28pOyAvLyBvdXRwdXRzIDQ1NlxuICogYGBgXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iajEgT2JqZWN0IHRvIG1lcmdlXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXN1bHQgb2YgYWxsIG1lcmdlIHByb3BlcnRpZXNcbiAqL1xuZnVuY3Rpb24gbWVyZ2UoLyogb2JqMSwgb2JqMiwgb2JqMywgLi4uICovKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcbiAgICBpZiAodHlwZW9mIHJlc3VsdFtrZXldID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuICAgICAgcmVzdWx0W2tleV0gPSBtZXJnZShyZXN1bHRba2V5XSwgdmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0W2tleV0gPSB2YWw7XG4gICAgfVxuICB9XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZm9yRWFjaChhcmd1bWVudHNbaV0sIGFzc2lnblZhbHVlKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEV4dGVuZHMgb2JqZWN0IGEgYnkgbXV0YWJseSBhZGRpbmcgdG8gaXQgdGhlIHByb3BlcnRpZXMgb2Ygb2JqZWN0IGIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGEgVGhlIG9iamVjdCB0byBiZSBleHRlbmRlZFxuICogQHBhcmFtIHtPYmplY3R9IGIgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbVxuICogQHBhcmFtIHtPYmplY3R9IHRoaXNBcmcgVGhlIG9iamVjdCB0byBiaW5kIGZ1bmN0aW9uIHRvXG4gKiBAcmV0dXJuIHtPYmplY3R9IFRoZSByZXN1bHRpbmcgdmFsdWUgb2Ygb2JqZWN0IGFcbiAqL1xuZnVuY3Rpb24gZXh0ZW5kKGEsIGIsIHRoaXNBcmcpIHtcbiAgZm9yRWFjaChiLCBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmICh0aGlzQXJnICYmIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGFba2V5XSA9IGJpbmQodmFsLCB0aGlzQXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYVtrZXldID0gdmFsO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBhO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaXNBcnJheTogaXNBcnJheSxcbiAgaXNBcnJheUJ1ZmZlcjogaXNBcnJheUJ1ZmZlcixcbiAgaXNCdWZmZXI6IGlzQnVmZmVyLFxuICBpc0Zvcm1EYXRhOiBpc0Zvcm1EYXRhLFxuICBpc0FycmF5QnVmZmVyVmlldzogaXNBcnJheUJ1ZmZlclZpZXcsXG4gIGlzU3RyaW5nOiBpc1N0cmluZyxcbiAgaXNOdW1iZXI6IGlzTnVtYmVyLFxuICBpc09iamVjdDogaXNPYmplY3QsXG4gIGlzVW5kZWZpbmVkOiBpc1VuZGVmaW5lZCxcbiAgaXNEYXRlOiBpc0RhdGUsXG4gIGlzRmlsZTogaXNGaWxlLFxuICBpc0Jsb2I6IGlzQmxvYixcbiAgaXNGdW5jdGlvbjogaXNGdW5jdGlvbixcbiAgaXNTdHJlYW06IGlzU3RyZWFtLFxuICBpc1VSTFNlYXJjaFBhcmFtczogaXNVUkxTZWFyY2hQYXJhbXMsXG4gIGlzU3RhbmRhcmRCcm93c2VyRW52OiBpc1N0YW5kYXJkQnJvd3NlckVudixcbiAgZm9yRWFjaDogZm9yRWFjaCxcbiAgbWVyZ2U6IG1lcmdlLFxuICBleHRlbmQ6IGV4dGVuZCxcbiAgdHJpbTogdHJpbVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi91dGlscy5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBub3JtYWxpemVIZWFkZXJOYW1lID0gcmVxdWlyZSgnLi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUnKTtcblxudmFyIERFRkFVTFRfQ09OVEVOVF9UWVBFID0ge1xuICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcbn07XG5cbmZ1bmN0aW9uIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCB2YWx1ZSkge1xuICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnMpICYmIHV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddKSkge1xuICAgIGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gdmFsdWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RGVmYXVsdEFkYXB0ZXIoKSB7XG4gIHZhciBhZGFwdGVyO1xuICBpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIEZvciBicm93c2VycyB1c2UgWEhSIGFkYXB0ZXJcbiAgICBhZGFwdGVyID0gcmVxdWlyZSgnLi9hZGFwdGVycy94aHInKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBGb3Igbm9kZSB1c2UgSFRUUCBhZGFwdGVyXG4gICAgYWRhcHRlciA9IHJlcXVpcmUoJy4vYWRhcHRlcnMvaHR0cCcpO1xuICB9XG4gIHJldHVybiBhZGFwdGVyO1xufVxuXG52YXIgZGVmYXVsdHMgPSB7XG4gIGFkYXB0ZXI6IGdldERlZmF1bHRBZGFwdGVyKCksXG5cbiAgdHJhbnNmb3JtUmVxdWVzdDogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlcXVlc3QoZGF0YSwgaGVhZGVycykge1xuICAgIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgJ0NvbnRlbnQtVHlwZScpO1xuICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0FycmF5QnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0J1ZmZlcihkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNTdHJlYW0oZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzRmlsZShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNCbG9iKGRhdGEpXG4gICAgKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzQXJyYXlCdWZmZXJWaWV3KGRhdGEpKSB7XG4gICAgICByZXR1cm4gZGF0YS5idWZmZXI7XG4gICAgfVxuICAgIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhkYXRhKSkge1xuICAgICAgc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCcpO1xuICAgICAgcmV0dXJuIGRhdGEudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzT2JqZWN0KGRhdGEpKSB7XG4gICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCcpO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfV0sXG5cbiAgdHJhbnNmb3JtUmVzcG9uc2U6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXNwb25zZShkYXRhKSB7XG4gICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICB9IGNhdGNoIChlKSB7IC8qIElnbm9yZSAqLyB9XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICB0aW1lb3V0OiAwLFxuXG4gIHhzcmZDb29raWVOYW1lOiAnWFNSRi1UT0tFTicsXG4gIHhzcmZIZWFkZXJOYW1lOiAnWC1YU1JGLVRPS0VOJyxcblxuICBtYXhDb250ZW50TGVuZ3RoOiAtMSxcblxuICB2YWxpZGF0ZVN0YXR1czogZnVuY3Rpb24gdmFsaWRhdGVTdGF0dXMoc3RhdHVzKSB7XG4gICAgcmV0dXJuIHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwO1xuICB9XG59O1xuXG5kZWZhdWx0cy5oZWFkZXJzID0ge1xuICBjb21tb246IHtcbiAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKidcbiAgfVxufTtcblxudXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB7fTtcbn0pO1xuXG51dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB1dGlscy5tZXJnZShERUZBVUxUX0NPTlRFTlRfVFlQRSk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBkZWZhdWx0cztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9kZWZhdWx0cy5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYmluZChmbiwgdGhpc0FyZykge1xuICByZXR1cm4gZnVuY3Rpb24gd3JhcCgpIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9iaW5kLmpzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIHNldHRsZSA9IHJlcXVpcmUoJy4vLi4vY29yZS9zZXR0bGUnKTtcbnZhciBidWlsZFVSTCA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9idWlsZFVSTCcpO1xudmFyIHBhcnNlSGVhZGVycyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9wYXJzZUhlYWRlcnMnKTtcbnZhciBpc1VSTFNhbWVPcmlnaW4gPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luJyk7XG52YXIgY3JlYXRlRXJyb3IgPSByZXF1aXJlKCcuLi9jb3JlL2NyZWF0ZUVycm9yJyk7XG52YXIgYnRvYSA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuYnRvYSAmJiB3aW5kb3cuYnRvYS5iaW5kKHdpbmRvdykpIHx8IHJlcXVpcmUoJy4vLi4vaGVscGVycy9idG9hJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24geGhyQWRhcHRlcihjb25maWcpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGRpc3BhdGNoWGhyUmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcmVxdWVzdERhdGEgPSBjb25maWcuZGF0YTtcbiAgICB2YXIgcmVxdWVzdEhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcblxuICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKHJlcXVlc3REYXRhKSkge1xuICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzWydDb250ZW50LVR5cGUnXTsgLy8gTGV0IHRoZSBicm93c2VyIHNldCBpdFxuICAgIH1cblxuICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgdmFyIGxvYWRFdmVudCA9ICdvbnJlYWR5c3RhdGVjaGFuZ2UnO1xuICAgIHZhciB4RG9tYWluID0gZmFsc2U7XG5cbiAgICAvLyBGb3IgSUUgOC85IENPUlMgc3VwcG9ydFxuICAgIC8vIE9ubHkgc3VwcG9ydHMgUE9TVCBhbmQgR0VUIGNhbGxzIGFuZCBkb2Vzbid0IHJldHVybnMgdGhlIHJlc3BvbnNlIGhlYWRlcnMuXG4gICAgLy8gRE9OJ1QgZG8gdGhpcyBmb3IgdGVzdGluZyBiL2MgWE1MSHR0cFJlcXVlc3QgaXMgbW9ja2VkLCBub3QgWERvbWFpblJlcXVlc3QuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAndGVzdCcgJiZcbiAgICAgICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgd2luZG93LlhEb21haW5SZXF1ZXN0ICYmICEoJ3dpdGhDcmVkZW50aWFscycgaW4gcmVxdWVzdCkgJiZcbiAgICAgICAgIWlzVVJMU2FtZU9yaWdpbihjb25maWcudXJsKSkge1xuICAgICAgcmVxdWVzdCA9IG5ldyB3aW5kb3cuWERvbWFpblJlcXVlc3QoKTtcbiAgICAgIGxvYWRFdmVudCA9ICdvbmxvYWQnO1xuICAgICAgeERvbWFpbiA9IHRydWU7XG4gICAgICByZXF1ZXN0Lm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiBoYW5kbGVQcm9ncmVzcygpIHt9O1xuICAgICAgcmVxdWVzdC5vbnRpbWVvdXQgPSBmdW5jdGlvbiBoYW5kbGVUaW1lb3V0KCkge307XG4gICAgfVxuXG4gICAgLy8gSFRUUCBiYXNpYyBhdXRoZW50aWNhdGlvblxuICAgIGlmIChjb25maWcuYXV0aCkge1xuICAgICAgdmFyIHVzZXJuYW1lID0gY29uZmlnLmF1dGgudXNlcm5hbWUgfHwgJyc7XG4gICAgICB2YXIgcGFzc3dvcmQgPSBjb25maWcuYXV0aC5wYXNzd29yZCB8fCAnJztcbiAgICAgIHJlcXVlc3RIZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmFzaWMgJyArIGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZCk7XG4gICAgfVxuXG4gICAgcmVxdWVzdC5vcGVuKGNvbmZpZy5tZXRob2QudG9VcHBlckNhc2UoKSwgYnVpbGRVUkwoY29uZmlnLnVybCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpLCB0cnVlKTtcblxuICAgIC8vIFNldCB0aGUgcmVxdWVzdCB0aW1lb3V0IGluIE1TXG4gICAgcmVxdWVzdC50aW1lb3V0ID0gY29uZmlnLnRpbWVvdXQ7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIHJlYWR5IHN0YXRlXG4gICAgcmVxdWVzdFtsb2FkRXZlbnRdID0gZnVuY3Rpb24gaGFuZGxlTG9hZCgpIHtcbiAgICAgIGlmICghcmVxdWVzdCB8fCAocmVxdWVzdC5yZWFkeVN0YXRlICE9PSA0ICYmICF4RG9tYWluKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSByZXF1ZXN0IGVycm9yZWQgb3V0IGFuZCB3ZSBkaWRuJ3QgZ2V0IGEgcmVzcG9uc2UsIHRoaXMgd2lsbCBiZVxuICAgICAgLy8gaGFuZGxlZCBieSBvbmVycm9yIGluc3RlYWRcbiAgICAgIC8vIFdpdGggb25lIGV4Y2VwdGlvbjogcmVxdWVzdCB0aGF0IHVzaW5nIGZpbGU6IHByb3RvY29sLCBtb3N0IGJyb3dzZXJzXG4gICAgICAvLyB3aWxsIHJldHVybiBzdGF0dXMgYXMgMCBldmVuIHRob3VnaCBpdCdzIGEgc3VjY2Vzc2Z1bCByZXF1ZXN0XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDAgJiYgIShyZXF1ZXN0LnJlc3BvbnNlVVJMICYmIHJlcXVlc3QucmVzcG9uc2VVUkwuaW5kZXhPZignZmlsZTonKSA9PT0gMCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBQcmVwYXJlIHRoZSByZXNwb25zZVxuICAgICAgdmFyIHJlc3BvbnNlSGVhZGVycyA9ICdnZXRBbGxSZXNwb25zZUhlYWRlcnMnIGluIHJlcXVlc3QgPyBwYXJzZUhlYWRlcnMocmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkgOiBudWxsO1xuICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9ICFjb25maWcucmVzcG9uc2VUeXBlIHx8IGNvbmZpZy5yZXNwb25zZVR5cGUgPT09ICd0ZXh0JyA/IHJlcXVlc3QucmVzcG9uc2VUZXh0IDogcmVxdWVzdC5yZXNwb25zZTtcbiAgICAgIHZhciByZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YTogcmVzcG9uc2VEYXRhLFxuICAgICAgICAvLyBJRSBzZW5kcyAxMjIzIGluc3RlYWQgb2YgMjA0IChodHRwczovL2dpdGh1Yi5jb20vYXhpb3MvYXhpb3MvaXNzdWVzLzIwMSlcbiAgICAgICAgc3RhdHVzOiByZXF1ZXN0LnN0YXR1cyA9PT0gMTIyMyA/IDIwNCA6IHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiByZXF1ZXN0LnN0YXR1cyA9PT0gMTIyMyA/ICdObyBDb250ZW50JyA6IHJlcXVlc3Quc3RhdHVzVGV4dCxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgICAgcmVxdWVzdDogcmVxdWVzdFxuICAgICAgfTtcblxuICAgICAgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIGxvdyBsZXZlbCBuZXR3b3JrIGVycm9yc1xuICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkge1xuICAgICAgLy8gUmVhbCBlcnJvcnMgYXJlIGhpZGRlbiBmcm9tIHVzIGJ5IHRoZSBicm93c2VyXG4gICAgICAvLyBvbmVycm9yIHNob3VsZCBvbmx5IGZpcmUgaWYgaXQncyBhIG5ldHdvcmsgZXJyb3JcbiAgICAgIHJlamVjdChjcmVhdGVFcnJvcignTmV0d29yayBFcnJvcicsIGNvbmZpZywgbnVsbCwgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIHRpbWVvdXRcbiAgICByZXF1ZXN0Lm9udGltZW91dCA9IGZ1bmN0aW9uIGhhbmRsZVRpbWVvdXQoKSB7XG4gICAgICByZWplY3QoY3JlYXRlRXJyb3IoJ3RpbWVvdXQgb2YgJyArIGNvbmZpZy50aW1lb3V0ICsgJ21zIGV4Y2VlZGVkJywgY29uZmlnLCAnRUNPTk5BQk9SVEVEJyxcbiAgICAgICAgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgLy8gVGhpcyBpcyBvbmx5IGRvbmUgaWYgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnQuXG4gICAgLy8gU3BlY2lmaWNhbGx5IG5vdCBpZiB3ZSdyZSBpbiBhIHdlYiB3b3JrZXIsIG9yIHJlYWN0LW5hdGl2ZS5cbiAgICBpZiAodXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSkge1xuICAgICAgdmFyIGNvb2tpZXMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvY29va2llcycpO1xuXG4gICAgICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgICAgIHZhciB4c3JmVmFsdWUgPSAoY29uZmlnLndpdGhDcmVkZW50aWFscyB8fCBpc1VSTFNhbWVPcmlnaW4oY29uZmlnLnVybCkpICYmIGNvbmZpZy54c3JmQ29va2llTmFtZSA/XG4gICAgICAgICAgY29va2llcy5yZWFkKGNvbmZpZy54c3JmQ29va2llTmFtZSkgOlxuICAgICAgICAgIHVuZGVmaW5lZDtcblxuICAgICAgaWYgKHhzcmZWYWx1ZSkge1xuICAgICAgICByZXF1ZXN0SGVhZGVyc1tjb25maWcueHNyZkhlYWRlck5hbWVdID0geHNyZlZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkZCBoZWFkZXJzIHRvIHRoZSByZXF1ZXN0XG4gICAgaWYgKCdzZXRSZXF1ZXN0SGVhZGVyJyBpbiByZXF1ZXN0KSB7XG4gICAgICB1dGlscy5mb3JFYWNoKHJlcXVlc3RIZWFkZXJzLCBmdW5jdGlvbiBzZXRSZXF1ZXN0SGVhZGVyKHZhbCwga2V5KSB7XG4gICAgICAgIGlmICh0eXBlb2YgcmVxdWVzdERhdGEgPT09ICd1bmRlZmluZWQnICYmIGtleS50b0xvd2VyQ2FzZSgpID09PSAnY29udGVudC10eXBlJykge1xuICAgICAgICAgIC8vIFJlbW92ZSBDb250ZW50LVR5cGUgaWYgZGF0YSBpcyB1bmRlZmluZWRcbiAgICAgICAgICBkZWxldGUgcmVxdWVzdEhlYWRlcnNba2V5XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBPdGhlcndpc2UgYWRkIGhlYWRlciB0byB0aGUgcmVxdWVzdFxuICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihrZXksIHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEFkZCB3aXRoQ3JlZGVudGlhbHMgdG8gcmVxdWVzdCBpZiBuZWVkZWRcbiAgICBpZiAoY29uZmlnLndpdGhDcmVkZW50aWFscykge1xuICAgICAgcmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIEFkZCByZXNwb25zZVR5cGUgdG8gcmVxdWVzdCBpZiBuZWVkZWRcbiAgICBpZiAoY29uZmlnLnJlc3BvbnNlVHlwZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSBjb25maWcucmVzcG9uc2VUeXBlO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBFeHBlY3RlZCBET01FeGNlcHRpb24gdGhyb3duIGJ5IGJyb3dzZXJzIG5vdCBjb21wYXRpYmxlIFhNTEh0dHBSZXF1ZXN0IExldmVsIDIuXG4gICAgICAgIC8vIEJ1dCwgdGhpcyBjYW4gYmUgc3VwcHJlc3NlZCBmb3IgJ2pzb24nIHR5cGUgYXMgaXQgY2FuIGJlIHBhcnNlZCBieSBkZWZhdWx0ICd0cmFuc2Zvcm1SZXNwb25zZScgZnVuY3Rpb24uXG4gICAgICAgIGlmIChjb25maWcucmVzcG9uc2VUeXBlICE9PSAnanNvbicpIHtcbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHByb2dyZXNzIGlmIG5lZWRlZFxuICAgIGlmICh0eXBlb2YgY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MpO1xuICAgIH1cblxuICAgIC8vIE5vdCBhbGwgYnJvd3NlcnMgc3VwcG9ydCB1cGxvYWQgZXZlbnRzXG4gICAgaWYgKHR5cGVvZiBjb25maWcub25VcGxvYWRQcm9ncmVzcyA9PT0gJ2Z1bmN0aW9uJyAmJiByZXF1ZXN0LnVwbG9hZCkge1xuICAgICAgcmVxdWVzdC51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBjb25maWcub25VcGxvYWRQcm9ncmVzcyk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuICAgICAgLy8gSGFuZGxlIGNhbmNlbGxhdGlvblxuICAgICAgY29uZmlnLmNhbmNlbFRva2VuLnByb21pc2UudGhlbihmdW5jdGlvbiBvbkNhbmNlbGVkKGNhbmNlbCkge1xuICAgICAgICBpZiAoIXJlcXVlc3QpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXF1ZXN0LmFib3J0KCk7XG4gICAgICAgIHJlamVjdChjYW5jZWwpO1xuICAgICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHJlcXVlc3REYXRhID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJlcXVlc3REYXRhID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBTZW5kIHRoZSByZXF1ZXN0XG4gICAgcmVxdWVzdC5zZW5kKHJlcXVlc3REYXRhKTtcbiAgfSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2FkYXB0ZXJzL3hoci5qc1xuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBlbmhhbmNlRXJyb3IgPSByZXF1aXJlKCcuL2VuaGFuY2VFcnJvcicpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgbWVzc2FnZSwgY29uZmlnLCBlcnJvciBjb2RlLCByZXF1ZXN0IGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgY3JlYXRlZCBlcnJvci5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGVFcnJvcihtZXNzYWdlLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIHZhciBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgcmV0dXJuIGVuaGFuY2VFcnJvcihlcnJvciwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvY3JlYXRlRXJyb3IuanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQ2FuY2VsKHZhbHVlKSB7XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZS5fX0NBTkNFTF9fKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY2FuY2VsL2lzQ2FuY2VsLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBBIGBDYW5jZWxgIGlzIGFuIG9iamVjdCB0aGF0IGlzIHRocm93biB3aGVuIGFuIG9wZXJhdGlvbiBpcyBjYW5jZWxlZC5cbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbWVzc2FnZSBUaGUgbWVzc2FnZS5cbiAqL1xuZnVuY3Rpb24gQ2FuY2VsKG1lc3NhZ2UpIHtcbiAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbn1cblxuQ2FuY2VsLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICByZXR1cm4gJ0NhbmNlbCcgKyAodGhpcy5tZXNzYWdlID8gJzogJyArIHRoaXMubWVzc2FnZSA6ICcnKTtcbn07XG5cbkNhbmNlbC5wcm90b3R5cGUuX19DQU5DRUxfXyA9IHRydWU7XG5cbm1vZHVsZS5leHBvcnRzID0gQ2FuY2VsO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9DYW5jZWwuanNcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IGF4aW9zLCB7IEF4aW9zUmVzcG9uc2UsIEF4aW9zRXJyb3IgfSAgZnJvbSAnYXhpb3MnO1xuXG5pbnRlcmZhY2UgSUNvaW4ge1xuICBuYW1lOiBzdHJpbmc7XG59XG5pbnRlcmZhY2UgSUV4Y2hhbmdlIHtcbiAgbmFtZTogc3RyaW5nO1xuICBjdXJyZW5jeTogSUN1cnJlbmN5O1xuICB1cmw6IHN0cmluZztcbiAgZGlzcGxheU5hbWU6IHN0cmluZztcbn1cbmludGVyZmFjZSBJQ3VycmVuY3kge1xuICBuYW1lOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBJQ29pblByaWNlIHtcbiAgZXhjaGFuZ2U6IElFeGNoYW5nZTtcbiAgY29pbjogSUNvaW47XG4gIHByaWNlOiBudW1iZXI7XG4gIHRpbWU6IG51bWJlcjtcbiAgY3VycmVuY3k6IElDdXJyZW5jeTtcbn1cblxuaW50ZXJmYWNlIElSZXNwb25zZSB7XG4gIGV4Y2hhbmdlOiBzdHJpbmc7XG4gIGNvaW46IHN0cmluZztcbiAgcHJpY2U6IG51bWJlcjtcbiAgdGltZTogbnVtYmVyO1xuICBjdXJyZW5jeTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgSUN1cnJlbmN5UmVzcG9uc2Uge1xuICBzb3VyY2U6IHN0cmluZztcbiAgdGFyZ2V0OiBzdHJpbmc7XG4gIHJhdGU6IG51bWJlcjtcbn1cblxuLy8gLy8gY3VycmVuY3lcbmNvbnN0IEtSVzogSUN1cnJlbmN5ID0geyBuYW1lOiBcImtyd1wiIH1cbmNvbnN0IFVTRDogSUN1cnJlbmN5ID0geyBuYW1lOiBcInVzZFwiIH1cbmNvbnN0IEpQWTogSUN1cnJlbmN5ID0geyBuYW1lOiBcImpweVwiIH1cbmNvbnN0IENVUlJFTkNJRVMgPSBbS1JXLCBVU0QsIEpQWV1cbi8vZXhjaGFuZ2VcbmNvbnN0IEJJVEZJTkVYOiBJRXhjaGFuZ2UgPSB7IG5hbWU6IFwiYml0ZmluZXhcIiwgY3VycmVuY3k6IFVTRCwgdXJsOiAnaHR0cHM6Ly93d3cuYml0ZmluZXguY29tJywgZGlzcGxheU5hbWU6ICdCSVRGSU5FWCcgfVxuY29uc3QgQklUSFVNQjogSUV4Y2hhbmdlID0geyBuYW1lOiBcImJpdGh1bWJcIiwgY3VycmVuY3k6IEtSVywgdXJsOiAnaHR0cHM6Ly93d3cuYml0aHVtYi5jb20nLCBkaXNwbGF5TmFtZTogJ+u5l+yNuCcgfVxuY29uc3QgQ09JTk9ORTogSUV4Y2hhbmdlID0geyBuYW1lOiBcImNvaW5vbmVcIiwgY3VycmVuY3k6IEtSVywgdXJsOiAnaHR0cHM6Ly93d3cuY29pbm9uZS5jby5rcicsIGRpc3BsYXlOYW1lOiAn7L2U7J247JuQJyB9XG5jb25zdCBVUEJJVDogSUV4Y2hhbmdlID0geyBuYW1lOiBcInVwYml0XCIsIGN1cnJlbmN5OiBLUlcsIHVybDogJ2h0dHBzOi8vdXBiaXQuY29tJywgZGlzcGxheU5hbWU6ICfsl4XruYTtirgnIH1cbmNvbnN0IEJJTkFOQ0U6IElFeGNoYW5nZSA9IHsgbmFtZTogXCJiaW5hbmNlXCIsIGN1cnJlbmN5OiBVU0QsIHVybDogJ2h0dHBzOi8vd3d3LmJpbmFuY2UuY29tJywgZGlzcGxheU5hbWU6ICdCSU5BTkNFJyB9XG5jb25zdCBFWENIQU5HRVMgPSBbQklURklORVgsIEJJTkFOQ0UsIEJJVEhVTUIsIENPSU5PTkUsIFVQQklUXVxuLy9jb2luXG5jb25zdCBCVEM6IElDb2luID0geyBuYW1lOiBcImJ0Y1wiIH1cbmNvbnN0IEVUSDogSUNvaW4gPSB7IG5hbWU6IFwiZXRoXCIgfVxuY29uc3QgWFJQOiBJQ29pbiA9IHsgbmFtZTogXCJ4cnBcIiB9XG5jb25zdCBMVEM6IElDb2luID0geyBuYW1lOiBcImx0Y1wiIH1cbmNvbnN0IFFUVU06IElDb2luID0geyBuYW1lOiBcInF0dW1cIiB9XG5jb25zdCBEQVNIOiBJQ29pbiA9IHsgbmFtZTogXCJkYXNoXCIgfVxuY29uc3QgRVRDOiBJQ29pbiA9IHsgbmFtZTogXCJldGNcIiB9XG5jb25zdCBCQ0g6IElDb2luID0geyBuYW1lOiBcImJjaFwiIH1cbmNvbnN0IFhNUjogSUNvaW4gPSB7IG5hbWU6IFwieG1yXCIgfVxuY29uc3QgWkVDOiBJQ29pbiA9IHsgbmFtZTogXCJ6ZWNcIiB9XG5jb25zdCBCVEc6IElDb2luID0geyBuYW1lOiBcImJ0Z1wiIH1cbmNvbnN0IEVPUzogSUNvaW4gPSB7IG5hbWU6IFwiZW9zXCIgfVxuY29uc3QgSU9UQTogSUNvaW4gPSB7IG5hbWU6IFwiaW90YVwiIH1cbmNvbnN0IFNOVDogSUNvaW4gPSB7IG5hbWU6IFwic250XCIgfVxuY29uc3QgTkVPOiBJQ29pbiA9IHsgbmFtZTogXCJuZW9cIiB9XG5jb25zdCBBREE6IElDb2luID0geyBuYW1lOiBcImFkYVwiIH1cbmNvbnN0IFhMTTogSUNvaW4gPSB7IG5hbWU6IFwieGxtXCIgfVxuY29uc3QgWEVNOiBJQ29pbiA9IHsgbmFtZTogJ3hlbScgfVxuY29uc3QgU1RFRU06IElDb2luID0geyBuYW1lOiAnc3RlZW0nIH1cbmNvbnN0IE1FUjogSUNvaW4gPSB7IG5hbWU6ICdtZXInIH1cbmNvbnN0IFNUUkFUOiBJQ29pbiA9IHsgbmFtZTogJ3N0cmF0JyB9XG5jb25zdCBTQkQ6IElDb2luID0geyBuYW1lOiAnc2JkJyB9XG5jb25zdCBPTUc6IElDb2luID0geyBuYW1lOiAnb21nJyB9XG5jb25zdCBMU0s6IElDb2luID0geyBuYW1lOiAnbHNrJyB9XG5jb25zdCBUSVg6IElDb2luID0geyBuYW1lOiAndGl4JyB9XG5jb25zdCBFTUMyOiBJQ29pbiA9IHsgbmFtZTogJ2VtYzInIH1cbmNvbnN0IEFSRFI6IElDb2luID0geyBuYW1lOiAnYXJkcicgfVxuY29uc3QgUElWWDogSUNvaW4gPSB7IG5hbWU6ICdwaXZ4JyB9XG5jb25zdCBQT1dSOiBJQ29pbiA9IHsgbmFtZTogJ3Bvd3InIH1cbmNvbnN0IE1UTDogSUNvaW4gPSB7IG5hbWU6ICdtdGwnIH1cbmNvbnN0IEdSUzogSUNvaW4gPSB7IG5hbWU6ICdncnMnIH1cbmNvbnN0IFNUT1JKOiBJQ29pbiA9IHsgbmFtZTogJ3N0b3JqJyB9XG5jb25zdCBBUks6IElDb2luID0geyBuYW1lOiAnYXJrJyB9XG5jb25zdCBSRVA6IElDb2luID0geyBuYW1lOiAncmVwJyB9XG5jb25zdCBLTUQ6IElDb2luID0geyBuYW1lOiAna21kJyB9XG5jb25zdCBXQVZFUzogSUNvaW4gPSB7IG5hbWU6ICd3YXZlcycgfVxuY29uc3QgVlRDOiBJQ29pbiA9IHsgbmFtZTogJ3Z0YycgfVxuY29uc3QgQ09JTlMgPSBbQlRDLEVUSCxYUlAsTFRDLFFUVU0sREFTSCxFVEMsQkNILFhNUixaRUMsQlRHLEVPUyxJT1RBLFNOVCxORU8sT01HLFJFUCxBREEsWExNLFhFTSxTVEVFTSxNRVIsU1RSQVQsU0JELExTSyxUSVgsRU1DMixBUkRSLFBJVlgsUE9XUixNVEwsR1JTLFNUT1JKLEFSSyxLTUQsV0FWRVMsVlRDXVxuY29uc3QgVVBCSVRfQ09JTlMgPSBbQURBLFhMTSxYRU0sU1RFRU0sTUVSLFNUUkFULFNCRCxMU0ssVElYLEVNQzIsQVJEUixQSVZYLFBPV1IsTVRMLEdSUyxTVE9SSixBUkssS01ELFdBVkVTLFZUQ11cblxuZnVuY3Rpb24gZm9yRWFjaChsaXN0OiBhbnksIGNhbGxiYWNrOiAoaXRlbTogYW55KSA9PiB2b2lkKSB7XG4gIGlmIChsaXN0LmZvckVhY2gpIHtcbiAgICBsaXN0LmZvckVhY2goY2FsbGJhY2spO1xuICB9IGVsc2UgaWYgKEFycmF5ICYmIEFycmF5LmZyb20pIHtcbiAgICBBcnJheS5mcm9tKGxpc3QpLmZvckVhY2goY2FsbGJhY2spO1xuICB9IGVsc2Uge1xuICAgIGxldCBhcnJheSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFycmF5LnB1c2gobGlzdFtpXSk7XG4gICAgfVxuICAgIGlmIChhcnJheS5mb3JFYWNoKSB7XG4gICAgICBhcnJheS5mb3JFYWNoKGNhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaSA9IDAgOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2FsbGJhY2soYXJyYXlbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kKGxpc3Q6IGFueSwgY2FsbGJhY2s6IChpdGVtOiBhbnkpID0+IGJvb2xlYW4pIHtcbiAgaWYgKGxpc3QuZmluZCkge1xuICAgIHJldHVybiBsaXN0LmZpbmQoY2FsbGJhY2spO1xuICB9IGVsc2UgaWYgKGxpc3QuZmlsdGVyKSB7XG4gICAgcmV0dXJuIGxpc3QuZmlsdGVyKGNhbGxiYWNrKVswXVxuICB9IGVsc2Uge1xuICAgIGxldCBhcnJheSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFycmF5LnB1c2gobGlzdFtpXSk7XG4gICAgfVxuICAgIGlmIChhcnJheS5maW5kKSB7XG4gICAgICByZXR1cm4gYXJyYXkuZmluZChjYWxsYmFjayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChjYWxsYmFjayhhcnJheVtpXSkpIHtcbiAgICAgICAgICByZXR1cm4gYXJyYXlbaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVhZHkoZm46IChFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0PzogYW55LCB1c2VDYXB0dXJlPzogYm9vbGVhbikgPT4gdm9pZCkge1xuICBpZiAoKGRvY3VtZW50IGFzIGFueSkuYXR0YWNoRXZlbnQgPyBkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgOiBkb2N1bWVudC5yZWFkeVN0YXRlICE9PSBcImxvYWRpbmdcIikge1xuICAgIGZuKCk7XG4gIH0gZWxzZSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZm4pO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1haW4oKSB7XG4gIGxldCByYXRlOiBzdHJpbmcgPSAndHJhbnNsYXRlJztcbiAgbGV0IHRpbWU6IG51bWJlciA9IDEwO1xuICBsZXQgcHJpY2VEYXRhOiBJQ29pblByaWNlW10gPSBbXTtcbiAgbGV0IHJlZnJlc2hUaW1lOiBudW1iZXIgPSA2MDtcbiAgbGV0IGxvYWRlZCA9IGZhbHNlO1xuICBsZXQgY3VycmVuY3lSYXRlOiBudW1iZXIgPSAwO1xuXG4gIGZ1bmN0aW9uIHNldFJhdGUobmV3UmF0ZTogc3RyaW5nKSB7XG4gICAgc3dpdGNoKG5ld1JhdGUpIHtcbiAgICAgIGNhc2UgJ2dpbXAnOlxuICAgICAgY2FzZSAndHJhbnNsYXRlJzpcbiAgICAgICAgcmF0ZSA9IG5ld1JhdGU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY2hhbmdlJzpcbiAgICAgICAgcmF0ZSA9ICd0cmFuc2xhdGUnO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFJhdGUoKSB7XG4gICAgcmV0dXJuIHJhdGU7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRDdXJyZW5jeVJhdGUocmF0ZTogbnVtYmVyKSB7XG4gICAgY3VycmVuY3lSYXRlID0gcmF0ZTtcbiAgICBsZXQgY3VycmVuY3kgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3VycmVuY3knKTtcbiAgICBpZiAoY3VycmVuY3kgIT0gbnVsbCkge1xuICAgICAgY3VycmVuY3kuc2V0QXR0cmlidXRlKCdkYXRhLWNvbnRlbnQnLCBmb3JtYXRQcmljZShyYXRlLCBLUlcubmFtZSkpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q3VycmVuY3lSYXRlKCkge1xuICAgIHJldHVybiBjdXJyZW5jeVJhdGU7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRUaW1lKG5ld1RpbWU6IG51bWJlcikge1xuICAgIHN3aXRjaChuZXdUaW1lKSB7XG4gICAgICBjYXNlIDEwOlxuICAgICAgY2FzZSAzMDpcbiAgICAgIGNhc2UgNjA6XG4gICAgICBjYXNlIDcyMDpcbiAgICAgICAgICB0aW1lID0gbmV3VGltZTtcbiAgICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRUaW1lKCkge1xuICAgIHJldHVybiB0aW1lO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0UHJpY2VEYXRhKG5ld1ByaWNlRGF0YTogSVJlc3BvbnNlW10pIHtcbiAgICBwcmljZURhdGEgPSBuZXdQcmljZURhdGEubWFwKChpdGVtOiBJUmVzcG9uc2UpID0+IGdldENvaW5QcmljZShpdGVtKSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFByaWNlRGF0YSgpIHtcbiAgICByZXR1cm4gcHJpY2VEYXRhO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UmVmcmVzaFRpbWUoKSB7XG4gICAgcmV0dXJuIHJlZnJlc2hUaW1lO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVjUmVmcmVzaFRpbWUoKSB7XG4gICAgcmVmcmVzaFRpbWUgPSByZWZyZXNoVGltZSAtIDE7XG4gIH1cblxuICBmdW5jdGlvbiByZXNldFJlZnJlc2hUaW1lKCkge1xuICAgIHJlZnJlc2hUaW1lID0gNjA7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRCYXNlRXhjaG5hZ2UoKSB7XG4gICAgcmV0dXJuIEJJVEZJTkVYO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RXhjaGFuZ2VzKCkge1xuICAgIHJldHVybiBbQklUSFVNQiwgQ09JTk9ORSwgVVBCSVRdO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0QWxsRXhjaGFuZ2VzKCkge1xuICAgIHJldHVybiBbZ2V0QmFzZUV4Y2huYWdlKCldLmNvbmNhdChnZXRFeGNoYW5nZXMoKSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRFeGNoYW5nZShuYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gZmluZChFWENIQU5HRVMsIGV4Y2hhbmdlID0+IHtcbiAgICAgIHJldHVybiBleGNoYW5nZS5uYW1lID09PSBuYW1lXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRDb2luKG5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiBmaW5kKENPSU5TLCBjb2luID0+IHtcbiAgICAgIHJldHVybiBjb2luLm5hbWUgPT09IG5hbWVcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEN1cnJlbmN5KG5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiBmaW5kKENVUlJFTkNJRVMsIGN1cnJlbmN5ID0+IHtcbiAgICAgIHJldHVybiBjdXJyZW5jeS5uYW1lID09PSBuYW1lXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRDb2luUHJpY2UocmVzcG9uc2U6IElSZXNwb25zZSkge1xuICAgIGxldCB2YWx1ZTogSUNvaW5QcmljZSA9IHtcbiAgICAgIGV4Y2hhbmdlOiBnZXRFeGNoYW5nZShyZXNwb25zZS5leGNoYW5nZSksXG4gICAgICBjb2luOiBnZXRDb2luKHJlc3BvbnNlLmNvaW4pLFxuICAgICAgcHJpY2U6IHJlc3BvbnNlLnByaWNlLFxuICAgICAgdGltZTogcmVzcG9uc2UudGltZSxcbiAgICAgIGN1cnJlbmN5OiBnZXRDdXJyZW5jeShyZXNwb25zZS5jdXJyZW5jeSlcbiAgICB9O1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFByaWNlKGV4Y2hhbmdlOiBJRXhjaGFuZ2UsIGNvaW46IElDb2luLCB0aW1lOiBudW1iZXIpIHtcbiAgICBsZXQganNvbjogSUNvaW5QcmljZSA9IGZpbmQoZ2V0UHJpY2VEYXRhKCksIGl0ZW0gPT4ge1xuICAgICAgICByZXR1cm4gaXRlbS5leGNoYW5nZSA9PT0gZXhjaGFuZ2UgJiYgaXRlbS5jb2luID09PSBjb2luICYmIGl0ZW0udGltZSA9PSB0aW1lXG4gICAgICB9KTtcbiAgICByZXR1cm4ganNvbiAmJiBqc29uLnByaWNlIHx8IDAgLy8gPyBob3cgdG8gaGFuZGxlIHVuZGVmaW5lZFxuICB9XG5cbiAgZnVuY3Rpb24gZm9ybWF0UHJpY2UocHJpY2U6IG51bWJlciwgY3VycmVuY3k6IHN0cmluZykge1xuICAgIGxldCBkaWdpdHM7XG4gICAgaWYgKHByaWNlIDwgMTApIHtcbiAgICAgIGRpZ2l0cyA9IDM7XG4gICAgfSBlbHNlIGlmIChwcmljZSA8IDEwMCkge1xuICAgICAgZGlnaXRzID0gMjtcbiAgICB9IGVsc2UgaWYgKHByaWNlIDwgMTAwMCkge1xuICAgICAgZGlnaXRzID0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlnaXRzID0gMDtcbiAgICB9XG4gICAgbGV0IGZvcm1hdHRlciA9IG5ldyBJbnRsLk51bWJlckZvcm1hdCgnZW4tVVMnLCB7XG4gICAgICBzdHlsZTogJ2N1cnJlbmN5JyxcbiAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeSxcbiAgICAgIG1pbmltdW1GcmFjdGlvbkRpZ2l0czogZGlnaXRzLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGZvcm1hdHRlci5mb3JtYXQocHJpY2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVuZGVyVEhlYWQoKSB7XG4gICAgbGV0IHRoZWFkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGhlYWQnKTtcbiAgICBmb3JFYWNoKHRoZWFkLnJvd3MsIHJvdyA9PiB0aGVhZC5yZW1vdmVDaGlsZChyb3cpKTtcbiAgICBsZXQgcm93ID0gdGhlYWQuaW5zZXJ0Um93KCk7XG4gICAgcm93Lmluc2VydENlbGwoKS5vdXRlckhUTUwgPSAnPHRoIHNjb3BlPVwiY29sXCI+PC90aD4nO1xuICAgIGZvckVhY2goZ2V0QWxsRXhjaGFuZ2VzKCksIGV4Y2hhbmdlID0+IHtcbiAgICAgIGxldCBjZWxsID0gcm93Lmluc2VydENlbGwoKTtcbiAgICAgIGNlbGwub3V0ZXJIVE1MID0gYDx0aCBzY29wZT1cImNvbFwiPjxhIGhyZWY9XCIke2V4Y2hhbmdlLnVybH1cIiBjbGFzcz1cInRleHQtZGFyayAke2V4Y2hhbmdlLm5hbWV9XCIgdGFyZ2V0PVwiX2JsYW5rXCI+JHtleGNoYW5nZS5kaXNwbGF5TmFtZX08L2E+PHNtYWxsIGNsYXNzPVwiYmFuLSR7ZXhjaGFuZ2UubmFtZX1cIj48L3NtYWxsPjwvdGg+YFxuICAgICAgdXBkYXRlRXhjaGFuZ2VTdGF0dXMoZXhjaGFuZ2UpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVuZGVyVEJvZHkoKSB7XG4gICAgbGV0IHRib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGJvZHknKTtcbiAgICBmb3JFYWNoKHRib2R5LnJvd3MsIHJvdyA9PiB0Ym9keS5yZW1vdmVDaGlsZChyb3cpKTtcbiAgICBmb3JFYWNoKENPSU5TLCBjb2luID0+IHtcbiAgICAgIGxldCByb3cgPSB0Ym9keS5pbnNlcnRSb3coKTtcbiAgICAgIGxldCBjZWxsID0gcm93Lmluc2VydENlbGwoKTtcbiAgICAgIGNlbGwub3V0ZXJIVE1MID0gYDx0aCBzY29wZT1cInJvd1wiPiR7Y29pbi5uYW1lLnRvVXBwZXJDYXNlKCl9PGJyPjxhIGhyZWY9XCIke2dldENoYXJ0TGluayhjb2luKX1cIiBjbGFzcz1cInRleHQtbXV0ZWRcIiB0YXJnZXQ9XCJfYmxhbmtcIj48c21hbGwgY2xhc3M9XCJvaSBvaS1iYXItY2hhcnRcIj48L3NtYWxsPjwvYT48L3RoPmBcbiAgICAgIGZvckVhY2goZ2V0QWxsRXhjaGFuZ2VzKCksIGV4Y2hhbmdlID0+IHtcbiAgICAgICAgLy8gbGV0IGNlbGwgPSBnZXRDZWxsKGV4Y2hhbmdlLCBjb2luKTtcbiAgICAgICAgbGV0IGh0bWxcbiAgICAgICAgbGV0IHByaWNlID0gZ2V0UHJpY2UoZXhjaGFuZ2UsIGNvaW4sIDApO1xuICAgICAgICBpZiAocHJpY2UgPT0gMCkge1xuICAgICAgICAgIGh0bWwgPSAnLSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IHRpbWUgPSBnZXRUaW1lKCk7XG4gICAgICAgICAgbGV0IGxhc3RQcmljZSA9IGdldFByaWNlKGV4Y2hhbmdlLCBjb2luLCB0aW1lKTtcbiAgICAgICAgICBpZiAocmF0ZSA9PT0gJ2dpbXAnKSB7XG4gICAgICAgICAgICBpZiAoZXhjaGFuZ2UgPT0gZ2V0QmFzZUV4Y2huYWdlKCkpIHtcbiAgICAgICAgICAgICAgaHRtbCA9IHJlbmRlcktvclByaWNlKGV4Y2hhbmdlLCBwcmljZSwgbGFzdFByaWNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxldCBiYXNlRXhjaGFuZ2UgPSBnZXRCYXNlRXhjaG5hZ2UoKTtcbiAgICAgICAgICAgICAgbGV0IGJpdGZpbmV4UHJpY2UgPSBnZXRQcmljZShiYXNlRXhjaGFuZ2UsIGNvaW4sIDApO1xuICAgICAgICAgICAgICBsZXQgYml0ZmluZXhMYXN0UHJpY2UgPSBnZXRQcmljZShiYXNlRXhjaGFuZ2UsIGNvaW4sIHRpbWUpO1xuICAgICAgICAgICAgICBodG1sID0gcmVuZGVyR2ltcChleGNoYW5nZSwgcHJpY2UsIGxhc3RQcmljZSwgYml0ZmluZXhQcmljZSwgYml0ZmluZXhMYXN0UHJpY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBodG1sID0gcmVuZGVyQ2hhbmdlcyhleGNoYW5nZSwgcHJpY2UsIGxhc3RQcmljZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBjZWxsID0gcm93Lmluc2VydENlbGwoKTtcbiAgICAgICAgY2VsbC5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgcmVuZGVyVEhlYWQoKTtcbiAgICByZW5kZXJUQm9keSgpO1xuICAgICQoZnVuY3Rpb24gKCkge1xuICAgICAgJCgnW2RhdGEtdG9nZ2xlPVwicG9wb3ZlclwiXScpLnBvcG92ZXIoeyAndHJpZ2dlcic6ICdob3ZlcicsIH0pXG4gICAgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlckNoYW5nZXMoZXhjaGFuZ2U6IElFeGNoYW5nZSwgcHJpY2U6IG51bWJlciwgbGFzdFByaWNlOiBudW1iZXIpIHtcbiAgICBsZXQgcHJpY2VDaGFuZ2UgPSBwcmljZSAvIGxhc3RQcmljZSAtIDE7XG4gICAgaWYgKGxhc3RQcmljZSAhPSAwICYmIHByaWNlICE9IDApIHtcbiAgICAgIGxldCBmb250Q29sb3IgPSBnZXRGb250Q29sb3IocHJpY2VDaGFuZ2UpO1xuICAgICAgcmV0dXJuIGA8c3BhbiBzdHlsZT1cImNvbG9yOiAke2ZvbnRDb2xvcn07XCI+JHtmb3JtYXRQcmljZShwcmljZSwgZXhjaGFuZ2UuY3VycmVuY3kubmFtZSl9PC9zcGFuPjxicj48c21hbGwgZGF0YS10b2dnbGU9XCJwb3BvdmVyXCIgZGF0YS1wbGFjZW1lbnQ9XCJib3R0b21cIiBkYXRhLWNvbnRlbnQ9XCIke2Zvcm1hdFByaWNlKGxhc3RQcmljZSwgZXhjaGFuZ2UuY3VycmVuY3kubmFtZSl9XCI+JHsoMTAwICogcHJpY2VDaGFuZ2UpLnRvRml4ZWQoMil9JTwvc21hbGw+YDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGA8c3Bhbj4ke2Zvcm1hdFByaWNlKHByaWNlLCBleGNoYW5nZS5jdXJyZW5jeS5uYW1lKX08L3NwYW4+YDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZW5kZXJLb3JQcmljZShleGNoYW5nZTogSUV4Y2hhbmdlLCBwcmljZTogbnVtYmVyLCBsYXN0UHJpY2U6IG51bWJlcikge1xuICAgIGxldCBjdXJyZW5jeVJhdGUgPSBnZXRDdXJyZW5jeVJhdGUoKTtcbiAgICBsZXQgcHJpY2VDaGFuZ2UgPSBwcmljZSAvIGxhc3RQcmljZSAtIDE7XG4gICAgbGV0IGtvclByaWNlID0gcHJpY2UgKiBjdXJyZW5jeVJhdGU7XG4gICAgaWYgKGxhc3RQcmljZSAhPSAwICYmIGtvclByaWNlICE9IDApIHtcbiAgICAgIGxldCBmb250Q29sb3IgPSBnZXRGb250Q29sb3IocHJpY2VDaGFuZ2UpO1xuICAgICAgbGV0IGZvcm1hdHRlZFByaWNlID0gZm9ybWF0UHJpY2UocHJpY2UsIGV4Y2hhbmdlLmN1cnJlbmN5Lm5hbWUpO1xuICAgICAgbGV0IGZvcm1hdHRlZEtvclByaWNlID0gZm9ybWF0UHJpY2Uoa29yUHJpY2UsIEtSVy5uYW1lKTtcbiAgICAgIHJldHVybiBgPHNwYW4gc3R5bGU9XCJjb2xvcjogJHtmb250Q29sb3J9O1wiPiR7Zm9ybWF0dGVkUHJpY2V9PC9zcGFuPjxicj48c21hbGw+JHtmb3JtYXR0ZWRLb3JQcmljZX08L3NtYWxsPmA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBgPHNwYW4+JHtmb3JtYXRQcmljZShwcmljZSwgZXhjaGFuZ2UuY3VycmVuY3kubmFtZSl9PC9zcGFuPmA7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVuZGVyR2ltcChleGNoYW5nZTogSUV4Y2hhbmdlLCAgcHJpY2U6IG51bWJlciwgbGFzdFByaWNlOiBudW1iZXIsIGJhc2VQcmljZTogbnVtYmVyLCBiYXNlTGFzdFByaWNlOiBudW1iZXIpIHtcbiAgICBpZiAocHJpY2UgPT0gMCkgeyByZXR1cm4gJyc7IH1cbiAgICBsZXQgYmFzZUV4Y2hhbmdlID0gZ2V0QmFzZUV4Y2huYWdlKCk7XG4gICAgbGV0IGN1cnJlbmN5UmF0ZTtcbiAgICBpZiAoYmFzZUV4Y2hhbmdlLmN1cnJlbmN5ID09PSBVU0QgJiYgZXhjaGFuZ2UuY3VycmVuY3kgPT09IEtSVykge1xuICAgICAgY3VycmVuY3lSYXRlID0gZ2V0Q3VycmVuY3lSYXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbmN5UmF0ZSA9IDE7XG4gICAgfVxuXG4gICAgbGV0IHByaWNlQ2hhbmdlID0gcHJpY2UgLyBsYXN0UHJpY2UgLSAxO1xuICAgIGxldCBmb250Q29sb3IgPSBnZXRGb250Q29sb3IocHJpY2VDaGFuZ2UpO1xuICAgIGlmIChiYXNlUHJpY2UgPT0gMCB8fCBjdXJyZW5jeVJhdGUgPT0gMCkge1xuICAgICAgcmV0dXJuIGA8c3BhbiBzdHlsZT1cImNvbG9yOiAke2ZvbnRDb2xvcn07XCI+JHtmb3JtYXRQcmljZShwcmljZSwgZXhjaGFuZ2UuY3VycmVuY3kubmFtZSl9PC9zcGFuPmA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBnaW1wID0gcHJpY2UgLyAoYmFzZVByaWNlICogY3VycmVuY3lSYXRlKSAtIDE7XG4gICAgICBsZXQgbGFzdEdpbXAgPSBsYXN0UHJpY2UgLyAoYmFzZUxhc3RQcmljZSAqIGN1cnJlbmN5UmF0ZSkgLSAxO1xuICAgICAgbGV0IGdpbXBDaGFuZ2UgPSAoMTAwICogKGdpbXAgLSBsYXN0R2ltcCkpXG4gICAgICBsZXQgZm9ybWF0dGVkR2ltcENoYW5nZSA9IGdpbXBDaGFuZ2UgPiAwID8gYCske2dpbXBDaGFuZ2UudG9GaXhlZCgyKX0lYCA6IGAke2dpbXBDaGFuZ2UudG9GaXhlZCgyKX0lYFxuICAgICAgcmV0dXJuIGA8c3BhbiBzdHlsZT1cImNvbG9yOiAke2ZvbnRDb2xvcn07XCI+JHtmb3JtYXRQcmljZShwcmljZSwgZXhjaGFuZ2UuY3VycmVuY3kubmFtZSl9PC9zcGFuPjxicj48c21hbGwgIGRhdGEtdG9nZ2xlPVwicG9wb3ZlclwiIGRhdGEtcGxhY2VtZW50PVwiYm90dG9tXCIgZGF0YS1jb250ZW50PVwiJHtmb3JtYXR0ZWRHaW1wQ2hhbmdlfVwiPiR7KDEwMCAqIGdpbXApLnRvRml4ZWQoMil9JTwvc21hbGw+YDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRDaGFydExpbmsoY29pbjogSUNvaW4pIHtcbiAgICBpZiAoVVBCSVRfQ09JTlMuaW5kZXhPZihjb2luKSA+PSAwKSB7XG4gICAgICByZXR1cm4gYGh0dHBzOi8vdXBiaXQuY29tL2V4Y2hhbmdlP2NvZGU9Q1JJWC5VUEJJVC5LUlctJHtjb2luLm5hbWUudG9VcHBlckNhc2UoKX1gXG4gICAgfVxuICAgIHN3aXRjaCAoY29pbikge1xuICAgICAgY2FzZSBJT1RBOlxuICAgICAgICByZXR1cm4gJ2h0dHBzOi8vY3J5cHRvd2F0LmNoL2JpdGZpbmV4L2lvdHVzZCdcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBgaHR0cHM6Ly9jcnlwdG93YXQuY2gvYml0ZmluZXgvJHtjb2luLm5hbWV9dXNkYFxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZvbnRDb2xvcihwcmljZUNoYW5nZTogbnVtYmVyKSB7XG4gICAgaWYgKHByaWNlQ2hhbmdlID4gMCkge1xuICAgICAgcmV0dXJuICdyZWQnO1xuICAgIH0gZWxzZSBpZiAocHJpY2VDaGFuZ2UgPCAwKSB7XG4gICAgICByZXR1cm4gJ2JsdWUnO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ2JsYWNrJztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZW5kZXJVcGRhdGVkQXQodXBkYXRlZEF0OiBudW1iZXIpIHtcbiAgICBsZXQgdGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51cGRhdGVkLWF0JykgYXMgSFRNTEVsZW1lbnRcbiAgICB0ZXh0LmlubmVyVGV4dCA9IGdldEZvcm1hdFVwZGF0ZWRBdCh1cGRhdGVkQXQpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Rm9ybWF0VXBkYXRlZEF0KHVwZGF0ZWRBdDogbnVtYmVyKSB7XG4gICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSh1cGRhdGVkQXQpO1xuXG4gICAgcmV0dXJuIGAke2RhdGUuZ2V0RnVsbFllYXIoKX0vJHtkYXRlLmdldE1vbnRoKCkrMX0vJHtkYXRlLmdldERhdGUoKX1gXG4gICAgICArIGAgJHtkYXRlLnRvTG9jYWxlVGltZVN0cmluZygpfWA7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRMaXNlbmVycygpIHtcbiAgICBsZXQgcmFkaW9CdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1yYWRpb10nKTtcbiAgICBmb3JFYWNoKHJhZGlvQnV0dG9ucywgKGJ1dHRvbjogSFRNTElucHV0RWxlbWVudCkgPT4ge1xuICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT4ge1xuICAgICAgICBpZiAoYnV0dG9uLm5hbWUgPT09ICdyYXRlJykge1xuICAgICAgICAgIGlmIChidXR0b24uaWQgPT09ICdnaW1wJykge1xuICAgICAgICAgICAgc2V0UmF0ZSgnZ2ltcCcpO1xuICAgICAgICAgICAgcmVuZGVyKCk7XG4gICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsICdGaWx0ZXInLCAnU2V0SW5kaWNhdG9yJywgJ2dpbXAnKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGJ1dHRvbi5pZCA9PT0gJ3RyYW5zbGF0ZScpIHtcbiAgICAgICAgICAgIHNldFJhdGUoJ3RyYW5zbGF0ZScpO1xuICAgICAgICAgICAgcmVuZGVyKCk7XG4gICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsICdGaWx0ZXInLCAnU2V0SW5kaWNhdG9yJywgJ3RyYW5zbGF0ZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChidXR0b24ubmFtZSA9PT0gJ3RpbWUnKSB7XG4gICAgICAgICAgbGV0IHRpbWUgPSBidXR0b24uaWQuc2xpY2UoMSwgYnV0dG9uLmlkLmxlbmd0aCk7XG4gICAgICAgICAgc2V0VGltZShwYXJzZUludCh0aW1lKSk7XG4gICAgICAgICAgZmV0Y2hQcmljZURhdGEoKTtcbiAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsICdGaWx0ZXInLCAnU2V0VGltZScsIHRpbWUpO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZVVybCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuXG4gIGZ1bmN0aW9uIGZldGNoUHJpY2VEYXRhKCkge1xuICAgIGF4aW9zLmdldChgaHR0cHM6Ly8xNTEzMGkzdmdsLmV4ZWN1dGUtYXBpLmFwLW5vcnRoZWFzdC0yLmFtYXpvbmF3cy5jb20vZGV2L2Fzc2V0cz90PSR7Z2V0VGltZSgpfWApXG4gICAgLy8gYXhpb3MuZ2V0KFwicHJpY2UuanNvblwiKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlOiBBeGlvc1Jlc3BvbnNlKSA9PiB7XG4gICAgICAgIHNldFByaWNlRGF0YShyZXNwb25zZS5kYXRhLmRhdGEpO1xuICAgICAgICByZW5kZXJVcGRhdGVkQXQocmVzcG9uc2UuZGF0YS51cGRhdGVkX2F0KTtcbiAgICAgICAgcmVuZGVyKCk7XG4gICAgICAgIHJlc2V0UmVmcmVzaFRpbWUoKTtcbiAgICAgICAgdXBkYXRlUmVmcmVzaFRleHQoKTtcbiAgICAgICAgc2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3I6IEF4aW9zRXJyb3IpID0+IHtcbiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvci5yZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmhlYWRlcnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHJlc2V0UmVmcmVzaFRpbWUoKTtcbiAgICAgIH0pXG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZVVybCgpIHtcbiAgICBsZXQgcmF0ZSA9IGdldFBhcmFtZXRlckJ5TmFtZSgncmF0ZScpO1xuICAgIGlmIChyYXRlICE9IG51bGwpIHtcbiAgICAgIHNldFJhdGUocmF0ZSk7ICAgICAgIFxuICAgIH1cbiAgICBsZXQgdGltZSA9IGdldFBhcmFtZXRlckJ5TmFtZSgndGltZScpO1xuICAgIGlmICh0aW1lICE9IG51bGwpIHtcbiAgICAgIHNldFRpbWUocGFyc2VJbnQodGltZSkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZVVybCgpIHtcbiAgICBpZiAod2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKSB7XG4gICAgICBsZXQgcGFyc2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgcGFyc2VyLmhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICAgIHBhcnNlci5zZWFyY2ggPSBgP3JhdGU9JHtnZXRSYXRlKCl9JnRpbWU9JHtnZXRUaW1lKCl9YFxuICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBudWxsLCBwYXJzZXIuaHJlZik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UGFyYW1ldGVyQnlOYW1lKG5hbWU6IHN0cmluZykge1xuICAgIGxldCB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bXFxbXFxdXS9nLCBcIlxcXFwkJlwiKTtcbiAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKFwiWz8mXVwiICsgbmFtZSArIFwiKD0oW14mI10qKXwmfCN8JClcIiksXG4gICAgICAgIHJlc3VsdHMgPSByZWdleC5leGVjKHVybCk7XG4gICAgaWYgKCFyZXN1bHRzKSByZXR1cm4gbnVsbDtcbiAgICBpZiAoIXJlc3VsdHNbMl0pIHJldHVybiAnJztcbiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMl0ucmVwbGFjZSgvXFwrL2csIFwiIFwiKSk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVCdXR0b25zKCkge1xuICAgIGxldCByYXRlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgaW5wdXRbdHlwZT1yYWRpb11bbmFtZT1yYXRlXVtpZD0ke2dldFJhdGUoKX1dYCkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBpZiAocmF0ZUJ1dHRvbikge1xuICAgICAgcmF0ZUJ1dHRvbi5jbGljaygpO1xuICAgIH1cbiAgICBsZXQgdGltZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGlucHV0W3R5cGU9cmFkaW9dW25hbWU9dGltZV1baWQ9dCR7Z2V0VGltZSgpfV1gKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGlmICh0aW1lQnV0dG9uKSB7XG4gICAgICB0aW1lQnV0dG9uLmNsaWNrKCk7XG4gICAgfVxuICAgIGxldCBib29rbWFyayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ib29rbWFyaycpXG4gICAgaWYgKGJvb2ttYXJrKSB7XG4gICAgICBib29rbWFyay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgaWYgKHdpbmRvdy5leHRlcm5hbCAmJiAoJ0FkZEZhdm9yaXRlJyBpbiB3aW5kb3cuZXh0ZXJuYWwpKSB7XG4gICAgICAgICAgLy8gSW50ZXJuZXQgRXhwbG9yZXJcbiAgICAgICAgICAod2luZG93LmV4dGVybmFsIGFzIGFueSkuQWRkRmF2b3JpdGUobG9jYXRpb24uaHJlZiwgZG9jdW1lbnQudGl0bGUpOyBcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRSZWZyZXNoVGltZXIoKSB7XG4gICAgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aW1lLXJlZnJlc2gtYnV0dG9uJykgYXMgSFRNTEVsZW1lbnQpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBmZXRjaFByaWNlRGF0YSgpO1xuICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsICdSZWZyZXNoJywgJ0NsaWNrQnV0dG9uJywgJ3JlZnJlc2gnKTtcbiAgICB9KTtcbiAgICB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgZGVjUmVmcmVzaFRpbWUoKTtcbiAgICAgIHVwZGF0ZVJlZnJlc2hUZXh0KCk7XG4gICAgICBpZiAoZ2V0UmVmcmVzaFRpbWUoKSA9PSAwKSB7XG4gICAgICAgIGZldGNoUHJpY2VEYXRhKCk7XG4gICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50JywgJ1JlZnJlc2gnLCAnVGltZW91dCcsICdyZWZyZXNoJyk7XG4gICAgICB9XG4gICAgfSwgMTAwMCk7XG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGVSZWZyZXNoVGV4dCgpIHtcbiAgICAgIGxldCBjb3VudCA9IGdldFJlZnJlc2hUaW1lKCk7XG4gICAgICBsZXQgcmVmcmVzaFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGltZS1yZWZyZXNoLXRleHQnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgIGlmIChjb3VudCA+IDUpIHtcbiAgICAgICAgcmVmcmVzaFRleHQuaW5uZXJUZXh0ID0gYCR7Y291bnR9IOy0iGA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWZyZXNoVGV4dC5pbm5lclRleHQgPSAn7J6g7IucJztcbiAgICAgIH0gICAgXG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiB1cGRhdGVDdXJyZW5jeVJhdGUoKSB7XG4gICAgbGV0IHJhdGUgPSBhd2FpdCBnZXRSZW1vdGVDdXJyZW5jeVJhdGUoKTtcbiAgICBjb25zb2xlLmxvZygnY3VycmVuY3knLCByYXRlKVxuICAgIGlmIChyYXRlID4gMCkge1xuICAgICAgc2V0Q3VycmVuY3lSYXRlKHJhdGUpO1xuICAgICAgcmVuZGVyKCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gZ2V0UmVtb3RlQ3VycmVuY3lSYXRlKCkge1xuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoJ2h0dHBzOi8vMTUxMzBpM3ZnbC5leGVjdXRlLWFwaS5hcC1ub3J0aGVhc3QtMi5hbWF6b25hd3MuY29tL2Rldi9jdXJyZW5jeScpXG4gICAgICBsZXQgZGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YSBhcyBJQ3VycmVuY3lSZXNwb25zZVtdXG4gICAgICByZXR1cm4gZGF0YS5maWx0ZXIoZCA9PiBkLnNvdXJjZSA9PT0gJ1VTRCcgJiYgZC50YXJnZXQgPT09ICdLUlcnKS5tYXAoZCA9PiBkLnJhdGUpWzBdXG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBjb25zb2xlLmxvZygnY3VycmVuY3knLCBlKVxuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3dMb2FkaW5nKGxvYWRpbmc6IGJvb2xlYW4pIHtcbiAgICBpZiAobG9hZGVkIHx8ICFsb2FkaW5nKSB7XG4gICAgICBsb2FkZWQgPSB0cnVlO1xuICAgICAgJCgnI2xvYWRpbmctbW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgIH0gZWxzZXtcbiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKCFsb2FkZWQpIHtcbiAgICAgICAgICAkKCcjbG9hZGluZy1tb2RhbCcpLm1vZGFsKCdzaG93Jyk7XG4gICAgICAgIH1cbiAgICAgIH0sIDUwMCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2hvd09uYm9hcmRpbmcoKSB7XG4gICAgbGV0IGdpbXBCdXR0b24gPSAkKCcuZ2ltcC1vbmJvYXJkaW5nJylcbiAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkge1xuICAgICAgbGV0IGxvY2FsU3RvcmFnZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2U7XG4gICAgICBpZiAoIWxvY2FsU3RvcmFnZS5nZXRJdGVtKFwib25ib2FyZGluZzpnaW1wX2J1dHRvblwiKSkge1xuICAgICAgICBnaW1wQnV0dG9uLnBvcG92ZXIoJ3Nob3cnKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdpbXAtb25ib2FyZGluZycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgIGdpbXBCdXR0b24ucG9wb3ZlcignaGlkZScpO1xuICAgICAgICAgIGdpbXBCdXR0b24ucG9wb3ZlcignZGlzYWJsZScpO1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdvbmJvYXJkaW5nOmdpbXBfYnV0dG9uJywgJ2RvbmUnKVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdpbXBCdXR0b24ucG9wb3ZlcignZGlzYWJsZScpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBnaW1wQnV0dG9uLnBvcG92ZXIoJ2Rpc2FibGUnKTtcbiAgICB9XG5cbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUV4Y2hhbmdlU3RhdHVzKGV4Y2hhbmdlOiBJRXhjaGFuZ2UpIHtcbiAgICBsZXQgYWN0aXZlO1xuICAgIHN3aXRjaCAoZXhjaGFuZ2UpIHtcbiAgICAgIGNhc2UgQklURklORVg6XG4gICAgICAgIGFjdGl2ZSA9IGF3YWl0IGlzQml0ZmluZXhBY3RpdmUoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEJJVEhVTUI6XG4gICAgICAgIGFjdGl2ZSA9IGF3YWl0IGlzQml0aHVtYkFjdGl2ZSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQ09JTk9ORTpcbiAgICAgICAgYWN0aXZlID0gYXdhaXQgaXNDb2lub25lQWN0aXZlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBVUEJJVDpcbiAgICAgICAgYWN0aXZlID0gYXdhaXQgaXNVcGJpdEFjdGl2ZSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAoIWFjdGl2ZSkge1xuICAgICAgbGV0IHRhcmdldEljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuYmFuLSR7ZXhjaGFuZ2UubmFtZX1gKVxuICAgICAgaWYgKHRhcmdldEljb24pIHtcbiAgICAgICAgdGFyZ2V0SWNvbi5jbGFzc05hbWUgPSAnb2kgb2ktYmFuIHRleHQtZGFuZ2VyJ1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIGlzQml0ZmluZXhBY3RpdmUoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCgnaHR0cHM6Ly9hcGkuYml0ZmluZXguY29tL3YyL3BsYXRmb3JtL3N0YXR1cycpXG4gICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YVswXSA9PSAxXG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBjb25zb2xlLmxvZygnYml0ZmluZXgnLCBlKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBpc0JpdGh1bWJBY3RpdmUoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCgnaHR0cHM6Ly9hcGkuYml0aHVtYi5jb20vcHVibGljL3RpY2tlci9CVEMnKVxuICAgICAgbGV0IHN0YXR1cyA9IHJlc3BvbnNlLmRhdGEuc3RhdHVzO1xuICAgICAgbGV0IGRhdGUgPSBwYXJzZUludChyZXNwb25zZS5kYXRhLmRhdGEuZGF0ZSwgMTApO1xuICAgICAgbGV0IGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICBsZXQgdmFsaWREYXRlID0gZGF0ZSAtIDEwMDAwIDwgY3VycmVudFRpbWUgJiYgY3VycmVudFRpbWUgPCBkYXRlICsgMTAwMDBcbiAgICAgIHJldHVybiBzdGF0dXMgPT09ICcwMDAwJyAmJiB2YWxpZERhdGU7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBjb25zb2xlLmxvZygnYml0aHVtYicsIGUpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIGlzQ29pbm9uZUFjdGl2ZSgpIHtcbiAgICB0cnkge1xuICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCdodHRwczovL2FwaS5jb2lub25lLmNvLmtyL3RpY2tlcj9jdXJyZW5jeT1idGMnKVxuICAgICAgbGV0IHJlc3VsdCA9IHJlc3BvbnNlLmRhdGEucmVzdWx0O1xuICAgICAgbGV0IHRpbWVzdGFtcCA9IHBhcnNlSW50KHJlc3BvbnNlLmRhdGEudGltZXN0YW1wLCAxMCk7XG4gICAgICBsZXQgY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDA7XG4gICAgICBsZXQgdmFsaWREYXRlID0gdGltZXN0YW1wIC0gMTAgPCBjdXJyZW50VGltZSAmJiBjdXJyZW50VGltZSA8IHRpbWVzdGFtcCArIDEwXG4gICAgICByZXR1cm4gcmVzdWx0ID09PSAnc3VjY2VzcycgJiYgdmFsaWREYXRlO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgY29uc29sZS5sb2coJ2NvaW5vbmUnLCBlKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBpc1VwYml0QWN0aXZlKCkge1xuICAgIHRyeSB7XG4gICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoJ2h0dHBzOi8vY2N4LnVwYml0LmNvbS9hcGkvdjEvdGltZXN0YW1wJylcbiAgICAgIGxldCB0aW1lc3RhbXAgPSBwYXJzZUludChyZXNwb25zZS5kYXRhLCAxMCk7XG4gICAgICBsZXQgY3VycmVudFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDA7XG4gICAgICByZXR1cm4gdGltZXN0YW1wIC0gMTAgPCBjdXJyZW50VGltZSAmJiBjdXJyZW50VGltZSA8IHRpbWVzdGFtcCArIDEwO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgY29uc29sZS5sb2coJ3VwYml0JywgZSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgc2hvd0xvYWRpbmcodHJ1ZSk7XG4gIHBhcnNlVXJsKCk7XG4gIHVwZGF0ZUJ1dHRvbnMoKTtcbiAgYWRkTGlzZW5lcnMoKTtcbiAgc2V0UmVmcmVzaFRpbWVyKCk7XG4gIHVwZGF0ZUN1cnJlbmN5UmF0ZSgpO1xuICBmZXRjaFByaWNlRGF0YSgpO1xuICBzaG93T25ib2FyZGluZygpO1xufVxuXG5yZWFkeShtYWluKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9pbmRleC50cyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvYXhpb3MnKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9heGlvcy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBiaW5kID0gcmVxdWlyZSgnLi9oZWxwZXJzL2JpbmQnKTtcbnZhciBBeGlvcyA9IHJlcXVpcmUoJy4vY29yZS9BeGlvcycpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi9kZWZhdWx0cycpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBBeGlvc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0Q29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKiBAcmV0dXJuIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdENvbmZpZykge1xuICB2YXIgY29udGV4dCA9IG5ldyBBeGlvcyhkZWZhdWx0Q29uZmlnKTtcbiAgdmFyIGluc3RhbmNlID0gYmluZChBeGlvcy5wcm90b3R5cGUucmVxdWVzdCwgY29udGV4dCk7XG5cbiAgLy8gQ29weSBheGlvcy5wcm90b3R5cGUgdG8gaW5zdGFuY2VcbiAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBBeGlvcy5wcm90b3R5cGUsIGNvbnRleHQpO1xuXG4gIC8vIENvcHkgY29udGV4dCB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIGNvbnRleHQpO1xuXG4gIHJldHVybiBpbnN0YW5jZTtcbn1cblxuLy8gQ3JlYXRlIHRoZSBkZWZhdWx0IGluc3RhbmNlIHRvIGJlIGV4cG9ydGVkXG52YXIgYXhpb3MgPSBjcmVhdGVJbnN0YW5jZShkZWZhdWx0cyk7XG5cbi8vIEV4cG9zZSBBeGlvcyBjbGFzcyB0byBhbGxvdyBjbGFzcyBpbmhlcml0YW5jZVxuYXhpb3MuQXhpb3MgPSBBeGlvcztcblxuLy8gRmFjdG9yeSBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlc1xuYXhpb3MuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGluc3RhbmNlQ29uZmlnKSB7XG4gIHJldHVybiBjcmVhdGVJbnN0YW5jZSh1dGlscy5tZXJnZShkZWZhdWx0cywgaW5zdGFuY2VDb25maWcpKTtcbn07XG5cbi8vIEV4cG9zZSBDYW5jZWwgJiBDYW5jZWxUb2tlblxuYXhpb3MuQ2FuY2VsID0gcmVxdWlyZSgnLi9jYW5jZWwvQ2FuY2VsJyk7XG5heGlvcy5DYW5jZWxUb2tlbiA9IHJlcXVpcmUoJy4vY2FuY2VsL0NhbmNlbFRva2VuJyk7XG5heGlvcy5pc0NhbmNlbCA9IHJlcXVpcmUoJy4vY2FuY2VsL2lzQ2FuY2VsJyk7XG5cbi8vIEV4cG9zZSBhbGwvc3ByZWFkXG5heGlvcy5hbGwgPSBmdW5jdGlvbiBhbGwocHJvbWlzZXMpIHtcbiAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbn07XG5heGlvcy5zcHJlYWQgPSByZXF1aXJlKCcuL2hlbHBlcnMvc3ByZWFkJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXhpb3M7XG5cbi8vIEFsbG93IHVzZSBvZiBkZWZhdWx0IGltcG9ydCBzeW50YXggaW4gVHlwZVNjcmlwdFxubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGF4aW9zO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2F4aW9zLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIVxuICogRGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBpcyBhIEJ1ZmZlclxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cblxuLy8gVGhlIF9pc0J1ZmZlciBjaGVjayBpcyBmb3IgU2FmYXJpIDUtNyBzdXBwb3J0LCBiZWNhdXNlIGl0J3MgbWlzc2luZ1xuLy8gT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci4gUmVtb3ZlIHRoaXMgZXZlbnR1YWxseVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogIT0gbnVsbCAmJiAoaXNCdWZmZXIob2JqKSB8fCBpc1Nsb3dCdWZmZXIob2JqKSB8fCAhIW9iai5faXNCdWZmZXIpXG59XG5cbmZ1bmN0aW9uIGlzQnVmZmVyIChvYmopIHtcbiAgcmV0dXJuICEhb2JqLmNvbnN0cnVjdG9yICYmIHR5cGVvZiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicgJiYgb2JqLmNvbnN0cnVjdG9yLmlzQnVmZmVyKG9iailcbn1cblxuLy8gRm9yIE5vZGUgdjAuMTAgc3VwcG9ydC4gUmVtb3ZlIHRoaXMgZXZlbnR1YWxseS5cbmZ1bmN0aW9uIGlzU2xvd0J1ZmZlciAob2JqKSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqLnJlYWRGbG9hdExFID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBvYmouc2xpY2UgPT09ICdmdW5jdGlvbicgJiYgaXNCdWZmZXIob2JqLnNsaWNlKDAsIDApKVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvaXMtYnVmZmVyL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vLi4vZGVmYXVsdHMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBJbnRlcmNlcHRvck1hbmFnZXIgPSByZXF1aXJlKCcuL0ludGVyY2VwdG9yTWFuYWdlcicpO1xudmFyIGRpc3BhdGNoUmVxdWVzdCA9IHJlcXVpcmUoJy4vZGlzcGF0Y2hSZXF1ZXN0Jyk7XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEF4aW9zXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlQ29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIEF4aW9zKGluc3RhbmNlQ29uZmlnKSB7XG4gIHRoaXMuZGVmYXVsdHMgPSBpbnN0YW5jZUNvbmZpZztcbiAgdGhpcy5pbnRlcmNlcHRvcnMgPSB7XG4gICAgcmVxdWVzdDogbmV3IEludGVyY2VwdG9yTWFuYWdlcigpLFxuICAgIHJlc3BvbnNlOiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKClcbiAgfTtcbn1cblxuLyoqXG4gKiBEaXNwYXRjaCBhIHJlcXVlc3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcgc3BlY2lmaWMgZm9yIHRoaXMgcmVxdWVzdCAobWVyZ2VkIHdpdGggdGhpcy5kZWZhdWx0cylcbiAqL1xuQXhpb3MucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KGNvbmZpZykge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgLy8gQWxsb3cgZm9yIGF4aW9zKCdleGFtcGxlL3VybCdbLCBjb25maWddKSBhIGxhIGZldGNoIEFQSVxuICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25maWcgPSB1dGlscy5tZXJnZSh7XG4gICAgICB1cmw6IGFyZ3VtZW50c1swXVxuICAgIH0sIGFyZ3VtZW50c1sxXSk7XG4gIH1cblxuICBjb25maWcgPSB1dGlscy5tZXJnZShkZWZhdWx0cywgdGhpcy5kZWZhdWx0cywgeyBtZXRob2Q6ICdnZXQnIH0sIGNvbmZpZyk7XG4gIGNvbmZpZy5tZXRob2QgPSBjb25maWcubWV0aG9kLnRvTG93ZXJDYXNlKCk7XG5cbiAgLy8gSG9vayB1cCBpbnRlcmNlcHRvcnMgbWlkZGxld2FyZVxuICB2YXIgY2hhaW4gPSBbZGlzcGF0Y2hSZXF1ZXN0LCB1bmRlZmluZWRdO1xuICB2YXIgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShjb25maWcpO1xuXG4gIHRoaXMuaW50ZXJjZXB0b3JzLnJlcXVlc3QuZm9yRWFjaChmdW5jdGlvbiB1bnNoaWZ0UmVxdWVzdEludGVyY2VwdG9ycyhpbnRlcmNlcHRvcikge1xuICAgIGNoYWluLnVuc2hpZnQoaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7XG4gIH0pO1xuXG4gIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgY2hhaW4ucHVzaChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgfSk7XG5cbiAgd2hpbGUgKGNoYWluLmxlbmd0aCkge1xuICAgIHByb21pc2UgPSBwcm9taXNlLnRoZW4oY2hhaW4uc2hpZnQoKSwgY2hhaW4uc2hpZnQoKSk7XG4gIH1cblxuICByZXR1cm4gcHJvbWlzZTtcbn07XG5cbi8vIFByb3ZpZGUgYWxpYXNlcyBmb3Igc3VwcG9ydGVkIHJlcXVlc3QgbWV0aG9kc1xudXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdvcHRpb25zJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHV0aWxzLm1lcmdlKGNvbmZpZyB8fCB7fSwge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICB1cmw6IHVybFxuICAgIH0pKTtcbiAgfTtcbn0pO1xuXG51dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgZGF0YSwgY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1dGlscy5tZXJnZShjb25maWcgfHwge30sIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgdXJsOiB1cmwsXG4gICAgICBkYXRhOiBkYXRhXG4gICAgfSkpO1xuICB9O1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQXhpb3M7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9BeGlvcy5qc1xuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgbm9ybWFsaXplZE5hbWUpIHtcbiAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbiBwcm9jZXNzSGVhZGVyKHZhbHVlLCBuYW1lKSB7XG4gICAgaWYgKG5hbWUgIT09IG5vcm1hbGl6ZWROYW1lICYmIG5hbWUudG9VcHBlckNhc2UoKSA9PT0gbm9ybWFsaXplZE5hbWUudG9VcHBlckNhc2UoKSkge1xuICAgICAgaGVhZGVyc1tub3JtYWxpemVkTmFtZV0gPSB2YWx1ZTtcbiAgICAgIGRlbGV0ZSBoZWFkZXJzW25hbWVdO1xuICAgIH1cbiAgfSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvbm9ybWFsaXplSGVhZGVyTmFtZS5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY3JlYXRlRXJyb3IgPSByZXF1aXJlKCcuL2NyZWF0ZUVycm9yJyk7XG5cbi8qKlxuICogUmVzb2x2ZSBvciByZWplY3QgYSBQcm9taXNlIGJhc2VkIG9uIHJlc3BvbnNlIHN0YXR1cy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlIEEgZnVuY3Rpb24gdGhhdCByZXNvbHZlcyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdCBBIGZ1bmN0aW9uIHRoYXQgcmVqZWN0cyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSBUaGUgcmVzcG9uc2UuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpIHtcbiAgdmFyIHZhbGlkYXRlU3RhdHVzID0gcmVzcG9uc2UuY29uZmlnLnZhbGlkYXRlU3RhdHVzO1xuICAvLyBOb3RlOiBzdGF0dXMgaXMgbm90IGV4cG9zZWQgYnkgWERvbWFpblJlcXVlc3RcbiAgaWYgKCFyZXNwb25zZS5zdGF0dXMgfHwgIXZhbGlkYXRlU3RhdHVzIHx8IHZhbGlkYXRlU3RhdHVzKHJlc3BvbnNlLnN0YXR1cykpIHtcbiAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgfSBlbHNlIHtcbiAgICByZWplY3QoY3JlYXRlRXJyb3IoXG4gICAgICAnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAnICsgcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgcmVzcG9uc2UuY29uZmlnLFxuICAgICAgbnVsbCxcbiAgICAgIHJlc3BvbnNlLnJlcXVlc3QsXG4gICAgICByZXNwb25zZVxuICAgICkpO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvc2V0dGxlLmpzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVXBkYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBjb25maWcsIGVycm9yIGNvZGUsIGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnJvciBUaGUgZXJyb3IgdG8gdXBkYXRlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBlcnJvci5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgZXJyb3IuY29uZmlnID0gY29uZmlnO1xuICBpZiAoY29kZSkge1xuICAgIGVycm9yLmNvZGUgPSBjb2RlO1xuICB9XG4gIGVycm9yLnJlcXVlc3QgPSByZXF1ZXN0O1xuICBlcnJvci5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICByZXR1cm4gZXJyb3I7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvZW5oYW5jZUVycm9yLmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuZnVuY3Rpb24gZW5jb2RlKHZhbCkge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkuXG4gICAgcmVwbGFjZSgvJTQwL2dpLCAnQCcpLlxuICAgIHJlcGxhY2UoLyUzQS9naSwgJzonKS5cbiAgICByZXBsYWNlKC8lMjQvZywgJyQnKS5cbiAgICByZXBsYWNlKC8lMkMvZ2ksICcsJykuXG4gICAgcmVwbGFjZSgvJTIwL2csICcrJykuXG4gICAgcmVwbGFjZSgvJTVCL2dpLCAnWycpLlxuICAgIHJlcGxhY2UoLyU1RC9naSwgJ10nKTtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIFVSTCBieSBhcHBlbmRpbmcgcGFyYW1zIHRvIHRoZSBlbmRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBiYXNlIG9mIHRoZSB1cmwgKGUuZy4sIGh0dHA6Ly93d3cuZ29vZ2xlLmNvbSlcbiAqIEBwYXJhbSB7b2JqZWN0fSBbcGFyYW1zXSBUaGUgcGFyYW1zIHRvIGJlIGFwcGVuZGVkXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIHVybFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJ1aWxkVVJMKHVybCwgcGFyYW1zLCBwYXJhbXNTZXJpYWxpemVyKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICBpZiAoIXBhcmFtcykge1xuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICB2YXIgc2VyaWFsaXplZFBhcmFtcztcbiAgaWYgKHBhcmFtc1NlcmlhbGl6ZXIpIHtcbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zU2VyaWFsaXplcihwYXJhbXMpO1xuICB9IGVsc2UgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKHBhcmFtcykpIHtcbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zLnRvU3RyaW5nKCk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHBhcnRzID0gW107XG5cbiAgICB1dGlscy5mb3JFYWNoKHBhcmFtcywgZnVuY3Rpb24gc2VyaWFsaXplKHZhbCwga2V5KSB7XG4gICAgICBpZiAodmFsID09PSBudWxsIHx8IHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHV0aWxzLmlzQXJyYXkodmFsKSkge1xuICAgICAgICBrZXkgPSBrZXkgKyAnW10nO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXV0aWxzLmlzQXJyYXkodmFsKSkge1xuICAgICAgICB2YWwgPSBbdmFsXTtcbiAgICAgIH1cblxuICAgICAgdXRpbHMuZm9yRWFjaCh2YWwsIGZ1bmN0aW9uIHBhcnNlVmFsdWUodikge1xuICAgICAgICBpZiAodXRpbHMuaXNEYXRlKHYpKSB7XG4gICAgICAgICAgdiA9IHYudG9JU09TdHJpbmcoKTtcbiAgICAgICAgfSBlbHNlIGlmICh1dGlscy5pc09iamVjdCh2KSkge1xuICAgICAgICAgIHYgPSBKU09OLnN0cmluZ2lmeSh2KTtcbiAgICAgICAgfVxuICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZShrZXkpICsgJz0nICsgZW5jb2RlKHYpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcnRzLmpvaW4oJyYnKTtcbiAgfVxuXG4gIGlmIChzZXJpYWxpemVkUGFyYW1zKSB7XG4gICAgdXJsICs9ICh1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJykgKyBzZXJpYWxpemVkUGFyYW1zO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9idWlsZFVSTC5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbi8vIEhlYWRlcnMgd2hvc2UgZHVwbGljYXRlcyBhcmUgaWdub3JlZCBieSBub2RlXG4vLyBjLmYuIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvaHR0cC5odG1sI2h0dHBfbWVzc2FnZV9oZWFkZXJzXG52YXIgaWdub3JlRHVwbGljYXRlT2YgPSBbXG4gICdhZ2UnLCAnYXV0aG9yaXphdGlvbicsICdjb250ZW50LWxlbmd0aCcsICdjb250ZW50LXR5cGUnLCAnZXRhZycsXG4gICdleHBpcmVzJywgJ2Zyb20nLCAnaG9zdCcsICdpZi1tb2RpZmllZC1zaW5jZScsICdpZi11bm1vZGlmaWVkLXNpbmNlJyxcbiAgJ2xhc3QtbW9kaWZpZWQnLCAnbG9jYXRpb24nLCAnbWF4LWZvcndhcmRzJywgJ3Byb3h5LWF1dGhvcml6YXRpb24nLFxuICAncmVmZXJlcicsICdyZXRyeS1hZnRlcicsICd1c2VyLWFnZW50J1xuXTtcblxuLyoqXG4gKiBQYXJzZSBoZWFkZXJzIGludG8gYW4gb2JqZWN0XG4gKlxuICogYGBgXG4gKiBEYXRlOiBXZWQsIDI3IEF1ZyAyMDE0IDA4OjU4OjQ5IEdNVFxuICogQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uXG4gKiBDb25uZWN0aW9uOiBrZWVwLWFsaXZlXG4gKiBUcmFuc2Zlci1FbmNvZGluZzogY2h1bmtlZFxuICogYGBgXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGhlYWRlcnMgSGVhZGVycyBuZWVkaW5nIHRvIGJlIHBhcnNlZFxuICogQHJldHVybnMge09iamVjdH0gSGVhZGVycyBwYXJzZWQgaW50byBhbiBvYmplY3RcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXJzZUhlYWRlcnMoaGVhZGVycykge1xuICB2YXIgcGFyc2VkID0ge307XG4gIHZhciBrZXk7XG4gIHZhciB2YWw7XG4gIHZhciBpO1xuXG4gIGlmICghaGVhZGVycykgeyByZXR1cm4gcGFyc2VkOyB9XG5cbiAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLnNwbGl0KCdcXG4nKSwgZnVuY3Rpb24gcGFyc2VyKGxpbmUpIHtcbiAgICBpID0gbGluZS5pbmRleE9mKCc6Jyk7XG4gICAga2V5ID0gdXRpbHMudHJpbShsaW5lLnN1YnN0cigwLCBpKSkudG9Mb3dlckNhc2UoKTtcbiAgICB2YWwgPSB1dGlscy50cmltKGxpbmUuc3Vic3RyKGkgKyAxKSk7XG5cbiAgICBpZiAoa2V5KSB7XG4gICAgICBpZiAocGFyc2VkW2tleV0gJiYgaWdub3JlRHVwbGljYXRlT2YuaW5kZXhPZihrZXkpID49IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGtleSA9PT0gJ3NldC1jb29raWUnKSB7XG4gICAgICAgIHBhcnNlZFtrZXldID0gKHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gOiBbXSkuY29uY2F0KFt2YWxdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnNlZFtrZXldID0gcGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSArICcsICcgKyB2YWwgOiB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcGFyc2VkO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3BhcnNlSGVhZGVycy5qc1xuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKFxuICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblxuICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgaGF2ZSBmdWxsIHN1cHBvcnQgb2YgdGhlIEFQSXMgbmVlZGVkIHRvIHRlc3RcbiAgLy8gd2hldGhlciB0aGUgcmVxdWVzdCBVUkwgaXMgb2YgdGhlIHNhbWUgb3JpZ2luIGFzIGN1cnJlbnQgbG9jYXRpb24uXG4gIChmdW5jdGlvbiBzdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgdmFyIG1zaWUgPSAvKG1zaWV8dHJpZGVudCkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgIHZhciB1cmxQYXJzaW5nTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICB2YXIgb3JpZ2luVVJMO1xuXG4gICAgLyoqXG4gICAgKiBQYXJzZSBhIFVSTCB0byBkaXNjb3ZlciBpdCdzIGNvbXBvbmVudHNcbiAgICAqXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIFRoZSBVUkwgdG8gYmUgcGFyc2VkXG4gICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICovXG4gICAgZnVuY3Rpb24gcmVzb2x2ZVVSTCh1cmwpIHtcbiAgICAgIHZhciBocmVmID0gdXJsO1xuXG4gICAgICBpZiAobXNpZSkge1xuICAgICAgICAvLyBJRSBuZWVkcyBhdHRyaWJ1dGUgc2V0IHR3aWNlIHRvIG5vcm1hbGl6ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuICAgICAgICBocmVmID0gdXJsUGFyc2luZ05vZGUuaHJlZjtcbiAgICAgIH1cblxuICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG5cbiAgICAgIC8vIHVybFBhcnNpbmdOb2RlIHByb3ZpZGVzIHRoZSBVcmxVdGlscyBpbnRlcmZhY2UgLSBodHRwOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsdXRpbHNcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGhyZWY6IHVybFBhcnNpbmdOb2RlLmhyZWYsXG4gICAgICAgIHByb3RvY29sOiB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbCA/IHVybFBhcnNpbmdOb2RlLnByb3RvY29sLnJlcGxhY2UoLzokLywgJycpIDogJycsXG4gICAgICAgIGhvc3Q6IHVybFBhcnNpbmdOb2RlLmhvc3QsXG4gICAgICAgIHNlYXJjaDogdXJsUGFyc2luZ05vZGUuc2VhcmNoID8gdXJsUGFyc2luZ05vZGUuc2VhcmNoLnJlcGxhY2UoL15cXD8vLCAnJykgOiAnJyxcbiAgICAgICAgaGFzaDogdXJsUGFyc2luZ05vZGUuaGFzaCA/IHVybFBhcnNpbmdOb2RlLmhhc2gucmVwbGFjZSgvXiMvLCAnJykgOiAnJyxcbiAgICAgICAgaG9zdG5hbWU6IHVybFBhcnNpbmdOb2RlLmhvc3RuYW1lLFxuICAgICAgICBwb3J0OiB1cmxQYXJzaW5nTm9kZS5wb3J0LFxuICAgICAgICBwYXRobmFtZTogKHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nKSA/XG4gICAgICAgICAgICAgICAgICB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZSA6XG4gICAgICAgICAgICAgICAgICAnLycgKyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBvcmlnaW5VUkwgPSByZXNvbHZlVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblxuICAgIC8qKlxuICAgICogRGV0ZXJtaW5lIGlmIGEgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4gYXMgdGhlIGN1cnJlbnQgbG9jYXRpb25cbiAgICAqXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gcmVxdWVzdFVSTCBUaGUgVVJMIHRvIHRlc3RcbiAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIFVSTCBzaGFyZXMgdGhlIHNhbWUgb3JpZ2luLCBvdGhlcndpc2UgZmFsc2VcbiAgICAqL1xuICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4ocmVxdWVzdFVSTCkge1xuICAgICAgdmFyIHBhcnNlZCA9ICh1dGlscy5pc1N0cmluZyhyZXF1ZXN0VVJMKSkgPyByZXNvbHZlVVJMKHJlcXVlc3RVUkwpIDogcmVxdWVzdFVSTDtcbiAgICAgIHJldHVybiAocGFyc2VkLnByb3RvY29sID09PSBvcmlnaW5VUkwucHJvdG9jb2wgJiZcbiAgICAgICAgICAgIHBhcnNlZC5ob3N0ID09PSBvcmlnaW5VUkwuaG9zdCk7XG4gICAgfTtcbiAgfSkoKSA6XG5cbiAgLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52cyAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cbiAgKGZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgfSkoKVxuKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpbi5qc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBidG9hIHBvbHlmaWxsIGZvciBJRTwxMCBjb3VydGVzeSBodHRwczovL2dpdGh1Yi5jb20vZGF2aWRjaGFtYmVycy9CYXNlNjQuanNcblxudmFyIGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89JztcblxuZnVuY3Rpb24gRSgpIHtcbiAgdGhpcy5tZXNzYWdlID0gJ1N0cmluZyBjb250YWlucyBhbiBpbnZhbGlkIGNoYXJhY3Rlcic7XG59XG5FLnByb3RvdHlwZSA9IG5ldyBFcnJvcjtcbkUucHJvdG90eXBlLmNvZGUgPSA1O1xuRS5wcm90b3R5cGUubmFtZSA9ICdJbnZhbGlkQ2hhcmFjdGVyRXJyb3InO1xuXG5mdW5jdGlvbiBidG9hKGlucHV0KSB7XG4gIHZhciBzdHIgPSBTdHJpbmcoaW5wdXQpO1xuICB2YXIgb3V0cHV0ID0gJyc7XG4gIGZvciAoXG4gICAgLy8gaW5pdGlhbGl6ZSByZXN1bHQgYW5kIGNvdW50ZXJcbiAgICB2YXIgYmxvY2ssIGNoYXJDb2RlLCBpZHggPSAwLCBtYXAgPSBjaGFycztcbiAgICAvLyBpZiB0aGUgbmV4dCBzdHIgaW5kZXggZG9lcyBub3QgZXhpc3Q6XG4gICAgLy8gICBjaGFuZ2UgdGhlIG1hcHBpbmcgdGFibGUgdG8gXCI9XCJcbiAgICAvLyAgIGNoZWNrIGlmIGQgaGFzIG5vIGZyYWN0aW9uYWwgZGlnaXRzXG4gICAgc3RyLmNoYXJBdChpZHggfCAwKSB8fCAobWFwID0gJz0nLCBpZHggJSAxKTtcbiAgICAvLyBcIjggLSBpZHggJSAxICogOFwiIGdlbmVyYXRlcyB0aGUgc2VxdWVuY2UgMiwgNCwgNiwgOFxuICAgIG91dHB1dCArPSBtYXAuY2hhckF0KDYzICYgYmxvY2sgPj4gOCAtIGlkeCAlIDEgKiA4KVxuICApIHtcbiAgICBjaGFyQ29kZSA9IHN0ci5jaGFyQ29kZUF0KGlkeCArPSAzIC8gNCk7XG4gICAgaWYgKGNoYXJDb2RlID4gMHhGRikge1xuICAgICAgdGhyb3cgbmV3IEUoKTtcbiAgICB9XG4gICAgYmxvY2sgPSBibG9jayA8PCA4IHwgY2hhckNvZGU7XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBidG9hO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYnRvYS5qc1xuLy8gbW9kdWxlIGlkID0gMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKFxuICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblxuICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgc3VwcG9ydCBkb2N1bWVudC5jb29raWVcbiAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKG5hbWUsIHZhbHVlLCBleHBpcmVzLCBwYXRoLCBkb21haW4sIHNlY3VyZSkge1xuICAgICAgICB2YXIgY29va2llID0gW107XG4gICAgICAgIGNvb2tpZS5wdXNoKG5hbWUgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcblxuICAgICAgICBpZiAodXRpbHMuaXNOdW1iZXIoZXhwaXJlcykpIHtcbiAgICAgICAgICBjb29raWUucHVzaCgnZXhwaXJlcz0nICsgbmV3IERhdGUoZXhwaXJlcykudG9HTVRTdHJpbmcoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcocGF0aCkpIHtcbiAgICAgICAgICBjb29raWUucHVzaCgncGF0aD0nICsgcGF0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcoZG9tYWluKSkge1xuICAgICAgICAgIGNvb2tpZS5wdXNoKCdkb21haW49JyArIGRvbWFpbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VjdXJlID09PSB0cnVlKSB7XG4gICAgICAgICAgY29va2llLnB1c2goJ3NlY3VyZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llLmpvaW4oJzsgJyk7XG4gICAgICB9LFxuXG4gICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG5hbWUpIHtcbiAgICAgICAgdmFyIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoJyhefDtcXFxccyopKCcgKyBuYW1lICsgJyk9KFteO10qKScpKTtcbiAgICAgICAgcmV0dXJuIChtYXRjaCA/IGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFszXSkgOiBudWxsKTtcbiAgICAgIH0sXG5cbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKG5hbWUpIHtcbiAgICAgICAgdGhpcy53cml0ZShuYW1lLCAnJywgRGF0ZS5ub3coKSAtIDg2NDAwMDAwKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnYgKHdlYiB3b3JrZXJzLCByZWFjdC1uYXRpdmUpIGxhY2sgbmVlZGVkIHN1cHBvcnQuXG4gIChmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZSgpIHt9LFxuICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZCgpIHsgcmV0dXJuIG51bGw7IH0sXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9XG4gICAgfTtcbiAgfSkoKVxuKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2Nvb2tpZXMuanNcbi8vIG1vZHVsZSBpZCA9IDIwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5mdW5jdGlvbiBJbnRlcmNlcHRvck1hbmFnZXIoKSB7XG4gIHRoaXMuaGFuZGxlcnMgPSBbXTtcbn1cblxuLyoqXG4gKiBBZGQgYSBuZXcgaW50ZXJjZXB0b3IgdG8gdGhlIHN0YWNrXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVsZmlsbGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHRoZW5gIGZvciBhIGBQcm9taXNlYFxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0ZWQgVGhlIGZ1bmN0aW9uIHRvIGhhbmRsZSBgcmVqZWN0YCBmb3IgYSBgUHJvbWlzZWBcbiAqXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IEFuIElEIHVzZWQgdG8gcmVtb3ZlIGludGVyY2VwdG9yIGxhdGVyXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24gdXNlKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpIHtcbiAgdGhpcy5oYW5kbGVycy5wdXNoKHtcbiAgICBmdWxmaWxsZWQ6IGZ1bGZpbGxlZCxcbiAgICByZWplY3RlZDogcmVqZWN0ZWRcbiAgfSk7XG4gIHJldHVybiB0aGlzLmhhbmRsZXJzLmxlbmd0aCAtIDE7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhbiBpbnRlcmNlcHRvciBmcm9tIHRoZSBzdGFja1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpZCBUaGUgSUQgdGhhdCB3YXMgcmV0dXJuZWQgYnkgYHVzZWBcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5lamVjdCA9IGZ1bmN0aW9uIGVqZWN0KGlkKSB7XG4gIGlmICh0aGlzLmhhbmRsZXJzW2lkXSkge1xuICAgIHRoaXMuaGFuZGxlcnNbaWRdID0gbnVsbDtcbiAgfVxufTtcblxuLyoqXG4gKiBJdGVyYXRlIG92ZXIgYWxsIHRoZSByZWdpc3RlcmVkIGludGVyY2VwdG9yc1xuICpcbiAqIFRoaXMgbWV0aG9kIGlzIHBhcnRpY3VsYXJseSB1c2VmdWwgZm9yIHNraXBwaW5nIG92ZXIgYW55XG4gKiBpbnRlcmNlcHRvcnMgdGhhdCBtYXkgaGF2ZSBiZWNvbWUgYG51bGxgIGNhbGxpbmcgYGVqZWN0YC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCBpbnRlcmNlcHRvclxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiBmb3JFYWNoKGZuKSB7XG4gIHV0aWxzLmZvckVhY2godGhpcy5oYW5kbGVycywgZnVuY3Rpb24gZm9yRWFjaEhhbmRsZXIoaCkge1xuICAgIGlmIChoICE9PSBudWxsKSB7XG4gICAgICBmbihoKTtcbiAgICB9XG4gIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbnRlcmNlcHRvck1hbmFnZXI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9JbnRlcmNlcHRvck1hbmFnZXIuanNcbi8vIG1vZHVsZSBpZCA9IDIxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIHRyYW5zZm9ybURhdGEgPSByZXF1aXJlKCcuL3RyYW5zZm9ybURhdGEnKTtcbnZhciBpc0NhbmNlbCA9IHJlcXVpcmUoJy4uL2NhbmNlbC9pc0NhbmNlbCcpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi4vZGVmYXVsdHMnKTtcbnZhciBpc0Fic29sdXRlVVJMID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2lzQWJzb2x1dGVVUkwnKTtcbnZhciBjb21iaW5lVVJMcyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9jb21iaW5lVVJMcycpO1xuXG4vKipcbiAqIFRocm93cyBhIGBDYW5jZWxgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gKi9cbmZ1bmN0aW9uIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKSB7XG4gIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHtcbiAgICBjb25maWcuY2FuY2VsVG9rZW4udGhyb3dJZlJlcXVlc3RlZCgpO1xuICB9XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIGNvbmZpZ3VyZWQgYWRhcHRlci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIFRoZSBjb25maWcgdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdFxuICogQHJldHVybnMge1Byb21pc2V9IFRoZSBQcm9taXNlIHRvIGJlIGZ1bGZpbGxlZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRpc3BhdGNoUmVxdWVzdChjb25maWcpIHtcbiAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gIC8vIFN1cHBvcnQgYmFzZVVSTCBjb25maWdcbiAgaWYgKGNvbmZpZy5iYXNlVVJMICYmICFpc0Fic29sdXRlVVJMKGNvbmZpZy51cmwpKSB7XG4gICAgY29uZmlnLnVybCA9IGNvbWJpbmVVUkxzKGNvbmZpZy5iYXNlVVJMLCBjb25maWcudXJsKTtcbiAgfVxuXG4gIC8vIEVuc3VyZSBoZWFkZXJzIGV4aXN0XG4gIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG5cbiAgLy8gVHJhbnNmb3JtIHJlcXVlc3QgZGF0YVxuICBjb25maWcuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG4gICAgY29uZmlnLmRhdGEsXG4gICAgY29uZmlnLmhlYWRlcnMsXG4gICAgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3RcbiAgKTtcblxuICAvLyBGbGF0dGVuIGhlYWRlcnNcbiAgY29uZmlnLmhlYWRlcnMgPSB1dGlscy5tZXJnZShcbiAgICBjb25maWcuaGVhZGVycy5jb21tb24gfHwge30sXG4gICAgY29uZmlnLmhlYWRlcnNbY29uZmlnLm1ldGhvZF0gfHwge30sXG4gICAgY29uZmlnLmhlYWRlcnMgfHwge31cbiAgKTtcblxuICB1dGlscy5mb3JFYWNoKFxuICAgIFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJywgJ2NvbW1vbiddLFxuICAgIGZ1bmN0aW9uIGNsZWFuSGVhZGVyQ29uZmlnKG1ldGhvZCkge1xuICAgICAgZGVsZXRlIGNvbmZpZy5oZWFkZXJzW21ldGhvZF07XG4gICAgfVxuICApO1xuXG4gIHZhciBhZGFwdGVyID0gY29uZmlnLmFkYXB0ZXIgfHwgZGVmYXVsdHMuYWRhcHRlcjtcblxuICByZXR1cm4gYWRhcHRlcihjb25maWcpLnRoZW4oZnVuY3Rpb24gb25BZGFwdGVyUmVzb2x1dGlvbihyZXNwb25zZSkge1xuICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgcmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG4gICAgICByZXNwb25zZS5kYXRhLFxuICAgICAgcmVzcG9uc2UuaGVhZGVycyxcbiAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuICAgICk7XG5cbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH0sIGZ1bmN0aW9uIG9uQWRhcHRlclJlamVjdGlvbihyZWFzb24pIHtcbiAgICBpZiAoIWlzQ2FuY2VsKHJlYXNvbikpIHtcbiAgICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAgICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcbiAgICAgIGlmIChyZWFzb24gJiYgcmVhc29uLnJlc3BvbnNlKSB7XG4gICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YShcbiAgICAgICAgICByZWFzb24ucmVzcG9uc2UuZGF0YSxcbiAgICAgICAgICByZWFzb24ucmVzcG9uc2UuaGVhZGVycyxcbiAgICAgICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTtcbiAgfSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvZGlzcGF0Y2hSZXF1ZXN0LmpzXG4vLyBtb2R1bGUgaWQgPSAyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIGRhdGEgZm9yIGEgcmVxdWVzdCBvciBhIHJlc3BvbnNlXG4gKlxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBkYXRhIFRoZSBkYXRhIHRvIGJlIHRyYW5zZm9ybWVkXG4gKiBAcGFyYW0ge0FycmF5fSBoZWFkZXJzIFRoZSBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdCBvciByZXNwb25zZVxuICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbn0gZm5zIEEgc2luZ2xlIGZ1bmN0aW9uIG9yIEFycmF5IG9mIGZ1bmN0aW9uc1xuICogQHJldHVybnMgeyp9IFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtZWQgZGF0YVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZGF0YSwgaGVhZGVycywgZm5zKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICB1dGlscy5mb3JFYWNoKGZucywgZnVuY3Rpb24gdHJhbnNmb3JtKGZuKSB7XG4gICAgZGF0YSA9IGZuKGRhdGEsIGhlYWRlcnMpO1xuICB9KTtcblxuICByZXR1cm4gZGF0YTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS90cmFuc2Zvcm1EYXRhLmpzXG4vLyBtb2R1bGUgaWQgPSAyM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0Fic29sdXRlVVJMKHVybCkge1xuICAvLyBBIFVSTCBpcyBjb25zaWRlcmVkIGFic29sdXRlIGlmIGl0IGJlZ2lucyB3aXRoIFwiPHNjaGVtZT46Ly9cIiBvciBcIi8vXCIgKHByb3RvY29sLXJlbGF0aXZlIFVSTCkuXG4gIC8vIFJGQyAzOTg2IGRlZmluZXMgc2NoZW1lIG5hbWUgYXMgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIGJlZ2lubmluZyB3aXRoIGEgbGV0dGVyIGFuZCBmb2xsb3dlZFxuICAvLyBieSBhbnkgY29tYmluYXRpb24gb2YgbGV0dGVycywgZGlnaXRzLCBwbHVzLCBwZXJpb2QsIG9yIGh5cGhlbi5cbiAgcmV0dXJuIC9eKFthLXpdW2EtelxcZFxcK1xcLVxcLl0qOik/XFwvXFwvL2kudGVzdCh1cmwpO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2lzQWJzb2x1dGVVUkwuanNcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFVSTCBieSBjb21iaW5pbmcgdGhlIHNwZWNpZmllZCBVUkxzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkwgVGhlIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRpdmVVUkwgVGhlIHJlbGF0aXZlIFVSTFxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGNvbWJpbmVkIFVSTFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlbGF0aXZlVVJMKSB7XG4gIHJldHVybiByZWxhdGl2ZVVSTFxuICAgID8gYmFzZVVSTC5yZXBsYWNlKC9cXC8rJC8sICcnKSArICcvJyArIHJlbGF0aXZlVVJMLnJlcGxhY2UoL15cXC8rLywgJycpXG4gICAgOiBiYXNlVVJMO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL2NvbWJpbmVVUkxzLmpzXG4vLyBtb2R1bGUgaWQgPSAyNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBDYW5jZWwgPSByZXF1aXJlKCcuL0NhbmNlbCcpO1xuXG4vKipcbiAqIEEgYENhbmNlbFRva2VuYCBpcyBhbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byByZXF1ZXN0IGNhbmNlbGxhdGlvbiBvZiBhbiBvcGVyYXRpb24uXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBleGVjdXRvciBUaGUgZXhlY3V0b3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIENhbmNlbFRva2VuKGV4ZWN1dG9yKSB7XG4gIGlmICh0eXBlb2YgZXhlY3V0b3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gIH1cblxuICB2YXIgcmVzb2x2ZVByb21pc2U7XG4gIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIHByb21pc2VFeGVjdXRvcihyZXNvbHZlKSB7XG4gICAgcmVzb2x2ZVByb21pc2UgPSByZXNvbHZlO1xuICB9KTtcblxuICB2YXIgdG9rZW4gPSB0aGlzO1xuICBleGVjdXRvcihmdW5jdGlvbiBjYW5jZWwobWVzc2FnZSkge1xuICAgIGlmICh0b2tlbi5yZWFzb24pIHtcbiAgICAgIC8vIENhbmNlbGxhdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHJlcXVlc3RlZFxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRva2VuLnJlYXNvbiA9IG5ldyBDYW5jZWwobWVzc2FnZSk7XG4gICAgcmVzb2x2ZVByb21pc2UodG9rZW4ucmVhc29uKTtcbiAgfSk7XG59XG5cbi8qKlxuICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC5cbiAqL1xuQ2FuY2VsVG9rZW4ucHJvdG90eXBlLnRocm93SWZSZXF1ZXN0ZWQgPSBmdW5jdGlvbiB0aHJvd0lmUmVxdWVzdGVkKCkge1xuICBpZiAodGhpcy5yZWFzb24pIHtcbiAgICB0aHJvdyB0aGlzLnJlYXNvbjtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgbmV3IGBDYW5jZWxUb2tlbmAgYW5kIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsXG4gKiBjYW5jZWxzIHRoZSBgQ2FuY2VsVG9rZW5gLlxuICovXG5DYW5jZWxUb2tlbi5zb3VyY2UgPSBmdW5jdGlvbiBzb3VyY2UoKSB7XG4gIHZhciBjYW5jZWw7XG4gIHZhciB0b2tlbiA9IG5ldyBDYW5jZWxUb2tlbihmdW5jdGlvbiBleGVjdXRvcihjKSB7XG4gICAgY2FuY2VsID0gYztcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgdG9rZW46IHRva2VuLFxuICAgIGNhbmNlbDogY2FuY2VsXG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbFRva2VuO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NhbmNlbC9DYW5jZWxUb2tlbi5qc1xuLy8gbW9kdWxlIGlkID0gMjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFN5bnRhY3RpYyBzdWdhciBmb3IgaW52b2tpbmcgYSBmdW5jdGlvbiBhbmQgZXhwYW5kaW5nIGFuIGFycmF5IGZvciBhcmd1bWVudHMuXG4gKlxuICogQ29tbW9uIHVzZSBjYXNlIHdvdWxkIGJlIHRvIHVzZSBgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5YC5cbiAqXG4gKiAgYGBganNcbiAqICBmdW5jdGlvbiBmKHgsIHksIHopIHt9XG4gKiAgdmFyIGFyZ3MgPSBbMSwgMiwgM107XG4gKiAgZi5hcHBseShudWxsLCBhcmdzKTtcbiAqICBgYGBcbiAqXG4gKiBXaXRoIGBzcHJlYWRgIHRoaXMgZXhhbXBsZSBjYW4gYmUgcmUtd3JpdHRlbi5cbiAqXG4gKiAgYGBganNcbiAqICBzcHJlYWQoZnVuY3Rpb24oeCwgeSwgeikge30pKFsxLCAyLCAzXSk7XG4gKiAgYGBgXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzcHJlYWQoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoYXJyKSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFycik7XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvc3ByZWFkLmpzXG4vLyBtb2R1bGUgaWQgPSAyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9